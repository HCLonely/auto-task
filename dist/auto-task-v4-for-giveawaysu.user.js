// ==UserScript==
// @name               auto-task-v4-for-giveawaysu
// @namespace          auto-task-v4-for-giveawaysu
// @version            4.1.9-Beta
// @description        赠Key站自动任务
// @author             HCLonely
// @license            MIT
// @run-at             document-start
// @homepage           https://auto-task-doc.js.org/
// @supportURL         https://github.com/HCLonely/auto-task-v4/issues
// @updateURL          https://github.com/HCLonely/auto-task-new/raw/main/dist/auto-task-v4-for-giveawaysu.user.js
// @installURL         https://github.com/HCLonely/auto-task-new/raw/main/dist/auto-task-v4-for-giveawaysu.user.js
// @downloadURL        https://github.com/HCLonely/auto-task-new/raw/main/dist/auto-task-v4-for-giveawaysu.user.js

// @include            *://giveaway.su/giveaway/view/*
// @include            *://discord.com/*
// @include            *://www.twitch.tv/*
// @include            *://www.youtube.com/*
// @include            *://*.reddit.com/*

// @grant              GM_setValue
// @grant              GM_getValue
// @grant              GM_xmlhttpRequest
// @grant              GM_registerMenuCommand
// @grant              GM_info
// @grant              GM_openInTab
// @grant              window.close
// @grant              window.localStorage

// @connect            cdn.jsdelivr.net
// @connect            store.steampowered.com
// @connect            steamcommunity.com
// @connect            youtube.com
// @connect            www.youtube.com
// @connect            facebook.com
// @connect            instagram.com
// @connect            vk.com
// @connect            twitch.tv
// @connect            www.twitch.tv
// @connect            gql.twitch.tv
// @connect            github.com
// @connect            discordapp.com
// @connect            discord.gg
// @connect            discord.com
// @connect            www.reddit.com
// @connect            oauth.reddit.com
// @connect            raw.githubusercontent.com
// @connect            t.me
// @connect            bit.ly
// @connect            giveaway.su
// @connect            google.com
// @connect            givee.club
// @connect            *
// @require            https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js
// @require            https://cdn.jsdelivr.net/npm/js-cookie@3.0.1/dist/js.cookie.min.js
// @require            https://cdn.jsdelivr.net/npm/regenerator-runtime@0.13.5/runtime.min.js
// @require            https://cdn.jsdelivr.net/npm/js-sha1@0.6.0/src/sha1.min.js
// @require            https://cdn.jsdelivr.net/npm/sweetalert2@11

// @compatible         Tampermonkey Only
// @noframes
// ==/UserScript==

console.log('%c%s', 'color:blue', 'Auto Task GS特供脚本开始加载');

!function(){var s={514:function(t,e){!function(t){"use strict";var i=function(){return(i=Object.assign||function(t){for(var e,s=1,i=arguments.length;s<i;s++)for(var n in e=arguments[s])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function n(t,e,s){if(s||2===arguments.length)for(var i,n=0,o=e.length;n<o;n++)!i&&n in e||((i=i||Array.prototype.slice.call(e,0,n))[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function d(t){return"[object Object]"===e(t)}function h(t,e){var s=n(n([],e||[],!0),["_"],!1).join("|");return t.replace(new RegExp("((".concat(s,")[a-z])+"),"g"),function(t,e){return e.replace(new RegExp(s),"").toLocaleUpperCase()})}var e=function(t){return Object.prototype.toString.call(t)},s=(o.prototype.init=function(){try{this.getSystemName(),this.getBrowserName()}catch(t){console.warn("[UA formatter error] ".concat(t))}},o.prototype.getEngine=function(){var t=this.agent;return-1!==t.indexOf("Trident")?"Trident":-1!==t.indexOf("Firefox")?"Gecko":-1!==t.indexOf("Presto")?"Presto":"WebKit"},o.prototype.getSystemName=function(){var t,e=(this.agent.match(/^[a-z]+\/\d+\.\d+\s?\(([a-z\d\s:;./_-]+)\)/i)||[])[1];try{var s="";if(/Windows/i.test(e)){var i=(e.match(/NT\s(\d+\.\d+)/)||[])[1];switch(this.info.os="Windows",i){case"6.3":s="8.1";break;case"6.2":s="8";break;case"6.1":s="7";break;case"5.2":case"5.1":s="XP";break;default:s=i}return this.info.device="PC",void(this.info.osVersion=s)}if(/^Macintosh/i.test(e))return s=(e.match(/X\s((\d+(_|\.))+\d+)/)||[])[1],this.info.os="Macintosh",this.info.device="PC",void(this.info.osVersion=null!==(t=null==s?void 0:s.replace(/_/g,"."))&&void 0!==t?t:"Unknown");if(/^iPad/i.test(e))return s=(e.match(/((\d+_)+\d+)/)||[])[1],this.info.os="iPad",this.info.device="Tablet",void(this.info.osVersion=s.replace(/_/g,"."));if(/^iPhone/i.test(e))return s=(e.match(/((\d+_)+\d+)/)||[])[1],this.info.os="iPhone",this.info.device="Mobile",void(this.info.osVersion=s.replace(/_/g,"."));if(-1!==e.indexOf("Android")){var n=(e.match(/Android\s((\d+\.?)+\d?)/)||[])[1];return this.info.device="Mobile",this.info.os="Android",void(this.info.osVersion=n)}if(/Linux\s[a-z\d_]+/.test(e))return this.info.os="Linux",void(this.info.osVersion="Unknown");this.info.os="Unknown",this.info.osVersion="Unknown"}catch(t){this.info.os="Unknown",this.info.osVersion="Unknown"}},o.prototype.getBrowserName=function(){var t=Object.keys(this.browserNameMap).map(function(t){return new RegExp("".concat(t,"(\\/|\\s)(\\d+\\.)+\\d+"))}),e=1<(e=(this.agent.match(/[a-z\d]+(\/|\s)(\d+\.)+\d+/gi)||[]).filter(function(e){return-1!==t.findIndex(function(t){return t.test(e)})})).length&&!/^Safari/.test(e[e.length-1])?e.reverse():e;this.info=i(i({},this.info),this._formatBrowserVersion(e[0]))},o.prototype._formatBrowserVersion=function(t){var e,s,i,n;try{for(var o=null!==(s=null===(e=t.match(/(?<name>[a-z\d]+)(\/|\s)(?<version>(\d+\.)+\d+)/i))||void 0===e?void 0:e.groups)&&void 0!==s?s:{},a=o.name,r=o.version,l={},u=0,c=Object.entries(this.browserNameMap);u<c.length;u++){var d=c[u],h=d[0],g=d[1];if(new RegExp(h).test(a)){l=g;break}}var p={browserVersion:null!=r?r:"Unknown",browser:null!==(i=l.en)&&void 0!==i?i:"Unknown",browserZH:null!==(n=(null==l?void 0:l.zh)||l.en)&&void 0!==n?n:"Unknown"};return"Trident"===a&&(p.browserVersion={"4.0":8,"5.0":9,"6.0":10,"7.0":11}[r]),p}catch(t){return console.warn("[UA formatter error] ".concat(t)),{browser:"Unknown",browserVersion:"Unknown"}}},o);function o(t){this.agent="",this.info={browser:"",browserZH:"",browserVersion:"",os:"",osVersion:"",device:"Unknown",engine:"WebKit"},this.browserNameMap={MicroMessenger:{en:"MicroMessenger",zh:"微信"},MetaSr:{en:"MetaSr",zh:"搜狗浏览器"},"QQ(Browser)?":{en:"QQBrowser",zh:"QQ浏览器"},UCBrowser:{en:"UCBrowser",zh:"UC浏览器"},"2345Explorer":{en:"2345Explorer",zh:"2345极速浏览器"},Mb2345Browser:{en:"Mb2345Browser",zh:"2345手机浏览器"},Trident:{en:"Internet Explorer"},"Edge?":{en:"Edge"},OPR:{en:"Opera"},Vivaldi:{en:"Vivaldi"},Firefox:{en:"Firefox"},Chrome:{en:"Chrome"},Safari:{en:"Safari"}},this.agent=t,this.init();var e=this.info,s=e.browser,t=e.browserVersion,e=e.osVersion;this.info=i(i({},this.info),{engine:this.getEngine(),browserVersion:"Safari"===s?e:t})}function a(){this.cookies={},this.init()}var r=new(a.prototype.init=function(){var s={};document.cookie.split(/;\s/).forEach(function(t){var e=t.split(/=/),t=e[0],e=e[1];s[t]=e}),this.cookies=s},a.prototype.getItem=function(t){return this.cookies[t]},a.prototype.getAllItems=function(){return this.cookies},a.prototype.setItem=function(t,e,s,i,n,o){document.cookie="".concat(t,"=").concat(e).concat(s?"; expires=".concat(s):"").concat(i?"; path=".concat(i):"").concat(n?"; domain=".concat(n):"").concat(o?"; secure":"")},a);t.countDown=function t(e,s,i,n){if(!window)throw new Error("window is not defind.");if(0<e)return n&&n(),e--,window[s]=window.setTimeout(function(){t(e,s,i,n)},1e3),function(){return clearTimeout(window[s])};clearTimeout(window[s]),i&&i()},t.createRandomID=function(t){void 0===t&&(t=12);for(var e=[],s="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),i=s.length,n=0;n<t;n++)e.push(s[Math.round(Math.random()*i)]);return e.join("")},t.dCookie=r,t.debounce=function(s,i,n){var o;void 0===i&&(i=0);var a=n=void 0===n?!1:n;return function(){var t=this,e=arguments;a&&(s.apply(this,arguments),a=!1),clearTimeout(o),o=setTimeout(function(){n?a=!0:s.apply(t,e)},i)}},t.deepCopy=function t(e){if(d(e)||Array.isArray(e)){var s,i=Array.isArray(e)?[]:{};for(s in e)i[s]=t(e[s]);return i}return e},t.formatQueryParams=function(t){t=null===(t=/\?(?<params>(.*)=.+)/.exec(decodeURIComponent(t)))||void 0===t?void 0:t.groups;if(!t)return{};for(var e=t.params.split("&"),i={},s=0;s<e.length;s++)e[s].replace(/([^?&]*)=([^?&]*)/,function(t,e,s){return i[e]=s,t});return i},t.formatThousandth=function(t){var e="".concat(t).split("."),t=e[0],e=e[1],e=void 0===e?"":e,t=t.replace(/\d{1,3}(?=(\d{3})+$)/g,"$&,");return"".concat(t).concat(e?".".concat(e):"")},t.generateTree=function t(e,s,i,n){for(var o=[],a=0;a<e.length;a++){var r=e[a];r[i]===s&&(o.push(r),r.children=t(e,r[null!=n?n:"id"],i,n))}return o},t.isEmpty=function(t){return Array.isArray(t)?0===t.length:d(t)?0===Object.keys(t).length:["[object Set]","[object Map]"].includes(e(t))?0===t.size:[null,void 0,""].includes(t)},t.isFunction=function(t){return"[object Function]"===e(t)},t.isImageUrl=function(t){return/\.((png)|(jpe?g)|(gif)|(svg)|(webp))$/gi.test(t)},t.isObject=d,t.isRegexp=function(t){return"[object RegExp]"===e(t)},t.objectKeyToCamelCase=function t(e,s,i){if(Array.isArray(e))for(var n=[],o=0;o<e.length;o++)n[o]=t(s&&e[o][s]?e[o][s]:e[o],s,i);else if(d(e)){n={};for(var a=s&&e[s]?e[s]:e,r=0,l=Object.entries(a);r<l.length;r++){var u=(c=l[r])[0],c=c[1];Array.isArray(c)||d(a)?n[h(u,i)]=t(c,s,i):n[h(u,i)]=c}}else n=e;return n},t.realType=e,t.searchParams=function(t,e){return void 0===t&&(t=null===location||void 0===location?void 0:location.search),new URLSearchParams(t).get(e)},t.toLowerCamelCase=h,t.toUnderline=function(t){return t.replace(/([A-Z])/g,function(t){return"_".concat(t.toLocaleLowerCase())})},t.ua=function(t){return void 0===t&&(t=navigator.userAgent),new s(t).info},Object.defineProperty(t,"__esModule",{value:!0})}(e)}},i={};function mi(t){var e=i[t];if(void 0!==e)return e.exports;e=i[t]={exports:{}};return s[t].call(e.exports,e,e.exports,mi),e.exports}mi.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return mi.d(e,{a:e}),e},mi.d=function(t,e){for(var s in e)mi.o(e,s)&&!mi.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},mi.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};!function(){"use strict";var t=Swal,o=mi.n(t);const a=Cookies;var n=mi(514);function _(s,i){o().fire({title:E("errorReport"),icon:"error",showCancelButton:!0,confirmButtonText:E("toGithub"),showDenyButton:!0,denyButtonText:E("toKeylol"),cancelButtonText:E("close")}).then(t=>{var{isDenied:e,isConfirmed:t}=t;t?window.open(`https://github.com/HCLonely/auto-task-v4/issues/new?title=${encodeURIComponent("脚本报错: "+i)}&labels=bug&body=`+encodeURIComponent(`错误链接: [${window.location.href}](${window.location.href})

环境:
\`\`\`
${JSON.stringify((0,n.ua)(),null,4)}
\`\`\`
脚本管理器: \`${GM_info.scriptHandler} ${GM_info.version}\`
脚本版本: \`${GM_info.script.version}\`

报错信息:
\`\`\`
${s.stack}
\`\`\`

执行日志:
\`\`\`
${$.makeArray($("#auto-task-info>li")).map(t=>t.innerText).join("\n")}
\`\`\`
`),"_blank"):e&&(e=`错误链接: [url=${window.location.href}]${window.location.href}[/url]

环境:

[code]${JSON.stringify((0,n.ua)(),null,4)}[/code]

脚本管理器: ${GM_info.scriptHandler} ${GM_info.version}
脚本版本: ${GM_info.script.version}

报错信息:
[code]${s.stack}[/code]

执行日志:
[code]${$.makeArray($("#auto-task-info>li")).map(t=>t.innerText).join("\n")}[/code]`,GM_setClipboard(e),o().fire({title:E("copySuccess"),icon:"success",confirmButtonText:E("ok")}).then(()=>{window.open("https://keylol.com/forum.php?mod=post&action=reply&fid=319&tid=777450","_blank")}))}),console.log("%c%s","color:white;background:red",i+`
`+s.stack)}async function i(s){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;try{var e=await new Promise(e=>{s.dataType&&(s.responseType=s.dataType);var t={timeout:3e4,ontimeout(t){e({result:"Error",statusText:"Timeout",status:601,data:t,options:s})},onabort(t){e({result:"Error",statusText:"Aborted",status:602,data:t,options:s})},onerror(t){e({result:"Error",statusText:"Error",status:603,data:t,options:s})},onload(t){e({result:"Success",statusText:"Load",status:600,data:t,options:s})},...s};GM_xmlhttpRequest(t)});return console.log("发送请求:",e),600!==e.status&&t<2?await i(s,t+1):e}catch(t){return _(t,"httpRequest"),console.log("发送请求:",{errorMsg:t,options:s}),{result:"JsError",statusText:"Error",status:604,error:t,options:s}}}const I=i;function C(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}const V=t=>{let{type:e,text:s,html:i,id:n}=t;const o={success:()=>o,error:()=>o,warning:()=>o,info:()=>o,view:()=>o};try{var a;let t;if(e)switch(e){case"joiningSteamGroup":case"leavingSteamGroup":case"gettingSteamGroupId":t=$(`<li>${E(e)}<a href="https://steamcommunity.com/groups/${s}" target="_blank">${s}</a>...<font></font></li>`);break;case"subscribingForum":case"unsubscribingForum":case"gettingForumId":t=$(`<li>${E(e)}<a href="https://steamcommunity.com/app/${s}/discussions/" target="_blank">${s}</a>...<font></font></li>`);break;case"followingCurator":case"unfollowingCurator":case"getCuratorId":t=$(`<li>${E(e)}<a href="https://store.steampowered.com/${null!==s&&void 0!==s&&s.includes("/")?s:"curator/"+s}" target="_blank">${s}</a>...<font></font></li>`);break;case"addingToWishlist":case"removingFromWishlist":case"followingGame":case"unfollowingGame":t=$(`<li>${E(e)}<a href="https://store.steampowered.com/app/${s}" target="_blank">${s}</a>...<font></font></li>`);break;case"favoritingWorkshop":case"unfavoritingWorkshop":case"gettingWorkshopAppId":case"votingUpWorkshop":t=$(`<li>${E(e)}<a href="https://steamcommunity.com/sharedfiles/filedetails/?id=${s}" target="_blank">
      ${s}</a>...<font></font></li>`);break;case"gettingAnnouncementParams":case"likingAnnouncement":t=$(`<li>${E(e)}<a href="https://store.steampowered.com/news/app/${s}/view/${n}" target="_blank">
      ${n}</a>...<font></font></li>`);break;case"joiningDiscordServer":case"gettingDiscordGuild":t=$(`<li>${E(e)}<a href="https://discord.com/invite/${s}" target="_blank">${s}</a>...<font></font></li>`);break;case"leavingDiscordServer":t=$(`<li>${E(e)}<a href="https://discord.com/channels/@me/${s}" target="_blank">${s}</a>...<font></font></li>`);break;case"updateDiscordAuth":t=$(`<li style="color:red;">${E("updateDiscordAuth")}</li>`);break;case"followingTwitchChannel":case"unfollowingTwitchChannel":case"gettingTwitchChannelId":t=$(`<li>${E(e)}<a href="https://www.twitch.tv/${s}" target="_blank">${s}</a>...<font></font></li>`);break;case"gettingInsUserId":case"followingIns":case"unfollowingIns":t=$(`<li>${E(e)}<a href="https://www.instagram.com/${s}/" target="_blank">${s}</a>...<font></font></li>`);break;case"gettingTwitterUserId":case"followingTwitterUser":case"unfollowingTwitterUser":t=$(`<li>${E(e)}<a href="https://twitter.com/${s}" target="_blank">${s}</a>...<font></font></li>`);break;case"retweetting":case"unretweetting":t=$(`<li>${E(e)}${s}...<font></font></li>`);break;case"joiningReddit":case"leavingReddit":t=$(`<li>${E(e)}<a href="https://www.reddit.com/r/${s}/" target="_blank">${s}</a>...<font></font></li>`);break;case"followingRedditUser":case"unfollowingRedditUser":t=$(`<li>${E(e)}<a href="https://www.reddit.com/user/${null===s||void 0===s?void 0:s.replace("u_","")}" target="_blank">
      ${null===s||void 0===s?void 0:s.replace("u_","")}</a>...<font></font></li>`);break;case"followingYtbChannel":case"unfollowingYtbChannel":t=$(`<li>${E(e)}<a href="https://www.youtube.com/channel/${s}" target="_blank">${s}</a>...<font></font></li>`);break;case"likingYtbVideo":case"unlikingYtbVideo":t=$(`<li>${E(e)}<a href="https://www.youtube.com/watch?v=${s}" target="_blank">${s}</a>...<font></font></li>`);break;case"gettingVkId":case"joiningVkGroup":case"leavingVkGroup":case"joiningVkPublic":case"leavingVkPublic":case"sendingVkWall":case"deletingVkWall":t=$(`<li>${E(e)}<a href="https://vk.com/${s}/" target="_blank">${s}</a>...<font></font></li>`);break;case"visitingLink":t=$(`<li>${E("visitingLink")}<a href="${s}" target="_blank">${s}</a>...<font></font></li>`);break;case"verifyingInsAuth":case"text":t=$(`<li>${E(s)}<font></font></li>`);break;case"html":t=$(s||i);break;case"whiteList":t=$(`<li><font class="warning">${E("skipTask")}[${s}(${n})](${E("whiteList")})</font></li>`);break;case"globalOptionsSkip":t=$(`<li>${E("skipTaskOption")}<font class="warning">${s}</font></li>`);break;default:t=$(`<li>${E("unKnown")}:${e}(${s})...<font></font></li>`)}else t=s?$(`<li>${E(s)}<font></font></li>`):i?$(i):$("<li><font></font></li>");return t.addClass("card-text"),$("#auto-task-info").append(t),null!==(a=t[0])&&void 0!==a&&a.scrollIntoView(),{font:t.find("font"),success(){var t,e,s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Success",i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return null!==(t=this.font)&&void 0!==t&&t.attr("class","").addClass("success"),i?null!==(e=this.font)&&void 0!==e&&e.html(s):null!==(e=this.font)&&void 0!==e&&e.text(s),this},error(){var t,e,s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Error",i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return null!==(t=this.font)&&void 0!==t&&t.attr("class","").addClass("error"),i?null!==(e=this.font)&&void 0!==e&&e.html(s):null!==(e=this.font)&&void 0!==e&&e.text(s),this},warning(){var t,e,s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Warning",i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return null!==(t=this.font)&&void 0!==t&&t.attr("class","").addClass("warning"),i?null!==(e=this.font)&&void 0!==e&&e.html(s):null!==(e=this.font)&&void 0!==e&&e.text(s),this},info(){var t,e,s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Info",i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return null!==(t=this.font)&&void 0!==t&&t.attr("class","").addClass("info"),i?null!==(e=this.font)&&void 0!==e&&e.html(s):null!==(e=this.font)&&void 0!==e&&e.text(s),this},view(){var t;return null!==(t=this.font)&&void 0!==t&&t[0].scrollIntoView(),this}}}catch(t){return _(t,"echoLog"),o}},L=t=>{try{return[...new Set(t)]}catch(t){return _(t,"unique"),[]}},l=async e=>{try{if(!e)return null;const s=GM_getValue("redirectLinks")||{};return s[e]&&s[e],await I({url:e,method:"GET"}).then(t=>{t=t.data;return null!=t&&t.finalUrl?(s[e]=t.finalUrl,GM_setValue("redirectLinks",s),t.finalUrl):null})}catch(t){return _(t,"getRedirectLink"),null}};const r={doTask:{discord:{servers:!0},instagram:{users:!0},twitch:{channels:!0},twitter:{users:!0,retweets:!0},vk:{names:!0},youtube:{channels:!0,likes:!0},reddit:{reddits:!0},steam:{groups:!0,wishlists:!0,follows:!0,forums:!0,workshops:!0,curators:!0,workshopVotes:!0,announcements:!0}},undoTask:{discord:{servers:!0},instagram:{users:!0},twitch:{channels:!0},twitter:{users:!0,retweets:!0},vk:{names:!0},youtube:{channels:!0,likes:!0},reddit:{reddits:!0},steam:{groups:!0,wishlists:!0,follows:!0,forums:!0,workshops:!0,curators:!0}},position:{buttonSideX:"right",buttonSideY:"top",buttonDistance:"15,30",showButtonSideX:"right",showButtonSideY:"top",showButtonDistance:"15,30",logSideX:"right",logSideY:"bottom",logDistance:"10,10"},hotKey:{doTaskKey:"alt + d",undoTaskKey:"alt + u",toggleLogKey:"alt + l"},other:{twitterVerifyId:"783214",youtubeVerifyChannel:"UCrXUsMBcfTVqwAS7DKg9C0Q",autoUpdateSource:"jsdelivr",language:"zh",checkLogin:!0,checkLeftKey:!0,defaultShowButton:!0,defaultShowLog:!0}};t=GM_getValue("globalOptions")||{};const u=(t,e)=>{try{const n={};for(var[s,i]of Object.entries(t))"[object Object]"===Object.prototype.toString.call(i)&&"[object Object]"===Object.prototype.toString.call(e[s])?n[s]=u(i,e[s]):n[s]=e[s]??i;return n}catch(t){return _(t,"assignObject"),r}},A=u(r,t);const c={zh:{website:"网站",type:"类型",edit:"编辑",whiteList:"白名单",skipTask:"跳过撤销任务",whiteListOptions:"白名单设置",changeWhiteListOption:"设置白名单(%0)",whiteListNotFound:"找不到此项白名单: %0",changeWhiteListSuccess:"白名单修改成功，刷新生效！",changeWebsiteOptions:"网站设置",changeGlobalOptions:"全局设置",ok:"是",save:"保存",close:"关闭",return:"返回",option:"选项",value:"值",websiteOptions:"当前网站设置",changeWebsiteOptionsSuccess:"更改当前网站设置成功，刷新生效！",changeGlobalOptionsSuccess:"更改全局设置成功，刷新生效！",needLogin:"请先登录！",getTasksInfo:"正在获取并处理任务信息...",gettingKey:"正在获取Key...",verifyingTask:"正在验证任务",notice:"自动任务脚本提醒",noKeysLeft:"此页面已经没有剩余key了，是否关闭？",giveawayEnded:"此活动已结束，是否关闭？",giveawayNotWork:"此活动因某些原因(已结束/暂停/未开始...)不可用(如果是脚本误判请及时反馈)，是否关闭？",confirm:"确定",cancel:"取消",unKnown:"未知",unKnownTaskType:"未识别的任务",doing:"正在做任务",allTasksComplete:"所有任务已完成！",getTaskIdFailed:"获取任务Id失败！",initSuccess:"%0 初始化成功！",initFailed:"%0 初始化失败！",errorLink:"链接错误: %0",needInit:"请先初始化",verifyingAuth:"正在验证%0凭证...",updatingAuth:"正在更新%0凭证...",initing:"正在初始化...",getFailed:"获取%0失败！",checkLoginFailed:"检测登录状态失败！",checkLeftKeyFailed:"检测剩余Key失败！",userId:"用户Id",joiningGiveaway:"正在加入赠Key",needJoinGiveaway:"需要先加入赠Key",cannotUndo:"此网站不支持取消任务",verifyAuth:"正在验证 %0 凭证...",closePageNotice:"如果此页面没有自动关闭，请自行关闭本页面。",errorReport:"检测到脚本报错，是否前往反馈BUG？",visitingLink:"正在访问链接: ",doTask:"做任务",undoTask:"撤销任务",verifyTask:"验证任务",getKey:"获取Key",selectAll:"全选",selectNone:"全不选",invertSelect:"反选",doFreeTask:"加入免费赠品",doPointTask:"加入点数赠品",skipTaskOption:"设置中已配置跳过任务",other:"其他",globalOptions:"全局设置",checkLogin:"登录检测</br>需要登录的网站自动登录，部分本网站支持",checkLeftKey:"剩余Key检测</br>赠Key活动结束提示是否关闭，部分本网站支持",twitterVerifyId:"通过尝试关注该账号验证Twitter凭证</br>默认为Twitter官方帐号 783214</br>不想关注官方账号可以改为自己的帐号",youtubeVerifyChannel:"通过尝试订阅该频道验证YouTube凭证</br>默认为YouTube官方频道 UCrXUsMBcfTVqwAS7DKg9C0Q</br>不想关注官方频道可以改为自己的频道",autoUpdateSource:"更新源</br>github: 需代理，实时更新</br>jsdelivr: 可不用代理，更新有延迟</br>standby: 备用</br>auto: 依次使用github, jsdelivr, standby源进行尝试更新",saveGlobalOptions:"保存全局设置",settingPage:"设置页面",name:"名称",version:"版本",scriptManager:"脚本管理器",script:"脚本",environment:"环境",os:"系统",browser:"浏览器",getId:"获取 %0 id",getTwitterUserId:"获取Twitter用户id(获取id功能仅在设置页面可用)",getYoutubeChannelId:"获取Youtube频道id(获取id功能仅在设置页面可用)",showButton:"显示按钮",hideButton:"隐藏按钮",showLog:"显示日志",hideLog:"隐藏日志",defaultShowButton:"默认显示按钮",defaultShowLog:"默认显示日志",position:"组件位置",buttonSideX:"按钮区域水平方向定位(实时预览功能仅在设置页面可用)</br>left: 靠左 | right: 靠右",buttonSideY:"按钮区域垂直方向定位(实时预览功能仅在设置页面可用)</br>top: 靠上 | bottom: 靠下",buttonDistance:"按钮区域距边缘的距离(实时预览功能仅在设置页面可用)</br>格式: X距离,Y距离",showButtonSideX:"显示按钮水平方向定位(实时预览功能仅在设置页面可用)</br>left: 靠左 | right: 靠右",showButtonSideY:"显示按钮垂直方向定位(实时预览功能仅在设置页面可用)</br>top: 靠上 | bottom: 靠下",showButtonDistance:"显示按钮距边缘的距离(实时预览功能仅在设置页面可用)</br>格式: X距离,Y距离",logSideX:"日志区域水平方向定位(实时预览功能仅在设置页面可用)</br>left: 靠左 | right: 靠右",logSideY:"日志区域垂直方向定位(实时预览功能仅在设置页面可用)</br>top: 靠上 | bottom: 靠下",logDistance:"日志区域距边缘的距离(实时预览功能仅在设置页面可用)</br>格式: X距离,Y距离",hotKey:"快捷键",doTaskKey:"做任务快捷键</br>(实时预览功能仅在设置页面可用)",undoTaskKey:"撤销任务快捷键</br>(实时预览功能仅在设置页面可用)",toggleLogKey:"显示/隐藏日志快捷键</br>(实时预览功能仅在设置页面可用)",tasksHistory:"任务历史",clearHistory:"清空历史",clearHistoryFinished:"已清空任务历史！",deleteTask:"删除任务",lastChangeTime:"最后一次修改时间",clearTaskFinished:"删除以下任务完成！",clearTaskFailed:"删除任务失败，没有找到任务名！",syncData:"数据同步",settingData:"正在上传数据...",gettingData:"正在获取数据...",help:"帮助",fileName:"文件名",upload2gist:"同步到Gist",downloadFromGist:"从Gist同步",saveAndTest:"保存配置并测试",testSuccess:"测试成功！",testFailed:"测试失败！",saveAndTestNotice:"请先保存配置并测试！",processingData:"正在处理数据...",updatingData:"正在上传数据...",syncDataSuccess:"同步数据成功！",syncDataFailed:"同步数据失败，请在控制台查看错误信息！",downloadingData:"正在下载数据...",checkedNoData:"没有检测到远程数据，请确认配置是否正确！",savingData:"正在保存数据...",syncHistory:"同步任务历史",checkUpdateFailed:"检测更新失败",newVersionNotice:'检测到新版本V%0, <a class="high-light" href="%1" target="_blank">点此更新</a>',language:"语言</br>目前仅支持zh: 中文, en: 英文",gistOptions:"Gist 设置",swalNotice:"检测到您第一次安装V4版本脚本，请前往阅读用前必读内容！",echoNotice:'检测到您第一次安装V4版本脚本，请<a class="high-light" href="%0" target="_blank">点此前往</a>阅读用前必读内容！',noticeLink:"https://auto-task-doc.js.org/guide/#用前必读",toGithub:"前往Github反馈",toKeylol:"前往其乐论坛反馈",copySuccess:"错误信息已复制到剪切板，是否前往其乐论坛反馈？",copyFailed:"请复制下方错误信息后前往Keylol论坛反馈！",updateText:"%0 版本更新内容：",Active:"进行中",Ended:"已结束",Banned:"已封禁",Paused:"已暂停",notStart:"未开始",groups:"组",wishlists:"愿望单",follows:"游戏关注",forums:"论坛",workshops:"创意工坊收藏",curators:"鉴赏家",workshopVotes:"创意工坊点赞",announcements:"社区通知",steamCommunity:"Steam社区",steamStore:"Steam商店",needLoginSteamStore:'请先<a href="https://store.steampowered.com/login/" target="_blank">登录Steam商店</a>',needLoginSteamCommunity:'请先<a href="https://steamcommunity.com/login/home/" target="_blank">登录Steam社区</a>',joiningSteamGroup:"正在加入Steam组",leavingSteamGroup:"正在退出Steam组",gettingSteamGroupId:"正在获取Steam组Id",subscribingForum:"正在订阅Steam论坛",unsubscribingForum:"正在取消订阅Steam论坛",gettingForumId:"正在获取Steam论坛Id",followingCurator:"正在关注Steam鉴赏家",unfollowingCurator:"正在取关Steam鉴赏家",addingToWishlist:"正在添加游戏到Steam愿望单",removingFromWishlist:"正在从Steam愿望单移除游戏",followingGame:"正在关注Steam游戏",unfollowingGame:"正在取关Steam游戏",favoritingWorkshop:"正在收藏Steam创意工坊物品",unfavoritingWorkshop:"正在取消收藏Steam创意工坊物品",gettingWorkshopAppId:"正在获取Steam创意工坊物品Id",votingUpWorkshop:"正在点赞Steam创意工坊物品",gettingAnnouncementParams:"正在获取Steam通知信息",likingAnnouncement:"正在点赞Steam通知",changingArea:"正在更换Steam地区: %0...",notNeededChangeArea:"当前地区不需要更换",noAnotherArea:"请检测是否开启正确开启代理",gettingAreaInfo:"正在获取Steam地区信息...",changeAreaNotice:"疑似锁区游戏，尝试换区执行",steamFinishNotice:"Steam任务完成，尝试将购物车地区换回CN",servers:"服务器",joiningDiscordServer:"正在加入Discord服务器",leavingDiscordServer:"正在退出Discord服务器",gettingDiscordGuild:"正在获取Discord服务器Id",users:"用户",loginIns:'请先<a href="https://www.instagram.com/accounts/login/" target="_blank">登录Instagram</a>',insBanned:"您的Instagram账户已被封禁",verifyingInsAuth:"正在验证Instagram凭证...",gettingInsUserId:"正在获取Instagram用户Id",followingIns:"正在关注Instagram用户",unfollowingIns:"正在取关Instagram用户",reddits:"社区/用户",loginReddit:'请先<a href="https://www.reddit.com/login/" target="_blank">登录Reddit</a>',changingRedditVersion:"正在切换Reddit为新版页面...",joiningReddit:"正在加入Reddit社区",leavingReddit:"正在退出Reddit社区",followingRedditUser:"正在关注Reddit用户",unfollowingRedditUser:"正在取关Reddit用户",channels:"频道",followingTwitchChannel:"正在关注Twitch频道",unfollowingTwitchChannel:"正在取关Twitch频道",gettingTwitchChannelId:"正在获取Twitch频道Id",twitterUser:"推特用户",retweets:"转推",followingTwitterUser:"正在关注推特用户",unfollowingTwitterUser:"正在取关推特用户",retweetting:"正在转推",unretweetting:"正在撤销转推",names:"组/社区/动态",loginVk:'请先<a href="https://vk.com/login/" target="_blank">登录Vk</a>',gettingVkId:"正在获取Vk任务Id",joiningVkGroup:"正在加入Vk组",leavingVkGroup:"正在退出Vk组",joiningVkPublic:"正在加入Vk社区",leavingVkPublic:"正在退出Vk社区",sendingVkWall:"正在转发Vk动态",deletingVkWall:"正在撤销转发Vk动态",youtubeChannel:"YouTube频道",likes:"点赞",loginYtb:'请先<a href="https://accounts.google.com/ServiceLogin?service=youtube" target="_blank">登录YouTube</a>',tryUpdateYtbAuth:'请尝试<a href="https://www.youtube.com/#auth" target="_blank">更新YouTube凭证</a>',gettingYtbToken:"正在获取YouTube Token...",followingYtbChannel:"正在订阅YouTube频道",unfollowingYtbChannel:"正在退订YouTube频道",likingYtbVideo:"正在点赞YouTube视频",unlikingYtbVideo:"正在取消点赞YouTube视频",giveKeyNoticeBefore:"每次验证间隔15s",giveKeyNoticeAfter:'如果没有key, 请在<a href="https://givekey.ru/profile" target="_blank">https://givekey.ru/profile</a>查看',noPoints:"点数不够，跳过抽奖",getNeedPointsFailed:"获取所需点数失败，跳过抽奖",joiningLottery:"正在加入抽奖",doingGleamTask:"正在做Gleam任务...",gettingGleamLink:"正在获取Gleam任务链接...",gleamTaskNotice:"如果此页面长时间未关闭，请完成任一任务后自行关闭！",verifiedGleamTasks:"已尝试验证所有任务，验证失败的任务请尝试手动验证或完成！",gsNotice:'为避免得到"0000-0000-0000"key, 已自动屏蔽"Grab Key"按钮，获取key时请关闭脚本！',SweepWidgetNotice:"正在处理并验证任务，每次验证任务有1~3s间隔防止触发验证过快警告..."},en:{website:"Website",type:"Type",edit:"Edit",whiteList:"Whitelist",skipTask:"Skip undo task",whiteListOptions:"Whitelist options",changeWhiteListOption:"Whitelist option(%0)",whiteListNotFound:"Cannot find this whitelist: %0",changeWhiteListSuccess:"The whitelist is successfully modified, and the page refresh will take effect!",changeWebsiteOptions:"Website options",changeGlobalOptions:"Global options",ok:"OK",save:"Save",close:"Close",return:"Return",option:"Option",value:"Value",websiteOptions:"Current website settings",changeWebsiteOptionsSuccess:"The current website setting is changed successfully, and the page refresh will take effect!",changeGlobalOptionsSuccess:"The global setting is changed successfully, and the refresh will take effect!",needLogin:"Please log in first!",getTasksInfo:"Obtaining and processing task information...",gettingKey:"Getting Key...",verifyingTask:"Verifying task",notice:"Automatic task script notice",noKeysLeft:"There are no more keys left on this page. Do you want to close it?",giveawayEnded:"This event has ended, do you want to close it?",giveawayNotWork:"This activity is unavailable for some reasons (banned/ended/paused/not started...) (if it is a script misjudgment, please give us feedback in time), is it closed?",confirm:"Confirm",cancel:"Cancel",unKnown:"Unknown",unKnownTaskType:"Unrecognized task",doing:"Doing a task",allTasksComplete:"All tasks have been completed!",getTaskIdFailed:"Failed to obtain task Id!",initSuccess:"%0 was initialized successfully!",initFailed:"%0 initialization failed!",errorLink:"Link error: %0",needInit:"Please initialize first",verifyingAuth:"Verifying %0 token...",updatingAuth:"Update %0 token...",initing:"Initializing...",getFailed:"Failed to get %0!",checkLoginFailed:"Failed to detect login status!",checkLeftKeyFailed:"Failed to detect the remaining keys!",userId:"User Id",joiningGiveaway:"Joining giveaway",needJoinGiveaway:"Need to join the giveaway first",cannotUndo:"This website does not support canceling tasks",verifyAuth:"Verifying %0 token...",closePageNotice:"f this page does not close automatically, please close this page yourself.",errorReport:"A script error is detected, do you want to report the BUG?",visitingLink:"Visiting link: ",doTask:"DoTask",undoTask:"UndoTask",verifyTask:"Verify",getKey:"GetKey",selectAll:"SelectAll",selectNone:"SelectNone",invertSelect:"InvertSelect",doFreeTask:"FreeTask",doPointTask:"PointTask",skipTaskOption:"Skip task has been configured in the settings",other:"Other",globalOptions:"Global Options",checkLogin:"Login detection</br>Need to log in to the website automatically log in, part of this website supports.",checkLeftKey:"Key remaining detection</br>The end of the giveaway event prompts whether to close or not, part of this website supports.",twitterVerifyId:"Verify Twitter token by trying to follow the account.</br>The default is the official Twitter account 783214.</br>If you don't want to follow the official account, you can change it to your own account.",youtubeVerifyChannel:"Verify YouTube token by trying to subscribe to the channel.</br>The default is the official YouTube channel UCrXUsMBcfTVqwAS7DKg9C0Q.</br>If you don't want to follow the official channel, you can change it to your own channel.",autoUpdateSource:"The source to update</br>github: Fast update.</br>jsdelivr: Update is delayed.</br>standby: Standby source.</br>auto: Try to update using github, jsdelivr, standby sources in turn.",saveGlobalOptions:"SaveSettings",settingPage:"Setting Page",name:"Name",version:"Version",scriptManager:"Script Manager",script:"Script",environment:"Environment",os:"OS",browser:"Browser",getId:"Get %0 id",getTwitterUserId:"Get Twitter user id (Get id function is only available on the settings page).",getYoutubeChannelId:"Get Youtube channel id (Get id function is only available on the settings page).",showButton:"ShowButton",hideButton:"HideButton",showLog:"ShowLog",hideLog:"HideLog",defaultShowButton:"Default display button",defaultShowLog:"Display log by default",position:"Component position",buttonSideX:"Horizontal positioning of the button area (real-time preview function is only available on the setting page).</br>left: left | right: right",buttonSideY:"The button area is positioned in the vertical direction (real-time preview function is only available on the settings page).</br>top: top | bottom: bottom",buttonDistance:"The distance between the button area and the edge (the real-time preview function is only available on the setting page).</br> Format: X distance, Y distance",showButtonSideX:"ShowButton horizontal positioning (real-time preview function is only available on the setting page).</br>left: left | right: right",showButtonSideY:"ShowButton vertical positioning (real-time preview function is only available on the setting page).</br>top: top | bottom: bottom",showButtonDistance:"The distance between the ShowButton and the edge (real-time preview function is only available on the setting page).</br> Format: X distance, Y distance",logSideX:"Horizontal positioning of the log area (real-time preview function is only available on the setting page).</br>left: left | right: right",logSideY:"Vertical positioning of the log area (real-time preview function is only available on the setting page).</br>top: top | bottom: bottom",logDistance:"The distance between the log area and the edge (the real-time preview function is only available on the setting page).</br> Format: X distance, Y distance",hotKey:"Shortcut key",doTaskKey:"DoTask shortcut keys</br> (real-time preview function is only available on the settings page).",undoTaskKey:"UndoTask shortcut keys</br> (real-time preview function is only available on the settings page).",toggleLogKey:"ShowLog/HideLog shortcut keys</br> (real-time preview function is only available on the settings page).",tasksHistory:"TasksHistory",clearHistory:"Clear history",clearHistoryFinished:"The mission history has been cleared!",deleteTask:"Delete task",lastChangeTime:"Last Change Time",clearTaskFinished:"Delete the following tasks completed!",clearTaskFailed:"Failed to delete the task, the task name was not found!",syncData:"Data synchronization",settingData:"Uploading data...",gettingData:"Getting data...",help:"Help",fileName:"Filename",upload2gist:"Sync to Gist",downloadFromGist:"Sync from Gist",saveAndTest:"Save configuration and test",testSuccess:"Test success!",testFailed:"Test failed!",saveAndTestNotice:"Please save the configuration and test first!",processingData:"Processing data...",updatingData:"Uploading data...",syncDataSuccess:"Synchronized data successfully!",syncDataFailed:"Failed to synchronize data, please check the error message on the console!",downloadingData:"Downloading data...",checkedNoData:"No remote data is detected, please confirm whether the configuration is correct!",savingData:"Saving data...",syncHistory:"Synchronize tasks history",checkUpdateFailed:"Check update failed",newVersionNotice:'Checked a new version V%0, <a class="high-light" href="%1" target="_blank">click to update</a>',language:"Language</br> Currently only supports zh: Chinese, en: English",gistOptions:"Gist Settings",swalNotice:"It is detected that you are installing the V4 version script for the first time, please go to read the READ ME FIRST content before use!",echoNotice:'It is detected that you are installing the V4 version script for the first time, please <a class="high-light" href="%0" target="_blank">click here</a> to read the READ ME FIRST content before use!',noticeLink:"https://auto-task-doc.js.org/en/guide/#read-me-first",toGithub:"Feedback(Github)",toKeylol:"Feedback(Keylol)",copySuccess:"The error message has been copied to the clipboard. Do you want to go to the Keylol forum to give feedback?",copyFailed:"Please copy the error information below and report back to the Keylol forum!",updateText:"Updates in version %0:",Active:"Active",Ended:"Ended",Banned:"Banned",Paused:"Paused",notStart:"notStart",groups:"Group",wishlists:"Wishlist",follows:"Follow Game",forums:"Forum",workshops:"Favorite Workshop",curators:"Curator",workshopVotes:"Voteup Workshop",announcements:"Announcement",steamCommunity:"Steam Community",steamStore:"Steam Store",needLoginSteamStore:'Please <a href="https://store.steampowered.com/login/" target="_blank">log in to the Steam Store</a>',needLoginSteamCommunity:'Please <a href="https://steamcommunity.com/login/home/" target="_blank">log in to the Steam Community</a>',joiningSteamGroup:"Joining Steam Group",leavingSteamGroup:"Leaving Steam Group",gettingSteamGroupId:"Getting Steam Group Id",subscribingForum:"Subscribing the Steam Forum",unsubscribingForum:"Unsubscribing the Steam Forum",gettingForumId:"Getting Steam Forum Id",followingCurator:"Following Steam Curator",unfollowingCurator:"Unfollowing Steam Curator",addingToWishlist:"Adding the game to the Steam wishlist",removingFromWishlist:"Removing the game from the Steam wishlist",followingGame:"Following Steam games",unfollowingGame:"Unfollowing Steam games",favoritingWorkshop:"Favouring Steam Workshop Items",unfavoritingWorkshop:"Unfavoriting Steam Workshop Items",gettingWorkshopAppId:"Getting Steam Workshop Item Id",votingUpWorkshop:"Liking Steam workshop items",gettingAnnouncementParams:"Getting Steam announcement information",likingAnnouncement:"Liking Steam announcement",changingArea:"Changing Steam area: %0...",notNeededChangeArea:"The current area does not need to be changed",noAnotherArea:"Please check whether the proxy is turned on correctly",gettingAreaInfo:"Getting Steam area information...",changeAreaNotice:"Suspected of a locked zone game, try to change the zone to execute",steamFinishNotice:"Steam task completed, try to change the shopping cart area back to CN",servers:"Server",joiningDiscordServer:"Joining Discord Server",leavingDiscordServer:"Leaving Discord Server",gettingDiscordGuild:"Getting Discord server Id",users:"User",loginIns:'Please <a href="https://www.instagram.com/accounts/login/" target="_blank">log in to Instagram</a>',insBanned:"Your Instagram account has been banned",verifyingInsAuth:"Verifying Instagram token...",gettingInsUserId:"Getting Instagram user Id",followingIns:"Following Instagram user",unfollowingIns:"Unfollowing Instagram user",reddits:"Reddit/User",loginReddit:'Please <a href="https://www.reddit.com/login/" target="_blank">log in to Reddit</a>',changingRedditVersion:"Switching Reddit to a new version page...",joiningReddit:"Joining the Reddit",leavingReddit:"Leaving the Reddit",followingRedditUser:"Following Reddit User",unfollowingRedditUser:"Unfollowing Reddit User",channels:"Channel",followingTwitchChannel:"Following Twitch Channel",unfollowingTwitchChannel:"Unfollowing Twitch Channel",gettingTwitchChannelId:"Getting Twitch Channel Id",twitterUser:"Twitter User",retweets:"Retweet",followingTwitterUser:"Following Twitter User",unfollowingTwitterUser:"Unfollowing Twitter User",retweetting:"Retweetting",unretweetting:"Unretweetting",names:"Group/Public/Wall",loginVk:'Please <a href="https://vk.com/login/" target="_blank">log in to Vk</a>',gettingVkId:"Getting Vk task Id",joiningVkGroup:"Joining Vk Group",leavingVkGroup:"Leaving Vk Group",joiningVkPublic:"Joining Vk Public",leavingVkPublic:"Leaving Vk Public",sendingVkWall:"Sending Vk Wall",deletingVkWall:"Deleting Vk Wall",youtubeChannel:"YouTube Channel",likes:"Like",loginYtb:'Please <a href="https://accounts.google.com/ServiceLogin?service=youtube" target="_blank">log in to YouTube</a>',tryUpdateYtbAuth:'Please try to <a href="https://www.youtube.com/#auth" target="_blank">update YouTube token</a>',gettingYtbToken:"Getting YouTube Token...",followingYtbChannel:"Subscribing to YouTube channel",unfollowingYtbChannel:"Unsubscribing to YouTube channel",likingYtbVideo:"Liking YouTube video",unlikingYtbVideo:"Unliking YouTube video",giveKeyNoticeBefore:"Each verification interval is 15s",giveKeyNoticeAfter:'If there is no key, please check at <a href="https://givekey.ru/profile" target="_blank">https://givekey.ru/profile</a>',noPoints:"Not enough points, skip the lottery",getNeedPointsFailed:"ailed to obtain the required points, skip the lottery",joiningLottery:"Joining the lottery",doingGleamTask:"Doing Gleam Task...",gettingGleamLink:"Getting Gleam task link...",gleamTaskNotice:"If this page has not been closed for a long time, please close it yourself after completing any task!",verifiedGleamTasks:"Attempted to verify all tasks. If the verification fails, please try to verify manually or complete it!",gsNotice:'In order to avoid getting the "0000-0000-0000" key, the "Grab Key" button has been hidden, please close the script when obtaining the key!',SweepWidgetNotice:"The task is being processed and verified. There is an interval of 1~3s for each verification task to prevent the triggering of too fast verification warning..."}},d=["zh","en"].includes(A.other.language)?A.other.language:"en";const E=function(t){for(var e,s=arguments.length,i=new Array(1<s?s-1:0),n=1;n<s;n++)i[n-1]=arguments[n];return null!==(e=c[d])&&void 0!==e&&e[t]?c[d][t].replace(/%([\d]+)/g,(t,e)=>i[parseInt(e,10)]):t};t=class{constructor(){var t,e,s;s=void 0,(e="tasks")in(t=this)?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s}getRealParams(e,s,i,n){try{let t=[];return 0<s.length&&(t=[...t,...s.map(t=>n(t)).filter(t=>t)]),!i&&0<this.tasks[e].length&&(t=[...t,...this.tasks[e]]),L(t)}catch(t){return _(t,"Social.getRealParams"),[]}}};function e(t,e){h(t,e),e.add(t)}function s(t,e,s){h(t,e),e.set(t,s)}function h(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function g(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function p(t,e,s){return function(t,e,s){if(e.set)e.set.call(t,s);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=s}}(t,v(t,e,"set"),s),s}function w(t,e,s){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return s}function f(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,v(t,e,"get"))}function v(t,e,s){if(!e.has(t))throw new TypeError("attempted to "+s+" private field on non-instance");return e.get(t)}const m={servers:[]};var k=new WeakMap,y=new WeakMap,b=new WeakMap,T=new WeakSet,S=new WeakSet,x=new WeakSet,G=new WeakSet,P=new WeakSet,W=new WeakSet;async function U(){try{const n=V({text:E("verifyingAuth","Discord")});var{result:t,statusText:e,status:s,data:i}=await I({url:"https://discord.com/api/v6/users/@me",method:"HEAD",headers:{authorization:f(this,k).auth}});return"Success"===t?200===(null==i?void 0:i.status)?(n.success(),!0):(n.error(`Error:${null==i?void 0:i.statusText}(${null==i?void 0:i.status})`),!1):(n.error(t+`:${e}(${s})`),!1)}catch(t){return _(t,"Discord.verifyAuth"),!1}}async function O(){try{const s=V({text:E("updatingAuth","Discord")});return await new Promise(e=>{const t=GM_openInTab("https://discord.com/channels/@me#auth",{active:!0,insert:!0,setParent:!0});t.onclose=async()=>{var t=null===(t=GM_getValue("discordAuth"))||void 0===t?void 0:t.auth;t?(p(this,k,{auth:t}),s.success(),e(await w(this,T,U).call(this))):(s.error("Error: Update discord auth failed!"),e(!1))}})}catch(t){return _(t,"Discord.updateAuth"),!1}}async function D(t){try{const l=V({type:"joiningDiscordServer",text:t});var e,s,{result:i,statusText:n,status:o,data:a}=await I({url:"https://discord.com/api/v6/invites/"+t,method:"POST",dataType:"json",headers:{authorization:f(this,k).auth}});if("Success"!==i||200!==(null==a?void 0:a.status))return l.error(i+`:${n}(${o})`),!1;l.success();var r=String(null===(e=a.response)||void 0===e||null===(s=e.guild)||void 0===s?void 0:s.id);return r&&(w(this,W,N).call(this,t,r),this.tasks.servers=L([...this.tasks.servers,t])),!0}catch(t){return _(t,"Discord.joinServer"),!1}}async function j(t){try{if(this.whiteList.servers.includes(t))return V({type:"whiteList",text:"Discord.leaveServer",id:t}),!0;var e=await w(this,P,F).call(this,t);if(!e)return!1;const a=V({type:"leavingDiscordServer",text:e});var{result:s,statusText:i,status:n,data:o}=await I({url:"https://discord.com/api/v6/users/@me/guilds/"+e,method:"DELETE",headers:{authorization:f(this,k).auth}});return"Success"===s&&204===(null==o?void 0:o.status)?(a.success(),!0):(a.error(s+`:${i}(${n})`),!1)}catch(t){return _(t,"Discord.leaveServer"),!1}}async function F(t){try{const n=V({type:"gettingDiscordGuild",text:t});var e=f(this,y)[t];if(e)return n.success(),e;const{result:o,statusText:a,status:r,data:l}=await I({url:"https://discord.com/invite/"+t,method:"GET"});if("Success"!==o||200!==(null===l||void 0===l?void 0:l.status))return n.error(o+`:${a}(${r})`),!1;var s,i=null===(s=l.responseText.match(/https?:\/\/cdn\.discordapp\.com\/icons\/([\d]+?)\//))||void 0===s?void 0:s[1];return i?(n.success(),w(this,W,N).call(this,t,i),i):(n.error(o+`:${a}(${r})`),!1)}catch(t){return _(t,"Discord.getGuild"),!1}}function N(t,e){try{f(this,y)[t]=e,GM_setValue("discordCache",f(this,y))}catch(t){_(t,"Discord.setCache")}}const M=class extends t{constructor(){var t;super(...arguments),e(this,W),e(this,P),e(this,G),e(this,x),e(this,S),e(this,T),g(this,"tasks",{...m}),g(this,"whiteList",(null===(t=GM_getValue("whiteList"))||void 0===t?void 0:t.discord)||{...m}),s(this,k,{writable:!0,value:GM_getValue("discordAuth")||{}}),s(this,y,{writable:!0,value:GM_getValue("discordCache")||{}}),s(this,b,{writable:!0,value:!1})}async init(){try{return f(this,b)?!0:f(this,k).auth?await w(this,T,U).call(this)?(V({}).success(E("initSuccess","Discord")),p(this,b,!0),!0):(GM_setValue("discordAuth",{auth:null}),await w(this,S,O).call(this)?(V({}).success(E("initSuccess","Discord")),p(this,b,!0),!0):(V({}).error(E("initFailed","Discord")),!1)):!!await w(this,S,O).call(this)&&(p(this,b,!0),!0)}catch(t){return _(t,"Discord.init"),!1}}async toggle(t){var{doTask:e=!0,serverLinks:t=[]}=t;try{if(!f(this,b))return V({text:E("needInit")}),!1;const i=[];if(e&&!A.doTask.discord.servers||!e&&!A.undoTask.discord.servers)V({type:"globalOptionsSkip",text:"discord.servers"});else{var s=this.getRealParams("servers",t,e,t=>{return null===(t=t.match(/invite\/(.+)/))||void 0===t?void 0:t[1]});if(0<s.length)for(const n of s)e?i.push(w(this,x,D).call(this,n)):i.push(w(this,G,j).call(this,n)),await C(1e3)}return await Promise.all(i).then(()=>!0)}catch(t){return _(t,"Discord.toggleServers"),!1}}};function R(t,e){K(t,e),e.add(t)}function Y(t,e,s){K(t,e),e.set(t,s)}function K(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function z(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function B(t,e,s){return function(t,e,s){if(e.set)e.set.call(t,s);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=s}}(t,J(t,e,"set"),s),s}function H(t,e,s){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return s}function q(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,J(t,e,"get"))}function J(t,e,s){if(!e.has(t))throw new TypeError("attempted to "+s+" private field on non-instance");return e.get(t)}const X={users:[]};var Q=new WeakMap,Z=new WeakMap,tt=new WeakMap,et=new WeakSet,st=new WeakSet,it=new WeakSet,nt=new WeakSet;async function ot(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"instagram";try{const l=V({type:"instagram"===t?"verifyingInsAuth":"gettingInsUserId",text:t});var e=q(this,Q)[t];if(e&&"instagram"!==t)return l.success(),e;const{result:u,statusText:c,status:d,data:h}=await I({url:`https://www.instagram.com/${t}/`,method:"GET"});if("Success"!==u)return!1;if(null!==h&&void 0!==h&&h.finalUrl.includes("accounts/login"))return l.error("Error:"+E("loginIns"),!0),!1;if(null!==h&&void 0!==h&&h.finalUrl.includes("www.instagram.com/challenge"))return l.error("Error:"+E("insBanned")),!1;if(200!==(null===h||void 0===h?void 0:h.status))return l.error(u+`:${c}(${d})`),!1;var s,i,n,o=null===(s=h.responseText.match(/"csrf_token":"(.+?)"/))||void 0===s?void 0:s[1],a=null===(i=h.responseText.match(/"rollout_hash":"(.+?)"/))||void 0===i?void 0:i[1];if("instagram"===t)return!(!o||!a)&&(B(this,Z,{csrftoken:o,hash:a}),!0);var r=null===(n=h.responseText.match(/"profilePage_([\d]+?)"/))||void 0===n?void 0:n[1];return r?(H(this,nt,lt).call(this,t,r),l.success(),r):(l.error("Error: Get ins data error!"),!1)}catch(t){return _(t,"Instagram.getUserInfo"),!1}}async function at(t){try{var e=await H(this,et,ot).call(this,t);if(!e)return!1;const l=V({type:"followingIns",text:t});var s,i,{result:n,statusText:o,status:a,data:r}=await I({url:`https://www.instagram.com/web/friendships/${e}/follow/`,method:"POST",dataType:"json",headers:{"x-csrftoken":q(this,Z).csrftoken,origin:"https://www.instagram.com",referer:`https://www.instagram.com/${t}/`,"content-type":"application/x-www-form-urlencoded","sec-fetch-site":"same-origin","x-instagram-ajax":q(this,Z).hash}});return"Success"===n?200===(null==r?void 0:r.status)&&"following"===(null===(s=r.response)||void 0===s?void 0:s.result)?(l.success(),this.tasks.users=L([...this.tasks.users,t]),!0):(l.error("Error:"+((null==r||null===(i=r.response)||void 0===i?void 0:i.feedback_message)||`${null==r?void 0:r.statusText}(${null==r?void 0:r.status})`)),!1):(l.error(n+`:${o}(${a})`),!1)}catch(t){return _(t,"Instagram.followUser"),!1}}async function rt(t){try{if(this.whiteList.users.includes(t))return V({type:"whiteList",text:"Instagram.unfollowUser",id:t}),!0;var e=await H(this,et,ot).call(this,t);if(!e)return!1;const r=V({type:"unfollowingIns",text:t});var s,{result:i,statusText:n,status:o,data:a}=await I({url:`https://www.instagram.com/web/friendships/${e}/unfollow/`,method:"POST",dataType:"json",headers:{"x-csrftoken":q(this,Z).csrftoken,origin:"https://www.instagram.com",referer:`https://www.instagram.com/${t}/`,"content-type":"application/x-www-form-urlencoded","sec-fetch-site":"same-origin","x-instagram-ajax":q(this,Z).hash}});return"Success"===i?200===(null==a?void 0:a.status)&&"ok"===(null===(s=a.response)||void 0===s?void 0:s.status)?(r.success(),!0):(r.error(`Error:${null==a?void 0:a.statusText}(${null==a?void 0:a.status})`),!1):(r.error(i+`:${n}(${o})`),!1)}catch(t){return _(t,"Instagram.unfollowUser"),!1}}function lt(t,e){try{q(this,Q)[t]=e,GM_setValue("instagramCache",q(this,Q))}catch(t){_(t,"Instagram.setCache")}}const ut=class extends t{constructor(){var t;super(...arguments),R(this,nt),R(this,it),R(this,st),R(this,et),z(this,"tasks",{...X}),z(this,"whiteList",(null===(t=GM_getValue("whiteList"))||void 0===t?void 0:t.instagram)||{...X}),Y(this,Q,{writable:!0,value:GM_getValue("instagramCache")||{}}),Y(this,Z,{writable:!0,value:{}}),Y(this,tt,{writable:!0,value:!1})}async init(){try{return q(this,tt)?!0:await H(this,et,ot).call(this)?(V({}).success(E("initSuccess","Instagram")),B(this,tt,!0),!0):(V({}).error(E("initFailed","Instagram")),!1)}catch(t){return _(t,"Instagram.init"),!1}}async toggle(t){var{doTask:e=!0,userLinks:t=[]}=t;try{if(!q(this,tt))return V({text:E("needInit")}),!1;const i=[];if(e&&!A.doTask.instagram.users||!e&&!A.undoTask.instagram.users)V({type:"globalOptionsSkip",text:"instagram.users"});else{var s=this.getRealParams("users",t,e,t=>{return null===(t=t.match(/https:\/\/www\.instagram\.com\/(.+)?\//))||void 0===t?void 0:t[1]});if(0<s.length)for(const n of s)e?i.push(H(this,st,at).call(this,n)):i.push(H(this,it,rt).call(this,n)),await C(1e3)}return await Promise.all(i).then(()=>!0)}catch(t){return _(t,"Instagram.toggleUsers"),!1}}};function ct(t,e){ht(t,e),e.add(t)}function dt(t,e,s){ht(t,e),e.set(t,s)}function ht(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function gt(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function pt(t,e,s){return function(t,e,s){if(e.set)e.set.call(t,s);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=s}}(t,vt(t,e,"set"),s),s}function wt(t,e,s){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return s}function ft(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,vt(t,e,"get"))}function vt(t,e,s){if(!e.has(t))throw new TypeError("attempted to "+s+" private field on non-instance");return e.get(t)}const mt={reddits:[]};var kt=new WeakMap,yt=new WeakMap,bt=new WeakSet,Tt=new WeakSet;async function St(){try{const s=V({text:E("changingRedditVersion")});return GM_setValue("redditAuth",null),await new Promise(t=>{const e=GM_openInTab("https://www.reddit.com/#auth",{active:!0,insert:!0,setParent:!0});e.onclose=async()=>{s.success(),t(await wt(this,Tt,xt).call(this,!0))}})}catch(t){return _(t,"Reddit.useBeta"),!1}}async function xt(){var t,e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];try{const i=V({text:E("updatingAuth","Reddit")}),{result:n,statusText:o,status:a,data:r}=await I({url:"https://www.reddit.com/",method:"GET",nochche:!0,headers:{"Cache-Control":"no-cache"}});if("Success"!==n)return i.error(n+`:${o}(${a})`),!1;if(null!==r&&void 0!==r&&r.responseText.includes("www.reddit.com/login/"))return i.error("Error:"+E("loginReddit"),!0),!1;if(200!==(null===r||void 0===r?void 0:r.status))return i.error(`Error:${null===r||void 0===r?void 0:r.statusText}(${null===r||void 0===r?void 0:r.status})`),!1;if(r.responseText.includes("redesign-beta-optin-btn")&&!e)return await wt(this,bt,St).call(this);var s=null===(t=r.responseText.match(/"accessToken":"(.*?)","expires":"(.*?)"/))||void 0===t?void 0:t[1];return s?(pt(this,kt,{token:s}),i.success(),!0):(i.error('Error: Parameter "accessToken" not found!'),!1)}catch(t){return _(t,"Reddit.updateAuth"),!1}}const $t=class extends t{constructor(){var t;super(...arguments),ct(this,Tt),ct(this,bt),gt(this,"tasks",{...mt}),gt(this,"whiteList",(null===(t=GM_getValue("whiteList"))||void 0===t?void 0:t.reddit)||{...mt}),dt(this,kt,{writable:!0,value:void 0}),dt(this,yt,{writable:!0,value:!1})}async init(){try{return ft(this,yt)?!0:await wt(this,Tt,xt).call(this)?(V({}).success(E("initSuccess","Reddit")),pt(this,yt,!0),!0):(V({}).error(E("initFailed","Reddit")),!1)}catch(t){return _(t,"Reddit.init"),!1}}async toggleTask(e){var{name:s,doTask:e=!0}=e;try{if(!e&&this.whiteList.reddits.includes(s))return V({type:"whiteList",text:"Reddit.undoTask",id:s}),!0;let t=e?"joiningReddit":"leavingReddit";/^u_/.test(s)&&(t=e?"followingRedditUser":"unfollowingRedditUser");const r=V({type:t,text:s});var{result:i,statusText:n,status:o,data:a}=await I({url:"https://oauth.reddit.com/api/subscribe?redditWebClient=desktop2x&app=desktop2x-client-production&raw_json=1&gilding_detail=1",method:"POST",headers:{authorization:"Bearer "+ft(this,kt).token,"content-type":"application/x-www-form-urlencoded"},data:$.param({action:e?"sub":"unsub",sr_name:s,api_type:"json"})});return"Success"===i?200===(null==a?void 0:a.status)?(r.success(),e&&(this.tasks.reddits=L([...this.tasks.reddits,s])),!0):(r.error(`Error:${null==a?void 0:a.statusText}(${null==a?void 0:a.status})`),!1):(r.error(i+`:${n}(${o})`),!1)}catch(t){return _(t,"Reddit.toggleTask"),!1}}async toggle(t){var{doTask:e=!0,redditLinks:t=[]}=t;try{if(!ft(this,yt))return V({text:E("needInit")}),!1;const i=[];if(e&&!A.doTask.reddit.reddits||!e&&!A.undoTask.reddit.reddits)V({type:"globalOptionsSkip",text:"reddit.reddits"});else{var s=this.getRealParams("reddits",t,e,t=>{var e=null===(e=t.match(/https?:\/\/www\.reddit\.com\/r\/([^/]*)/))||void 0===e?void 0:e[1],t=null===(t=t.match(/https?:\/\/www\.reddit\.com\/user\/([^/]*)/))||void 0===t?void 0:t[1];return t?e||t:e});if(0<s.length)for(const n of s)i.push(this.toggleTask({name:n,doTask:e})),await C(1e3)}return await Promise.all(i).then(()=>!0)}catch(t){return _(t,"Reddit.toggle"),!1}}};function It(t,e){Gt(t,e),e.add(t)}function Lt(t,e,s){Gt(t,e),e.set(t,s)}function Gt(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _t(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function Ct(t,e,s){return function(t,e,s){if(e.set)e.set.call(t,s);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=s}}(t,Et(t,e,"set"),s),s}function Vt(t,e,s){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return s}function At(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Et(t,e,"get"))}function Et(t,e,s){if(!e.has(t))throw new TypeError("attempted to "+s+" private field on non-instance");return e.get(t)}const Pt={channels:[]};var Wt=new WeakMap,Ut=new WeakMap,Ot=new WeakMap,Dt=new WeakSet,jt=new WeakSet,Ft=new WeakSet,Nt=new WeakSet,Mt=new WeakSet;async function Rt(){try{const r=V({text:E("verifyingAuth","Twitch")});var t,e,s,{result:i,statusText:n,status:o,data:a}=await I({url:"https://gql.twitch.tv/gql",method:"POST",dataType:"json",headers:{Authorization:"OAuth "+At(this,Wt).authToken,"Client-Id":At(this,Wt).clientId},data:'[{"operationName":"FrontPageNew_User","variables":{"limit":1},"extensions":{"persistedQuery":{"version":1,"sha256Hash":"64bd07a2cbaca80699d62636d966cf6395a5d14a1f0a14282067dcb28b13eb11"}}}]'});return"Success"===i?200===(null==a?void 0:a.status)&&null!==(t=a.response)&&void 0!==t&&null!==(e=t[0])&&void 0!==e&&null!==(s=e.data)&&void 0!==s&&s.currentUser?(r.success(),!0):(r.error(`Error:${null==a?void 0:a.statusText}(${null==a?void 0:a.status})`),!1):(r.error(i+`:${n}(${o})`),!1)}catch(t){return _(t,"Twitch.verifyAuth"),!1}}async function Yt(){try{const s=V({text:E("updatingAuth","Twitch")});return await new Promise(e=>{const t=GM_openInTab("https://www.twitch.tv/#auth",{active:!0,insert:!0,setParent:!0});t.onclose=async()=>{var t=GM_getValue("twitchAuth");t?(Ct(this,Wt,t),s.success(),e(await Vt(this,Dt,Rt).call(this))):(s.error("Error: Update twitch auth failed!"),e(!1))}})}catch(t){return _(t,"Twitch.updateAuth"),!1}}async function Kt(t){var{name:e,doTask:t=!0}=t;try{if(!t&&this.whiteList.channels.includes(e))return V({type:"whiteList",text:"Twitch.unfollowChannel",id:e}),!0;var s=await Vt(this,Nt,zt).call(this,e);if(!s)return!1;const u=V({type:`${t?"":"un"}followingTwitchChannel`,text:e});var i='[{"operationName":"FollowButton_FollowUser","variables":{"input":{"disableNotifications":false,"targetID":"'+s+'"}},"extensions":{"persistedQuery":{"version":1,"sha256Hash":"3efee1acda90efdff9fef6e6b4a29213be3ee490781c5b54469717b6131ffdfe"}}}]',n=`[{"operationName":"FollowButton_UnfollowUser","variables":{"input":{"targetID":"${s}"}},`+'"extensions":{"persistedQuery":{"version":1,"sha256Hash":"d7fbdb4e9780dcdc0cc1618ec783309471cd05a59584fc3c56ea1c52bb632d41"}}}]',{result:o,statusText:a,status:r,data:l}=await I({url:"https://gql.twitch.tv/gql",method:"POST",dataType:"json",headers:{Authorization:"OAuth "+At(this,Wt).authToken},data:t?i:n});return"Success"===o?200===(null==l?void 0:l.status)?(u.success(),t&&(this.tasks.channels=L([...this.tasks.channels,e])),!0):(u.error(`Error:${null==l?void 0:l.statusText}(${null==l?void 0:l.status})`),!1):(u.error(o+`:${a}(${r})`),!1)}catch(t){return _(t,"Twitch.toggleChannel"),!1}}async function zt(t){try{const d=V({type:"gettingTwitchChannelId",text:t});var e=At(this,Ut)[t];if(e)return d.success(),e;var{result:s,statusText:i,status:n,data:o}=await I({url:"https://gql.twitch.tv/gql",method:"POST",headers:{Authorization:"OAuth "+At(this,Wt).authToken,"Client-Id":At(this,Wt).clientId},responseType:"json",data:`[{"operationName":"ActiveWatchParty","variables":{"channelLogin":"${t}"},`+'"extensions":{"persistedQuery":{"version":1,"sha256Hash":"4a8156c97b19e3a36e081cf6d6ddb5dbf9f9b02ae60e4d2ff26ed70aebc80a30"}}}]'});if("Success"!==s)return d.error(s+`:${i}(${n})`),!1;if(200!==(null==o?void 0:o.status))return d.error(`Error:${null==o?void 0:o.statusText}(${null==o?void 0:o.status})`),!1;var a,r,l,u,c=String(null===(a=o.response)||void 0===a||null===(r=a[0])||void 0===r||null===(l=r.data)||void 0===l||null===(u=l.user)||void 0===u?void 0:u.id);return c?(Vt(this,Mt,Bt).call(this,t,c),d.success(),c):(d.error(`Error:${o.statusText}(${o.status})`),!1)}catch(t){return _(t,"Twitch.getChannelId"),!1}}function Bt(t,e){try{At(this,Ut)[t]=e,GM_setValue("twitchCache",At(this,Ut))}catch(t){_(t,"Twitch.setCache")}}const Ht=class extends t{constructor(){var t;super(...arguments),It(this,Mt),It(this,Nt),It(this,Ft),It(this,jt),It(this,Dt),_t(this,"tasks",{...Pt}),_t(this,"whiteList",(null===(t=GM_getValue("whiteList"))||void 0===t?void 0:t.twitch)||{...Pt}),Lt(this,Wt,{writable:!0,value:GM_getValue("twitchAuth")||{}}),Lt(this,Ut,{writable:!0,value:GM_getValue("twitchCache")||{}}),Lt(this,Ot,{writable:!0,value:!1})}async init(){try{return At(this,Ot)?!0:At(this,Wt).authToken?await Vt(this,Dt,Rt).call(this)?(V({}).success(E("initSuccess","Twitch")),Ct(this,Ot,!0),!0):(GM_setValue("twitchAuth",null),await Vt(this,jt,Yt).call(this)?(V({}).success(E("initSuccess","Twitch")),Ct(this,Ot,!0),!0):(V({}).error(E("initFailed","Twitch")),!1)):!!await Vt(this,jt,Yt).call(this)&&(Ct(this,Ot,!0),!0)}catch(t){return _(t,"Twitch.init"),!1}}async toggle(t){var{doTask:e=!0,channelLinks:t=[]}=t;try{if(!At(this,Ot))return V({text:E("needInit")}),!1;const i=[];if(e&&!A.doTask.twitch.channels||!e&&!A.undoTask.twitch.channels)V({type:"globalOptionsSkip",text:"twitch.channels"});else{var s=this.getRealParams("channels",t,e,t=>{return null===(t=t.match(/https:\/\/(www\.)?twitch\.tv\/(.+)/))||void 0===t?void 0:t[2]});if(0<s.length)for(const n of s)i.push(Vt(this,Ft,Kt).call(this,{name:n,doTask:e})),await C(1e3)}return Promise.all(i).then(()=>!0)}catch(t){return _(t,"Twitch.toggle"),!1}}};function qt(t,e){Xt(t,e),e.add(t)}function Jt(t,e,s){Xt(t,e),e.set(t,s)}function Xt(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Qt(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function Zt(t,e,s){return function(t,e,s){if(e.set)e.set.call(t,s);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=s}}(t,se(t,e,"set"),s),s}function te(t,e,s){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return s}function ee(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,se(t,e,"get"))}function se(t,e,s){if(!e.has(t))throw new TypeError("attempted to "+s+" private field on non-instance");return e.get(t)}const ie={names:[]};var ne=new WeakMap,oe=new WeakMap,ae=new WeakMap,re=new WeakSet,le=new WeakSet,ue=new WeakSet,ce=new WeakSet,de=new WeakSet,he=new WeakSet,ge=new WeakSet,pe=new WeakSet;async function we(){try{const e=V({text:E("verifyAuth","Vk")}),{result:s,statusText:i,status:n,data:o}=await I({url:"https://vk.com/im",method:"GET"});var t;return"Success"===s?null!==o&&void 0!==o&&o.finalUrl.includes("vk.com/login")?(e.error("Error:"+E("loginVk"),!0),!1):200===(null===o||void 0===o?void 0:o.status)?(Zt(this,ne,(null===(t=o.responseText.match(/TopNavBtn__profileLink" href="\/(.*?)"/))||void 0===t?void 0:t[1])||""),e.success(),!0):(e.error(`Error:${null===o||void 0===o?void 0:o.statusText}(${null===o||void 0===o?void 0:o.status})`),!1):(e.error(s+`:${i}(${n})`),!1)}catch(t){return _(t,"Vk.verifyAuth"),!1}}async function fe(t,e){var s=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];try{const r=V({type:s?"joiningVkGroup":"leavingVkGroup",text:t});if("enter"===e.groupAct&&!s||"leave"===e.groupAct&&s)return r.success(),!0;const l={act:s?"enter":"leave",al:1,gid:e.groupId,hash:e.groupHash};s&&(l.context="_");var{result:i,statusText:n,status:o,data:a}=await I({url:"https://vk.com/al_groups.php",method:"POST",headers:{origin:"https://vk.com",referer:"https://vk.com/"+t,"content-type":"application/x-www-form-urlencoded"},data:$.param(l)});return"Success"===i?200===(null==a?void 0:a.status)?(r.success(),s&&(this.tasks.names=L([...this.tasks.names,t])),!0):(r.error(`Error:${null==a?void 0:a.statusText}(${null==a?void 0:a.status})`),!1):(r.error(i+`:${n}(${o})`),!1)}catch(t){return _(t,"Vk.toggleGroup"),!1}}async function ve(t,e){var s=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];try{const r=V({type:s?"joiningVkPublic":"leavingVkPublic",text:t});if(e.publicJoined&&s||!e.publicJoined&&!s)return r.success(),!0;var{result:i,statusText:n,status:o,data:a}=await I({url:"https://vk.com/al_public.php",method:"POST",headers:{origin:"https://vk.com",referer:"https://vk.com/"+t,"content-type":"application/x-www-form-urlencoded"},data:$.param({act:s?"a_enter":"a_leave",al:1,pid:e.publicPid,hash:e.publicHash})});return"Success"===i?200===(null==a?void 0:a.status)?(r.success(),s&&(this.tasks.names=L([...this.tasks.names,t])),!0):(r.error(`Error:${null==a?void 0:a.statusText}(${null==a?void 0:a.status})`),!1):(r.error(i+`:${n}(${o})`),!1)}catch(t){return _(t,"Vk.togglePublic"),!1}}async function me(t){try{const y=V({type:"sendingVkWall",text:t}),{result:b,statusText:T,status:S,data:x}=await I({url:"https://vk.com/like.php",method:"POST",headers:{origin:"https://vk.com",referer:"https://vk.com/"+t,"content-type":"application/x-www-form-urlencoded"},data:$.param({act:"publish_box",al:1,object:t})});if("Success"!==b)return y.error(b+`:${T}(${S})`),!1;if(200!==(null===x||void 0===x?void 0:x.status))return y.error(`Error:${null===x||void 0===x?void 0:x.statusText}(${null===x||void 0===x?void 0:x.status})`),!1;var e,s=null===(e=x.responseText.match(/shHash:[\s]*'(.*?)'/))||void 0===e?void 0:e[1];if(s){var{result:i,statusText:n,status:o,data:a}=await I({url:"https://vk.com/like.php",method:"POST",headers:{origin:"https://vk.com",referer:"https://vk.com/"+t,"content-type":"application/x-www-form-urlencoded"},data:$.param({Message:"",act:"a_do_publish",al:1,close_comments:0,friends_only:0,from:"box",hash:s,list:"",mark_as_ads:0,mute_notifications:0,object:t,ret_data:1,to:0})});if("Success"!==i)return y.error(i+`:${n}(${o})`),!1;if(200===(null==a?void 0:a.status)){var r,l,u,c,d,h,g,p,w,f,v=JSON.parse((null===(r=a.responseText)||void 0===r?void 0:r.replace("\x3c!--",""))||"{}");if(!0===(null==v||null===(l=v.payload)||void 0===l||null===(u=l[1])||void 0===u||null===(c=u[1])||void 0===c?void 0:c.share_my)){y.success();var m=String(null==v||null===(d=v.payload)||void 0===d||null===(h=d[1])||void 0===h||null===(g=h[1])||void 0===g?void 0:g.post_id),k=String(null==v||null===(p=v.payload)||void 0===p||null===(w=p[1])||void 0===w||null===(f=w[1])||void 0===f?void 0:f.owner_id);return m&&k&&te(this,pe,Te).call(this,t,k+"_"+m),this.tasks.names=L([...this.tasks.names,t]),!0}}return y.error(`Error:${null==a?void 0:a.statusText}(${null==a?void 0:a.status})`),!1}return y.error('Error: Get "hash" failed'),!1}catch(t){return _(t,"Vk.sendWall"),!1}}async function ke(t,e){try{const c=V({type:"deletingVkWall",text:t});var{result:s,statusText:i,status:n,data:o}=await I({url:"https://vk.com/al_wall.php?act=delete",method:"POST",headers:{origin:"https://vk.com",referer:`https://vk.com/${ee(this,ne)}?w=wall${ee(this,oe)[t]}%2Fall`,"content-type":"application/x-www-form-urlencoded"},data:$.param({act:"delete",al:1,confirm:0,from:"wkview",hash:e.wallHash,post:ee(this,oe)[t]})});if("Success"!==s)return c.error(s+`:${i}(${n})`),!1;if(200!==(null==o?void 0:o.status))return c.error(`Error:${null==o?void 0:o.statusText}(${null==o?void 0:o.status})`),!1;var a,r,l,u=JSON.parse((null===(a=o.responseText)||void 0===a?void 0:a.replace("\x3c!--",""))||"{}");return null!=u&&null!==(r=u.payload)&&void 0!==r&&null!==(l=r[1])&&void 0!==l&&l[1]?(c.success(),!0):(c.error(`Error:${null==o?void 0:o.statusText}(${null==o?void 0:o.status})`),!1)}catch(t){return _(t,"Vk.deleteWall"),!1}}async function ye(e,s){try{let t="https://vk.com/"+e;if(/^wall-/.test(e)){if(s)return{type:"sendWall"};if(!ee(this,oe)[e])return{type:"unSupport"};t=`https://vk.com/${ee(this,ne)}?w=wall`+ee(this,oe)[e]}const g=V({type:"gettingVkId",text:e}),{result:p,statusText:w,status:f,data:v}=await I({url:t,method:"GET"});if("Success"!==p)return g.error(p+`:${w}(${f})`),!1;if(200!==(null===v||void 0===v?void 0:v.status))return g.error(`Error:${null===v||void 0===v?void 0:v.statusText}(${null===v||void 0===v?void 0:v.status})`),!1;var i,n,[,o,a,r]=v.responseText.match(/Groups.(enter|leave)\(.*?,.*?([\d]+?), '(.*?)'/)||[],l=null===(i=v.responseText.match(/"enterHash":"(.*?)"/))||void 0===i?void 0:i[1],u=null===(n=v.responseText.match(/"public_id":([\d]+?),/))||void 0===n?void 0:n[1],c=!v.responseText.includes("Public.subscribe");if(o&&a&&r)return g.success(),{groupAct:o,groupId:a,groupHash:r,type:"group"};if(l&&u)return g.success(),{publicHash:l,publicPid:u,publicJoined:c,type:"public"};if(v.responseText.includes("wall.deletePost")&&!s){var d,h=null===(d=v.responseText.match(/wall\.deletePost\(this, '.*?', '(.*?)'\)/))||void 0===d?void 0:d[1];if(h)return g.success(),{type:"deleteWall",wallHash:h}}else if(e.includes("wall")&&s)return g.success(),{type:"sendWall"};return g.error("Error: Parameters not found!"),!1}catch(t){return _(t,"Vk.getId"),!1}}async function be(t){let{name:e,doTask:s=!0}=t;try{if(!s&&this.whiteList.names.includes(e))return V({type:"whiteList",text:"Vk.undoTask",id:e}),!0;var i=e.replace(/\/$/,""),n=await te(this,he,ye).call(this,i,s);if(!n)return!1;switch(n.type){case"group":return await te(this,le,fe).call(this,i,n,s);case"public":return await te(this,ue,ve).call(this,i,n,s);case"sendWall":return!s||await te(this,ce,me).call(this,i);case"deleteWall":return!!s||await te(this,de,ke).call(this,i,n);default:return!1}}catch(t){return _(t,"Vk.toggleVk"),!1}}function Te(t,e){try{ee(this,oe)[t]=e,GM_setValue("vkCache",ee(this,oe))}catch(t){_(t,"Vk.setCache")}}const Se=class extends t{constructor(){var t;super(...arguments),qt(this,pe),qt(this,ge),qt(this,he),qt(this,de),qt(this,ce),qt(this,ue),qt(this,le),qt(this,re),Qt(this,"tasks",{...ie}),Qt(this,"whiteList",(null===(t=GM_getValue("whiteList"))||void 0===t?void 0:t.vk)||{...ie}),Jt(this,ne,{writable:!0,value:""}),Jt(this,oe,{writable:!0,value:GM_getValue("vkCache")||{}}),Jt(this,ae,{writable:!0,value:!1})}async init(){try{return ee(this,ae)?!0:await te(this,re,we).call(this)?(V({}).success(E("initSuccess","Vk")),Zt(this,ae,!0),!0):(V({}).error(E("initFailed","Vk")),!1)}catch(t){return _(t,"Vk.init"),!1}}async toggle(t){var{doTask:e=!0,nameLinks:t=[]}=t;try{if(!ee(this,ae))return V({text:E("needInit")}),!1;const i=[];if(e&&!A.doTask.vk.names||!e&&!A.undoTask.vk.names)V({type:"globalOptionsSkip",text:"vk.names"});else{var s=this.getRealParams("names",t,e,t=>{return null===(t=t.match(/https:\/\/vk\.com\/([^/]+)/))||void 0===t?void 0:t[1]});if(0<s.length)for(const n of s)i.push(te(this,ge,be).call(this,{name:n,doTask:e})),await C(1e3)}return Promise.all(i).then(()=>!0)}catch(t){return _(t,"Vk.toggle"),!1}}};function xe(t,e){Ie(t,e),e.add(t)}function $e(t,e,s){Ie(t,e),e.set(t,s)}function Ie(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Le(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function Ge(t,e,s){return function(t,e,s){if(e.set)e.set.call(t,s);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=s}}(t,Ve(t,e,"set"),s),s}function _e(t,e,s){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return s}function Ce(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,Ve(t,e,"get"))}function Ve(t,e,s){if(!e.has(t))throw new TypeError("attempted to "+s+" private field on non-instance");return e.get(t)}const Ae={channels:[],likes:[]},Ee=async function(t,e){try{const h=V({text:E("gettingYtbToken")}),{result:g,statusText:p,status:w,data:f}=await I({url:t,method:"GET"});if("Success"!==g)return h.error(g+`:${p}(${w})`),{};if(200!==(null===f||void 0===f?void 0:f.status))return h.error(`Error:${null===f||void 0===f?void 0:f.statusText}(${null===f||void 0===f?void 0:f.status})`),{};{var s,i;if(f.responseText.includes("accounts.google.com/ServiceLogin?service=youtube"))return h.error("Error:"+E("loginYtb"),!0),{needLogin:!0};var n=null===(s=f.responseText.match(/"INNERTUBE_API_KEY":"(.*?)"/))||void 0===s?void 0:s[1],o=(null===(i=f.responseText.match(/\(\{"INNERTUBE_CONTEXT":([\w\W]*?)\}\)/)||f.responseText.match(/"INNERTUBE_CONTEXT":([\w\W]*?\}),"INNERTUBE/))||void 0===i?void 0:i[1])||"{}";const{client:v,request:m}=JSON.parse(o);if(n&&v&&m){if(v.hl="en","channel"===e){var a,r=null===(a=f.responseText.match(/<meta itemprop="channelId" content="(.+?)">/))||void 0===a?void 0:a[1];return r?(h.success(),{params:{apiKey:n,client:v,request:m,channelId:r}}):(h.error('Error: Get "channelId" failed!'),{})}if("likeVideo"!==e)return h.error("Error: Unknown type"),{};var l,u,c=null===(l=f.responseText.match(/<link rel="shortlinkUrl" href="https:\/\/youtu\.be\/(.*?)">/))||void 0===l?void 0:l[1],d=null===(u=f.responseText.match(/"likeParams":"(.*?)"/))||void 0===u?void 0:u[1];return c?(h.success(),{params:{apiKey:n,client:v,request:m,videoId:c,likeParams:d}}):(h.error('Error: Get "videoId" failed!'),{})}return h.error('Error: Parameter "apiKey" not found!'),{}}}catch(t){return _(t,"Youtube.getInfo"),{}}};var Pe=new WeakMap,We=new WeakMap,Ue=new WeakMap,Oe=new WeakSet,De=new WeakSet,je=new WeakSet,Fe=new WeakSet,Ne=new WeakSet;class Me extends t{constructor(){var t;super(...arguments),xe(this,Ne),xe(this,Fe),xe(this,je),xe(this,De),xe(this,Oe),Le(this,"tasks",{...Ae}),Le(this,"whiteList",(null===(t=GM_getValue("whiteList"))||void 0===t?void 0:t.youtube)||{...Ae}),$e(this,Pe,{writable:!0,value:GM_getValue("youtubeAuth")||{}}),$e(this,We,{writable:!0,value:!1}),$e(this,Ue,{writable:!0,value:"https://www.youtube.com/channel/"+A.other.youtubeVerifyChannel})}async init(){try{return Ce(this,We)?!0:Ce(this,Pe).PAPISID?await _e(this,Oe,Re).call(this)?(V({}).success(E("initSuccess","Youtube")),Ge(this,We,!0),!0):(GM_setValue("youtubeAuth",null),await _e(this,De,Ye).call(this)?(V({}).success(E("initSuccess","Youtube")),Ge(this,We,!0),!0):(V({}).error(E("initFailed","Youtube")),!1)):!!await _e(this,De,Ye).call(this)&&(Ge(this,We,!0),!0)}catch(t){return _(t,"Youtube.init"),!1}}async toggle(t){var{doTask:e=!0,channelLinks:s=[],videoLinks:t=[]}=t;try{if(!Ce(this,We))return V({text:E("needInit")}),!1;const o=[];if(e&&!A.doTask.youtube.channels||!e&&!A.undoTask.youtube.channels)V({type:"globalOptionsSkip",text:"youtube.channels"});else{var i=this.getRealParams("channels",s,e,t=>{var e;return/^https:\/\/(www\.)?google\.com.*?\/url\?.*?url=https:\/\/www\.youtube\.com\/.*/.test(t)?null===(e=t.match(/url=(https:\/\/www\.youtube\.com\/.*)/))||void 0===e?void 0:e[1]:t});if(0<i.length)for(const a of i)o.push(_e(this,Fe,ze).call(this,{link:a,doTask:e})),await C(1e3)}if(e&&!A.doTask.youtube.likes||!e&&!A.undoTask.youtube.likes)V({type:"globalOptionsSkip",text:"youtube.likes"});else{var n=this.getRealParams("likes",t,e,t=>{var e;return/^https:\/\/(www\.)?google\.com.*?\/url\?.*?url=https:\/\/www\.youtube\.com\/.*/.test(t)?null===(e=t.match(/url=(https:\/\/www\.youtube\.com\/.*)/))||void 0===e?void 0:e[1]:t});if(0<n.length)for(const r of n)o.push(_e(this,Ne,Be).call(this,{link:r,doTask:e})),await C(1e3)}return Promise.all(o).then(()=>!0)}catch(t){return _(t,"Youtube.toggle"),!1}}}async function Re(){try{return await _e(this,Fe,ze).call(this,{link:Ce(this,Ue),doTask:!0,verify:!0})}catch(t){return _(t,"Youtube.verifyAuth"),!1}}async function Ye(){try{const s=V({text:E("updatingAuth","Youtube")});return await new Promise(e=>{const t=GM_openInTab("https://www.youtube.com/#auth",{active:!0,insert:!0,setParent:!0});t.onclose=async()=>{var t=GM_getValue("youtubeAuth");t?(Ge(this,Pe,t),s.success(),_e(this,Oe,Re).call(this).then(t=>{e(t)})):(s.error("Error: Update youtube auth failed!"),e(!1))}})}catch(t){return _(t,"Discord.updateAuth"),!1}}function Ke(t,e){return Ee(t,e)}async function ze(t){var{link:e,doTask:s=!0,verify:t=!1}=t;try{var{params:i,needLogin:n}=await _e(this,je,Ke).call(this,e,"channel"),{apiKey:o,client:a,request:r,channelId:l}=i||{};if(n)return V({html:E("loginYtb")}),!1;if(!(o&&a&&r&&l))return V({text:'"getYtbToken" failed'}),!1;if(!s&&!t&&this.whiteList.channels.includes(l))return V({type:"whiteList",text:"Youtube.unfollowChannel",id:l}),!0;const c=t?V({text:E("verifyingAuth","Youtube")}):V({type:s?"followingYtbChannel":"unfollowingYtbChannel",text:l});var u=parseInt(String((new Date).getTime()/1e3),10);const{result:d,statusText:h,status:g,data:p}=await I({url:`https://www.youtube.com/youtubei/v1/subscription/${s?"":"un"}subscribe?key=`+o,method:"POST",headers:{origin:"https://www.youtube.com",referer:"https://www.youtube.com/channel/"+l,"content-type":"application/json","x-goog-authuser":"0","x-goog-visitor-id":null==a?void 0:a.visitorData,"x-origin":"https://www.youtube.com",authorization:`SAPISIDHASH ${u}_`+sha1(`${u} ${Ce(this,Pe).PAPISID} https://www.youtube.com`)},data:JSON.stringify({context:{client:a,request:{sessionId:null==r?void 0:r.sessionId,internalExperimentFlags:[],consistencyTokenJars:[]},user:{}},channelIds:[l],params:s?"EgIIAhgA":"CgIIAhgA"})});return"Success"===d?200===(null===p||void 0===p?void 0:p.status)?s&&(/"subscribed": true/.test(p.responseText)||p.responseText.includes("The subscription already exists"))||!s&&/"subscribed": false/.test(p.responseText)?(c.success(),s&&!t&&(this.tasks.channels=L([...this.tasks.channels,e])),!0):t&&p.responseText.includes("You may not subscribe to yourself")?(c.success(),!0):(c.error(E("tryUpdateYtbAuth"),!0),!1):(c.error(`Error:${null===p||void 0===p?void 0:p.statusText}(${null===p||void 0===p?void 0:p.status})`),!1):(c.error(d+`:${h}(${g})`),!1)}catch(t){return _(t,"Youtube.toggleChannel"),!1}}async function Be(t){var{link:e,doTask:t=!0}=t;try{var{params:s,needLogin:i}=await _e(this,je,Ke).call(this,e,"likeVideo"),{apiKey:n,client:o,request:a,videoId:r,likeParams:l}=s||{};if(i)return V({html:""+E("loginYtb")}),!1;if(!(n&&o&&a&&r&&l))return V({text:'"getYtbToken" failed'}),!1;if(!t&&this.whiteList.likes.includes(r))return V({type:"whiteList",text:"Youtube.unlikeVideo",id:r}),!0;const c=V({type:t?"likingYtbVideo":"unlikingYtbVideo",text:r});var u=parseInt(String((new Date).getTime()/1e3),10);const d={context:{client:o,request:{sessionId:a.sessionId,internalExperimentFlags:[],consistencyTokenJars:[]},user:{}},target:{videoId:r}};if(t){if(!l)return c.error("Empty likeParams"),!1;d.params=l}const{result:h,statusText:g,status:p,data:w}=await I({url:`https://www.youtube.com/youtubei/v1/like/${t?"":"remove"}like?key=`+n,method:"POST",headers:{origin:"https://www.youtube.com",referer:"https://www.youtube.com/watch?v="+r,"content-type":"application/json","x-goog-authuser":"0","x-goog-visitor-id":o.visitorData,"x-origin":"https://www.youtube.com",authorization:`SAPISIDHASH ${u}_`+sha1(`${u} ${Ce(this,Pe).PAPISID} https://www.youtube.com`)},data:JSON.stringify(d)});return"Success"===h?200===(null===w||void 0===w?void 0:w.status)?t&&w.responseText.includes("Added to Liked videos")||!t&&(w.responseText.includes("Removed from Liked videos")||w.responseText.includes("Dislike removed"))?(c.success(),t&&(this.tasks.likes=L([...this.tasks.likes,e])),!0):(c.error(E("tryUpdateYtbAuth"),!0),!1):(c.error(`Error:${null===w||void 0===w?void 0:w.statusText}(${null===w||void 0===w?void 0:w.status})`),!1):(c.error(h+`:${g}(${p})`),!1)}catch(t){return _(t,"Youtube.toggleLikeVideo"),!1}}function He(t,e){Je(t,e),e.add(t)}function qe(t,e,s){Je(t,e),e.set(t,s)}function Je(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Xe(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function Qe(t,e,s){return function(t,e,s){if(e.set)e.set.call(t,s);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=s}}(t,es(t,e,"set"),s),s}function Ze(t,e,s){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return s}function ts(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,es(t,e,"get"))}function es(t,e,s){if(!e.has(t))throw new TypeError("attempted to "+s+" private field on non-instance");return e.get(t)}const ss={groups:[],wishlists:[],follows:[],forums:[],workshops:[],workshopVotes:[],curators:[],curatorLikes:[],announcements:[]};var is=new WeakMap,ns=new WeakMap,os=new WeakMap,as=new WeakMap,rs=new WeakSet,ls=new WeakSet,us=new WeakSet,cs=new WeakSet,ds=new WeakSet,hs=new WeakSet,gs=new WeakSet,ps=new WeakSet,ws=new WeakSet,fs=new WeakSet,vs=new WeakSet,ms=new WeakSet,ks=new WeakSet,ys=new WeakSet,bs=new WeakSet,Ts=new WeakSet,Ss=new WeakSet,xs=new WeakSet,$s=new WeakSet,Is=new WeakSet,Ls=new WeakSet;async function Gs(){try{const s=V({text:E("updatingAuth",E("steamStore"))}),{result:i,statusText:n,status:o,data:a}=await I({url:"https://store.steampowered.com/stats/",method:"GET"});if("Success"!==i)return s.error(i+`:${n}(${o})`),!1;if(200!==(null===a||void 0===a?void 0:a.status))return s.error(`Error:${null===a||void 0===a?void 0:a.statusText}(${null===a||void 0===a?void 0:a.status})`),!1;var t;if(a.responseText.includes('href="https://store.steampowered.com/login/'))return s.error("Error:"+E("needLoginSteamStore"),!0),!1;var e=null===(t=a.responseText.match(/g_sessionID = "(.+?)";/))||void 0===t?void 0:t[1];return e?(ts(this,ns).storeSessionID=e,s.success(),!0):(s.error('Error: Get "sessionID" failed'),!1)}catch(t){return _(t,"Steam.updateStoreAuth"),!1}}async function _s(){try{const a=V({text:E("updatingAuth",E("steamCommunity"))}),{result:r,statusText:l,status:u,data:c}=await I({url:"https://steamcommunity.com/my",method:"GET"});if("Success"!==r)return a.error(r+`:${l}(${u})`),!1;if(200!==(null===c||void 0===c?void 0:c.status))return a.error(`Error:${null===c||void 0===c?void 0:c.statusText}(${null===c||void 0===c?void 0:c.status})`),!1;var t,e,s;if(c.responseText.includes('href="https://steamcommunity.com/login/home/'))return a.error("Error:"+E("needLoginSteamCommunity"),!0),!1;var i=null===(t=c.responseText.match(/g_steamID = "(.+?)";/))||void 0===t?void 0:t[1],n=null===(e=c.responseText.match(/g_sessionID = "(.+?)";/))||void 0===e?void 0:e[1],o=null===(s=c.responseText.match(/steamcommunity.com\/id\/(.+?)\/friends\//))||void 0===s?void 0:s[1];return(i&&(ts(this,ns).steam64Id=i),o&&(ts(this,ns).userName=o),n)?(ts(this,ns).communitySessionID=n,a.success(),!0):(a.error('Error: Get "sessionID" failed'),!1)}catch(t){return _(t,"Steam.updateCommunityAuth"),!1}}async function Cs(){try{const i=V({text:E("gettingAreaInfo")}),{result:n,statusText:o,status:a,data:r}=await I({url:"https://store.steampowered.com/cart/",method:"GET"});if("Success"!==n)return i.error(n+`:${o}(${a})`),{};if(200!==(null===r||void 0===r?void 0:r.status))return i.error(`Error:${null===r||void 0===r?void 0:r.statusText}(${null===r||void 0===r?void 0:r.status})`),{};var t,e=null===(t=r.responseText.match(/<input id="usercountrycurrency".*?value="(.+?)"/))||void 0===t?void 0:t[1],s=[...r.responseText.matchAll(/<div class="currency_change_option .*?" data-country="(.+?)" >/g)].map(t=>t[1]);return e&&0<s.length?(Qe(this,as,e),i.success(),{currentArea:e,areas:s}):(i.error("Error: get country info filed"),{})}catch(t){return _(t,"Steam.getAreaInfo"),{}}}async function Vs(e){try{let t=e;if(!t){const{currentArea:u,areas:c}=await Ze(this,us,Cs).call(this);if(!u||!c)return!1;if("CN"!==u)return V({text:"notNeededChangeArea"}),"skip";var s=c.filter(t=>t&&"CN"!==t);if(!s||0===s.length)return V({text:"noAnotherArea"}),!1;[t]=s}const l=V({text:E("changingArea",t)});var{result:i,statusText:n,status:o,data:a}=await I({url:"https://store.steampowered.com/account/setcountry",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param({cc:t,sessionid:ts(this,ns).storeSessionID})});if("Success"!==i)return l.error(i+`:${n}(${o})`),"CN";if(200!==(null==a?void 0:a.status)||"true"!==a.responseText)return l.error(`Error:${null==a?void 0:a.statusText}(${null==a?void 0:a.status})`),"CN";var r=(await Ze(this,us,Cs).call(this))["currentArea"];return r===t?(l.success(),r):(l.error("Error: change country filed"),"CN")}catch(t){return _(t,"Steam.changeArea"),!1}}async function As(t){try{const e=V({type:"joiningSteamGroup",text:t}),{result:s,statusText:i,status:n,data:o}=await I({url:"https://steamcommunity.com/groups/"+t,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param({action:"join",sessionID:ts(this,ns).communitySessionID})});return"Success"===s?200!==(null===o||void 0===o?void 0:o.status)||o.responseText.includes("grouppage_join_area")?(e.error(`Error:${null===o||void 0===o?void 0:o.statusText}(${null===o||void 0===o?void 0:o.status})`),!1):(e.success(),this.tasks.groups=L([...this.tasks.groups,t]),!0):(e.error(s+`:${i}(${n})`),!1)}catch(t){return _(t,"Steam.joinGroup"),!1}}async function Es(t){try{if(this.whiteList.groups.includes(t))return V({type:"whiteList",text:"Steam.leaveGroup",id:t}),!0;var e=await Ze(this,gs,Ps).call(this,t);if(!e)return!1;const s=V({type:"leavingSteamGroup",text:t}),{result:i,statusText:n,status:o,data:a}=await I({url:`https://steamcommunity.com/id/${ts(this,ns).userName}/home_process`,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param({sessionID:ts(this,ns).communitySessionID,action:"leaveGroup",groupId:e})});return"Success"===i?200===(null===a||void 0===a?void 0:a.status)&&a.finalUrl.includes("groups")&&0===$(a.responseText.replace(/<img.*?>/g,"").toLowerCase()).find(`a[href='https://steamcommunity.com/groups/${t.toLowerCase()}']`).length?(s.success(),!0):(s.error(`Error:${null===a||void 0===a?void 0:a.statusText}(${null===a||void 0===a?void 0:a.status})`),!1):(s.error(i+`:${n}(${o})`),!1)}catch(t){return _(t,"Steam.leaveGroup"),!1}}async function Ps(t){try{const n=V({type:"gettingSteamGroupId",text:t});var e=ts(this,is).group[t];if(e)return n.success(),e;const{result:o,statusText:a,status:r,data:l}=await I({url:"https://steamcommunity.com/groups/"+t,method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}});if("Success"!==o)return n.error(o+`:${a}(${r})`),!1;if(200!==(null===l||void 0===l?void 0:l.status))return n.error(`Error:${null===l||void 0===l?void 0:l.statusText}(${null===l||void 0===l?void 0:l.status})`),!1;var s,i=null===(s=l.responseText.match(/OpenGroupChat\( '([0-9]+)'/))||void 0===s?void 0:s[1];return i?(Ze(this,Ls,Hs).call(this,"group",t,i),n.success(),i):(n.error(`Error:${l.statusText}(${l.status})`),!1)}catch(t){return _(t,"Steam.getGroupID"),!1}}async function Ws(t){try{var e;const n=V({type:"addingToWishlist",text:t});var{result:s,data:i}=await I({url:"https://store.steampowered.com/api/addtowishlist",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param({sessionid:ts(this,ns).storeSessionID,appid:t}),dataType:"json"});if("Success"===s&&200===(null==i?void 0:i.status)&&!0===(null===(e=i.response)||void 0===e?void 0:e.success))return n.success(),this.tasks.wishlists=L([...this.tasks.wishlists,t]),!0;const{result:o,statusText:a,status:r,data:l}=await I({url:"https://store.steampowered.com/app/"+t,method:"GET"});return"Success"===o?200===(null===l||void 0===l?void 0:l.status)?"CN"===ts(this,as)&&l.responseText.includes('id="error_box"')?(n.warning(E("changeAreaNotice")),!!await Ze(this,cs,Vs).call(this)&&await Ze(this,ps,Ws).call(this,t)):(!l.responseText.includes('class="queue_actions_ctn"')||!l.responseText.includes('class="already_in_library"'))&&(l.responseText.includes('class="queue_actions_ctn"')&&l.responseText.includes('id="add_to_wishlist_area_success" style="display: none;')||!l.responseText.includes('class="queue_actions_ctn"'))?(n.error(`Error:${l.statusText}(${l.status})`),!1):(n.success(),this.tasks.wishlists=L([...this.tasks.wishlists,t]),!0):(n.error(`Error:${null===l||void 0===l?void 0:l.statusText}(${null===l||void 0===l?void 0:l.status})`),!1):(n.error(o+`:${a}(${r})`),!1)}catch(t){return _(t,"Steam.addToWishlist"),!1}}async function Us(t){try{var e;if(this.whiteList.wishlists.includes(t))return V({type:"whiteList",text:"Steam.removeFromWishlist",id:t}),!0;const o=V({type:"removingFromWishlist",text:t});var{result:s,data:i}=await I({url:"https://store.steampowered.com/api/removefromwishlist",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param({sessionid:ts(this,ns).storeSessionID,appid:t}),dataType:"json"});if("Success"===s&&200===(null==i?void 0:i.status)&&!0===(null===(e=i.response)||void 0===e?void 0:e.success))return o.success(),!0;const{result:a,statusText:r,status:l,data:u}=await I({url:"https://store.steampowered.com/app/"+t,method:"GET"});if("Success"!==a)return o.error(a+`:${r}(${l})`),!1;if(200!==(null===u||void 0===u?void 0:u.status))return o.error(`Error:${null===u||void 0===u?void 0:u.statusText}(${null===u||void 0===u?void 0:u.status})`),!1;if("CN"===ts(this,as)&&u.responseText.includes('id="error_box"')){o.warning(E("changeAreaNotice"));var n=await Ze(this,cs,Vs).call(this);return n&&"CN"!==n&&"skip"!==n?await Ze(this,ws,Us).call(this,t):!1}return u.responseText.includes('class="queue_actions_ctn"')&&(u.responseText.includes("ds_owned_flag ds_flag")||u.responseText.includes("add_to_wishlist_area"))?(o.success(),!0):(o.error(`Error:${u.statusText}(${u.status})`),!1)}catch(t){return _(t,"Steam.removeFromWishlist"),!1}}async function Os(t,e){try{if(!e&&this.whiteList.follows.includes(t))return V({type:"whiteList",text:"Steam.unfollowGame",id:t}),!0;const o=V({type:`${e?"":"un"}followingGame`,text:t}),a={sessionid:ts(this,ns).storeSessionID,appid:t};e||(a.unfollow="1");var{result:s,data:i}=await I({url:"https://store.steampowered.com/explore/followgame/",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param(a)});if("Success"===s&&200===(null==i?void 0:i.status)&&"true"===i.responseText)return o.success(),!0;var n=await Ze(this,vs,Ds).call(this,t);return"CN"===ts(this,as)&&"areaLocked"===n?(o.warning(E("changeAreaNotice")),!!await Ze(this,cs,Vs).call(this)&&await Ze(this,ws,Us).call(this,t)):e===n?(o.success(),e&&(this.tasks.follows=L([...this.tasks.follows,t])),!0):(o.error(`Error:${null==i?void 0:i.statusText}(${null==i?void 0:i.status})`),!1)}catch(t){return _(t,"Steam.toggleFollowGame"),!1}}async function Ds(t){try{const{result:e,data:s}=await I({url:"https://store.steampowered.com/app/"+t,method:"GET"});return"Success"===e?200===(null===s||void 0===s?void 0:s.status)&&("CN"===ts(this,as)&&s.responseText.includes('id="error_box"')?"areaLocked":"none"!==$(s.responseText.replace(/<img.*?>/g,"")).find(".queue_control_button.queue_btn_follow>.btnv6_blue_hoverfade.btn_medium.queue_btn_active").css("display")):!1}catch(t){return _(t,"Steam.isFollowedGame"),!1}}async function js(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];try{if(!e&&this.whiteList.forums.includes(t))return V({type:"whiteList",text:"Steam.unsubscribeForum",id:t}),!0;const c=await Ze(this,ks,Fs).call(this,t);if(!c)return!1;const d=V({type:`${e?"":"un"}subscribingForum`,text:t});var s,i,[n,o]=c.split("_"),{result:a,statusText:r,status:l,data:u}=await I({url:`https://steamcommunity.com/forum/${n}/General/${e?"":"un"}subscribe/${o||"0"}/`,method:"POST",responseType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param({sessionid:ts(this,ns).communitySessionID})});return"Success"===a?(200!==(null==u?void 0:u.status)||1!==(null===(s=u.response)||void 0===s?void 0:s.success)&&29!==(null===(i=u.response)||void 0===i?void 0:i.success)?d.error(`Error:${null==u?void 0:u.statusText}(${null==u?void 0:u.status})`):(e&&(this.tasks.forums=L([...this.tasks.forums,t])),d.success()),!0):(d.error(a+`:${r}(${l})`),!0)}catch(t){return _(t,"Steam.toggleForum"),!0}}async function Fs(t){try{const u=V({type:"gettingForumId",text:t});var e=ts(this,is).forum[t];if(e)return u.success(),e;var{result:s,statusText:i,status:n,data:o}=await I({url:`https://steamcommunity.com/app/${t}/discussions/`,method:"GET"});if("Success"!==s)return u.error(s+`:${i}(${n})`),!1;if(200!==(null==o?void 0:o.status))return u.error(`Error:${null==o?void 0:o.statusText}(${null==o?void 0:o.status})`),!1;var a,r,l=null===(a=o.responseText)||void 0===a||null===(r=a.match(/General_([\d]+(_[\d]+)?)/))||void 0===r?void 0:r[1];return l?(Ze(this,Ls,Hs).call(this,"forum",t,l),u.success(),l):(u.error(`Error:${o.statusText}(${o.status})`),!1)}catch(t){return _(t,"Steam.getForumId"),!1}}async function Ns(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];try{if(!e&&this.whiteList.workshops.includes(t))return V({type:"whiteList",text:"Steam.unfavoriteWorkshop",id:t}),!0;var s=await Ze(this,bs,Ms).call(this,t);if(!s)return!1;const r=V({type:e?"favoritingWorkshop":"unfavoritingWorkshop",text:t});var{result:i,statusText:n,status:o,data:a}=await I({url:`https://steamcommunity.com/sharedfiles/${e?"":"un"}favorite`,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param({id:t,appid:s,sessionid:ts(this,ns).communitySessionID})});return"Success"===i?200!==(null==a?void 0:a.status)||a.responseText?(r.error(`Error:${null==a?void 0:a.statusText}(${null==a?void 0:a.status})`),!1):(e&&(this.tasks.workshops=L([...this.tasks.workshops,t])),r.success(),!0):(r.error(i+`:${n}(${o})`),!1)}catch(t){return _(t,"Steam.toggleFavoriteWorkshop"),!1}}async function Ms(t){try{const n=V({type:"gettingWorkshopAppId",text:t});var e=ts(this,is).workshop[t];if(e)return n.success(),e;const{result:o,statusText:a,status:r,data:l}=await I({url:"https://steamcommunity.com/sharedfiles/filedetails/?id="+t,method:"GET"});if("Success"!==o)return n.error(o+`:${a}(${r})`),!1;if(200!==(null===l||void 0===l?void 0:l.status))return n.error(`Error:${null===l||void 0===l?void 0:l.statusText}(${null===l||void 0===l?void 0:l.status})`),!1;var s,i=null===(s=l.responseText.match(/<input type="hidden" name="appid" value="([\d]+?)" \/>/))||void 0===s?void 0:s[1];return i?(Ze(this,Ls,Hs).call(this,"workshop",t,i),n.success(),i):(n.error("Error: getWorkshopAppId failed"),!1)}catch(t){return _(t,"Steam.getWorkshopAppId"),!1}}async function Rs(t){try{const a=V({type:"votingUpWorkshop",text:t});var e,{result:s,statusText:i,status:n,data:o}=await I({url:"https://steamcommunity.com/sharedfiles/voteup",method:"POST",responseType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param({id:t,sessionid:ts(this,ns).communitySessionID})});return"Success"===s?(200===(null==o?void 0:o.status)&&1===(null===(e=o.response)||void 0===e?void 0:e.success)?a.success():a.error(`Error:${null==o?void 0:o.statusText}(${null==o?void 0:o.status})`),!0):(a.error(s+`:${i}(${n})`),!0)}catch(t){return _(t,"Steam.voteupWorkshop"),!0}}async function Ys(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];try{if(!e&&this.whiteList.curators.includes(t))return V({type:"whiteList",text:"Steam.unfollowCurator",id:t}),!0;const u=V({type:e?"followingCurator":"unfollowingCurator",text:t});var s,i,n,{result:o,statusText:a,status:r,data:l}=await I({url:"https://store.steampowered.com/curators/ajaxfollow",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:$.param({clanid:t,sessionid:ts(this,ns).storeSessionID,follow:e}),dataType:"json"});return"Success"===o?200===(null==l?void 0:l.status)&&1===(null===(s=l.response)||void 0===s||null===(i=s.success)||void 0===i?void 0:i.success)?(u.success(),!0):(u.error(`Error:${null==l?void 0:l.statusText}(`+(null==l||null===(n=l.response)||void 0===n?void 0:n.success)||`${null==l?void 0:l.status})`),!1):(u.error(o+`:${a}(${r})`),!1)}catch(t){return _(t,"Steam.toggleCurator"),!1}}async function Ks(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];try{var[s,i]=t.split("/");if(!s||!i)return V({text:E("errorLink",t)}),!1;var n=await this.getCuratorId(s,i);return n?await Ze(this,Ss,Ys).call(this,n,e):!1}catch(t){return _(t,"Steam.toggleCuratorLike"),!1}}async function zs(t,e){try{const l=V({type:"gettingAnnouncementParams",text:t,id:e}),{result:u,statusText:c,status:d,data:h}=await I({url:`https://store.steampowered.com/news/app/${t}/view/`+e,method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}});if("Success"!==u)return l.error(u+`:${c}(${d})`),{};if(200!==(null===h||void 0===h?void 0:h.status))return l.error(`Error:${null===h||void 0===h?void 0:h.statusText}(${null===h||void 0===h?void 0:h.status})`),{};var s,i,n,o=null===(s=h.responseText.match(/authwgtoken&quot;:&quot;(.*?)&quot;/))||void 0===s?void 0:s[1],a=null===(i=h.responseText.match(/clanAccountID&quot;:([\d]+?),/))||void 0===i?void 0:i[1],r=null===(n=h.responseText.match(/announcementGID&quot;:&quot;([\d]+?)&quot;/))||void 0===n?void 0:n[1];return o&&a?(l.success(),{authWgToken:o,clanId:a,gid:r}):(l.error(`Error:${h.statusText}(${h.status})`),{})}catch(t){return _(t,"Steam.likeAnnouncement"),{}}}async function Bs(t){try{var[e,s]=t.split("/");if(!e||!s)return V({type:"lost params",text:t}),!1;var{authWgToken:i,clanId:n,gid:o}=await Ze(this,$s,zs).call(this,e,s);if(!i||!n)return!1;const c=V({type:"likingAnnouncement",text:e,id:s});var{result:a,statusText:r,status:l,data:u}=await I({url:"https://store.steampowered.com/updated/ajaxrateupdate/"+(o||s),method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",Host:"store.steampowered.com",Origin:"https://store.steampowered.com",Referer:`https://store.steampowered.com/news/app/${e}/view/`+s},data:$.param({sessionid:ts(this,ns).storeSessionID,wgauthtoken:i,voteup:1,clanid:n,ajax:1}),dataType:"json"});return"Success"===a?200===(null==u?void 0:u.status)&&1===u.response.success?(c.success(),!0):(c.error(`Error:${null==u?void 0:u.statusText}(${null==u?void 0:u.status})`),!1):(c.error(a+`:${r}(${l})`),!1)}catch(t){return _(t,"Steam.likeAnnouncement"),!1}}function Hs(t,e,s){try{ts(this,is)[t][e]=s,GM_setValue("steamCache",ts(this,is))}catch(t){_(t,"Steam.setCache")}}const qs=class extends t{constructor(){var t;super(...arguments),He(this,Ls),He(this,Is),He(this,$s),He(this,xs),He(this,Ss),He(this,Ts),He(this,bs),He(this,ys),He(this,ks),He(this,ms),He(this,vs),He(this,fs),He(this,ws),He(this,ps),He(this,gs),He(this,hs),He(this,ds),He(this,cs),He(this,us),He(this,ls),He(this,rs),Xe(this,"tasks",{...ss}),Xe(this,"whiteList",(null===(t=GM_getValue("whiteList"))||void 0===t?void 0:t.steam)||{...ss}),qe(this,is,{writable:!0,value:GM_getValue("steamCache")||{group:{},forum:{},workshop:{},curator:{}}}),qe(this,ns,{writable:!0,value:{}}),qe(this,os,{writable:!0,value:!1}),qe(this,as,{writable:!0,value:"CN"})}async init(){try{return ts(this,os)?!0:await Ze(this,rs,Gs).call(this)&&await Ze(this,ls,_s).call(this)?(Qe(this,os,!0),V({}).success(E("initSuccess","Steam")),!0):(V({}).error(E("initFailed","Steam")),!1)}catch(t){return _(t,"Steam.init"),!1}}async getCuratorId(t,e){try{const o=V({type:"gettingCuratorId",text:t+"/"+e});var s=ts(this,is).curator[t+"/"+e];if(s)return o.success(),s;const{result:a,statusText:r,status:l,data:u}=await I({url:`https://store.steampowered.com/${t}/`+e,method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}});if("Success"!==a)return o.error(a+`:${r}(${l})`),!1;if(200!==(null===u||void 0===u?void 0:u.status))return o.error(`Error:${null===u||void 0===u?void 0:u.statusText}(${null===u||void 0===u?void 0:u.status})`),!1;var i,n=null===(i=u.responseText.match(/g_pagingData.*?"clanid":([\d]+)/))||void 0===i?void 0:i[1];return n?(Ze(this,Ls,Hs).call(this,"curator",t+"/"+e,n),o.success(),n):(o.error(`Error:${u.statusText}(${u.status})`),!1)}catch(t){return _(t,"Steam.getCuratorID"),!1}}async toggle(t){var{doTask:e=!0,groupLinks:s=[],wishlistLinks:i=[],followLinks:n=[],forumLinks:o=[],workshopLinks:a=[],workshopVoteLinks:r=[],curatorLinks:l=[],curatorLikeLinks:u=[],announcementLinks:t=[]}=t;try{if(!ts(this,os))return V({text:E("needInit")}),!1;const k=[];if(e&&!A.doTask.steam.groups||!e&&!A.undoTask.steam.groups)V({type:"globalOptionsSkip",text:"steam.groups"});else{var c=this.getRealParams("groups",s,e,t=>{return null===(t=t.match(/groups\/(.+)\/?/))||void 0===t?void 0:t[1]});if(0<c.length)for(const y of c)e?k.push(Ze(this,ds,As).call(this,y)):k.push(Ze(this,hs,Es).call(this,y)),await C(1e3)}if(e&&!A.doTask.steam.wishlists||!e&&!A.undoTask.steam.wishlists)V({type:"globalOptionsSkip",text:"steam.wishlists"});else{var d=this.getRealParams("wishlists",i,e,t=>{return null===(t=t.match(/app\/([\d]+)/))||void 0===t?void 0:t[1]});if(0<d.length)for(const b of d)e?k.push(Ze(this,ps,Ws).call(this,b)):k.push(Ze(this,ws,Us).call(this,b)),await C(1e3)}if(e&&!A.doTask.steam.follows||!e&&!A.undoTask.steam.follows)V({type:"globalOptionsSkip",text:"steam.follows"});else{var h=this.getRealParams("follows",n,e,t=>{return null===(t=t.match(/app\/([\d]+)/))||void 0===t?void 0:t[1]});if(0<h.length)for(const T of h)k.push(Ze(this,fs,Os).call(this,T,e)),await C(1e3)}if(e&&!A.doTask.steam.forums||!e&&!A.undoTask.steam.forums)V({type:"globalOptionsSkip",text:"steam.forums"});else{var g=this.getRealParams("forums",o,e,t=>{return null===(t=t.match(/app\/([\d]+)/))||void 0===t?void 0:t[1]});if(0<g.length)for(const S of g)k.push(Ze(this,ms,js).call(this,S,e)),await C(1e3)}if(e&&!A.doTask.steam.workshops||!e&&!A.undoTask.steam.workshops)V({type:"globalOptionsSkip",text:"steam.workshops"});else{var p=this.getRealParams("workshops",a,e,t=>{return null===(t=t.match(/\?id=([\d]+)/))||void 0===t?void 0:t[1]});if(0<p.length)for(const x of p)k.push(Ze(this,ys,Ns).call(this,x,e)),await C(1e3)}if(e&&!A.doTask.steam.workshopVotes)V({type:"globalOptionsSkip",text:"steam.workshopVotes"});else{var w=this.getRealParams("workshopVotes",r,e,t=>{return null===(t=t.match(/\?id=([\d]+)/))||void 0===t?void 0:t[1]});if(e&&0<w.length)for(const $ of w)k.push(Ze(this,Ts,Rs).call(this,$)),await C(1e3)}if(e&&!A.doTask.steam.curators||!e&&!A.undoTask.steam.curators)V({type:"globalOptionsSkip",text:"steam.curators"});else{var f=this.getRealParams("curators",l,e,t=>{return null===(t=t.match(/curator\/([\d]+)/))||void 0===t?void 0:t[1]}),v=this.getRealParams("curatorLikes",u,e,t=>{return null===(t=t.match(/https?:\/\/store\.steampowered\.com\/(.*?)\/([^/?]+)/))||void 0===t?void 0:t.slice(1,3).join("/")});if(0<f.length)for(const I of f)k.push(Ze(this,Ss,Ys).call(this,I,e)),await C(1e3);if(0<v.length)for(const L of v)k.push(Ze(this,xs,Ks).call(this,L,e)),await C(1e3)}if(e&&!A.doTask.steam.announcements)V({type:"globalOptionsSkip",text:"steam.announcements"});else{var m=this.getRealParams("announcements",t,e,t=>{var e;return t.includes("store.steampowered.com")?null===(e=t.match(/store\.steampowered\.com\/news\/app\/([\d]+)\/view\/([\d]+)/))||void 0===e?void 0:e.slice(1,3).join("/"):null===(t=t.match(/steamcommunity\.com\/games\/([\d]+)\/announcements\/detail\/([\d]+)/))||void 0===t?void 0:t.slice(1,3).join("/")});if(e&&0<m.length)for(const G of m)k.push(Ze(this,Is,Bs).call(this,G)),await C(1e3)}return Promise.all(k).then(async()=>("CN"!==ts(this,as)&&(V({}).warning(E("steamFinishNotice")),await Ze(this,cs,Vs).call(this,"CN")),!0))}catch(t){return _(t,"Steam.toggle"),!1}}};function Js(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function Xs(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function Qs(t,e,s){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return s}const Zs={steam:{groupLinks:[],wishlistLinks:[],curatorLinks:[],curatorLikeLinks:[],followLinks:[],forumLinks:[],announcementLinks:[],workshopVoteLinks:[]},discord:{serverLinks:[]},instagram:{userLinks:[]},vk:{nameLinks:[]},twitch:{channelLinks:[]},reddit:{redditLinks:[]},youtube:{channelLinks:[],likeLinks:[]}};var ti,ei=new WeakSet,si=new WeakSet,ii=new WeakSet,ni=new WeakSet,oi=new WeakSet,ai=new WeakSet,ri=new WeakSet,li=new WeakSet;async function ui(){try{const e=V({text:E("getTasksInfo")}),s=[];var t=$("#actions tr");$("div.bind-discord").is(":visible")&&$("div.bind-discord a")[0].click(),$("div.bind-twitch").is(":visible")&&$("div.bind-twitch a")[0].click();for(const r of t)s.push(new Promise(e=>{const t=$(r).find('td:not(".hidden")');var s=t.eq(1).find('a:not([data-trigger="link"])'),i=t.eq(2).find('a:not([data-trigger="link"])');const n=0<s.length?s:i,o=t.eq(0).find("i").attr("class")||"",a=n.text().trim();if(o.includes("ban")||/disable adblock/gi.test(a))return e(!0);l(n.attr("href")).then(t=>t?(o.includes("steam")&&/join/gi.test(a)?this.undoneTasks.steam.groupLinks.push(t):/like.*announcement/gi.test(a)?this.undoneTasks.steam.announcementLinks.push(t):/(follow|subscribe).*curator/gim.test(a)&&/^https?:\/\/store\.steampowered\.com\/curator\//.test(t)?this.undoneTasks.steam.curatorLinks.push(t):o.includes("steam")&&/follow|subscribe/gim.test(a)?this.undoneTasks.steam.curatorLikeLinks.push(t):/subscribe.*steam.*forum/gim.test(a)?this.undoneTasks.steam.forumLinks.push(t):o.includes("thumbs-up")&&/^https?:\/\/steamcommunity\.com\/sharedfiles\/filedetails\/\?id=[\d]+/.test(t)?this.undoneTasks.steam.workshopVoteLinks.push(t):o.includes("discord")||/join.*discord/gim.test(a)?this.undoneTasks.discord.serverLinks.push(t):o.includes("instagram")||/follow.*instagram/gim.test(a)?this.undoneTasks.instagram.userLinks.push(t):o.includes("twitch")||/follow.*twitch.*channel/gim.test(a)?this.undoneTasks.twitch.channelLinks.push(t):o.includes("reddit")||/subscribe.*subreddit/gim.test(a)||/follow.*reddit/gim.test(a)?this.undoneTasks.reddit.redditLinks.push(t):/watch.*art/gim.test(a)?this.undoneTasks.steam.workshopVoteLinks.push(t):/subscribe.*youtube.*channel/gim.test(a)?this.undoneTasks.youtube.channelLinks.push(t):/(watch|like).*youtube.*video/gim.test(a)||(o.includes("youtube")||o.includes("thumbs-up"))&&/(watch|like).*video/gim.test(a)?this.undoneTasks.youtube.likeLinks.push(t):o.includes("vk")||/join.*vk.*group/gim.test(a)?this.undoneTasks.vk.nameLinks.push(t):/(on twitter)|(Follow.*on.*Facebook)/gim.test(a)||(/wishlist.*game|add.*wishlist/gim.test(a)&&this.undoneTasks.steam.wishlistLinks.push(t),/follow.*button/gim.test(a)&&this.undoneTasks.steam.followLinks.push(t)),void e(!0)):e(!1)).catch(t=>(_(t,"Giveawaysu.classifyTask->getRedirectLink"),!1))}));return await Promise.all(s),e.success(),this.undoneTasks=Qs(this,ri,wi).call(this,this.undoneTasks),!0}catch(t){return _(t,"Giveawaysu.classifyTask"),!1}}function ci(){try{return A.other.checkLogin?(0<$("a.steam-login").length&&window.open("/steam/redirect","_self"),!0):!0}catch(t){return _(t,"Giveawaysu.checkLogin"),!1}}async function di(){try{return A.other.checkLeftKey?(0<$(".giveaway-ended").length&&await o().fire({icon:"warning",title:E("notice"),text:E("noKeysLeft"),confirmButtonText:E("confirm"),cancelButtonText:E("cancel"),showCancelButton:!0}).then(t=>{t=t.value;t&&window.close()}),!0):!0}catch(t){return _(t,"Giveawaysu.checkLeftKey"),!1}}function hi(){var t=null===(t=window.location.href.match(/\/view\/([\d]+)/))||void 0===t?void 0:t[1];return t?(this.giveawayId=t,!0):(V({text:E("getFailed","GiveawayId")}),!1)}async function gi(e,t){try{return{name:e,result:await t}}catch(t){return _(t,"GiveawaySu.bind"),{name:e,result:!1}}}async function pi(){try{const e=[];var t=this.undoneTasks;return t.discord&&0<Object.values(t.discord).reduce((t,e)=>[...t,...e]).length&&!this.socialInitialized.discord&&(this.social.discord=new M,e.push(Qs(this,oi,gi).call(this,"discord",this.social.discord.init()))),t.instagram&&0<Object.values(t.instagram).reduce((t,e)=>[...t,...e]).length&&!this.socialInitialized.instagram&&(this.social.instagram=new ut,e.push(Qs(this,oi,gi).call(this,"instagram",this.social.instagram.init()))),t.reddit&&0<Object.values(t.reddit).reduce((t,e)=>[...t,...e]).length&&!this.socialInitialized.reddit&&(this.social.reddit=new $t,e.push(Qs(this,oi,gi).call(this,"reddit",this.social.reddit.init()))),t.twitch&&0<Object.values(t.twitch).reduce((t,e)=>[...t,...e]).length&&!this.socialInitialized.twitch&&(this.social.twitch=new Ht,e.push(Qs(this,oi,gi).call(this,"twitch",this.social.twitch.init()))),t.vk&&0<Object.values(t.vk).reduce((t,e)=>[...t,...e]).length&&!this.socialInitialized.vk&&(this.social.vk=new Se,e.push(Qs(this,oi,gi).call(this,"vk",this.social.vk.init()))),t.youtube&&0<Object.values(t.youtube).reduce((t,e)=>[...t,...e]).length&&!this.socialInitialized.youtube&&(this.social.youtube=new Me,e.push(Qs(this,oi,gi).call(this,"youtube",this.social.youtube.init()))),t.steam&&0<Object.values(t.steam).reduce((t,e)=>[...t,...e]).length&&!this.socialInitialized.steam&&(this.social.steam=new qs,e.push(Qs(this,oi,gi).call(this,"steam",this.social.steam.init()))),await Promise.all(e).then(t=>{let e=!0;for(const s of t)s.result?this.socialInitialized[s.name]=s.result:e=!1;return e})}catch(t){return _(t,"GiveawaySu.initSocial"),!1}}function wi(t){const e={};for(var[s,i]of Object.entries(t)){e[s]={};for(var[n,o]of Object.entries(i))e[s][n]=L(o)}return e}async function fi(){try{if(!this.initialized&&!this.init())return!1;if(!await Qs(this,ei,ui).call(this))return!1;if(!await Qs(this,ai,pi).call(this))return!1;const e=[];var t=this.undoneTasks;return this.social.discord&&e.push(this.social.discord.toggle({doTask:!0,...t.discord})),this.social.instagram&&e.push(this.social.instagram.toggle({doTask:!0,...t.instagram})),this.social.reddit&&e.push(this.social.reddit.toggle({doTask:!0,...t.reddit})),this.social.twitch&&e.push(this.social.twitch.toggle({doTask:!0,...t.twitch})),this.social.vk&&e.push(this.social.vk.toggle({doTask:!0,...t.vk})),this.social.youtube&&e.push(this.social.youtube.toggle({doTask:!0,...t.youtube})),this.social.steam&&e.push(this.social.steam.toggle({doTask:!0,...t.steam})),await Promise.all(e),V({}).success(E("allTasksComplete")),!0}catch(t){return _(t,"GiveawaySu.toggleTask"),!1}}const vi=class{constructor(){Js(this,li),Js(this,ri),Js(this,ai),Js(this,oi),Js(this,ni),Js(this,ii),Js(this,si),Js(this,ei),Xs(this,"undoneTasks",Zs),Xs(this,"giveawayId",void 0),Xs(this,"socialInitialized",{discord:!1,instagram:!1,reddit:!1,twitch:!1,vk:!1,youtube:!1,steam:!1}),Xs(this,"initialized",!1),Xs(this,"social",{})}static test(){return/^https?:\/\/giveaway\.su\/giveaway\/view\/[\d]+/.test(window.location.href)}async after(){try{Qs(this,si,ci).call(this)||V({}).warning(E("checkLoginFailed")),await Qs(this,ii,di).call(this)||V({}).warning(E("checkLeftKeyFailed"))}catch(t){_(t,"Giveawaysu.after")}}init(){try{const t=V({text:E("initing")});return 0<$("a.steam-login").length?(window.open("/steam/redirect","_self"),t.warning(E("needLogin")),!1):!!Qs(this,ni,hi).call(this)&&(this.initialized=!0,t.success(),!0)}catch(t){return _(t,"Giveawaysu.init"),!1}}async doTask(){try{return $("#getKey").on("click",()=>{$('#auto-task-info-div,style:contains(".swal2-popup.swal2-toast")').remove(),$("#getKey").off()}),await Qs(this,li,fi).call(this)}catch(t){return _(t,"GiveawaySu.doTask"),!1}}async verifyTask(){try{var t;for(const e of $("#actions tr")){const s=$(e);if("adjs"!==s.attr("data-action-id")){const i=s.find("i.glyphicon-refresh"),n=i.parent();"A"!==n.prop("tagName")?i.hasClass("spin")||i.hasClass("glyphicon-ok")||(n[0].click(),await C(1e3)):(t=n.attr("href"),n.attr("href","javascript:void(0);").attr("target","_self")[0].click(),n.attr("href",t))}}}catch(t){_(t,"GiveawaySu.verifyTask")}}};"discord.com"===window.location.hostname&&(ti=null===(t=window.localStorage)||void 0===t||null===(ti=t.getItem("token"))||void 0===ti?void 0:ti.replace(/^"|"$/g,""),GM_setValue("discordAuth",{auth:ti}),ti&&"#auth"===window.location.hash&&(window.close(),o().fire("",E("closePageNotice"))));$(async()=>{var t,e,s;if("www.twitch.tv"===window.location.hostname&&"#auth"===window.location.hash&&(t=a.get("auth-token"),!!a.get("login")?(GM_setValue("twitchAuth",{authToken:t,clientId:null===(t=commonOptions)||void 0===t||null===(e=t.headers)||void 0===e?void 0:e["Client-ID"]}),window.close(),o().fire("",E("closePageNotice"))):o().fire("",E("needLogin"))),"twitter.com"===window.location.hostname&&"#auth"===window.location.hash&&(s=a.get("ct0"),!!a.get("twid")&&s?(GM_setValue("twitterAuth",{ct0:s}),window.close(),o().fire("",E("closePageNotice"))):o().fire("",E("needLogin"))),"www.youtube.com"===window.location.hostname&&"#auth"===window.location.hash&&((s=a.get("__Secure-3PAPISID"))?(GM_setValue("youtubeAuth",{PAPISID:s}),window.close(),o().fire("",E("closePageNotice"))):o().fire("",E("needLogin"))),"www.reddit.com"===window.location.hostname&&("#auth"===window.location.hash||"#auth"===GM_getValue("redditAuth"))){const i=$("#redesign-beta-optin-btn");if(0<i.length)return GM_setValue("redditAuth","#auth"),i[0].click();GM_setValue("redditAuth",null),window.close(),o().fire("",E("closePageNotice"))}if(vi.test()){const n=new vi;$("body").append(`<div id="auto-task-info-div" style="position: fixed;bottom: 10px;right: 10px;width: 300px;max-width: 60%;max-height: 600px;color: #000;background-color: #fff;padding-left: 5px;z-index: 999999999 !important;"><h2 style="text-align: center;"><button id="auto-do-task" class="btn btn-success">${E("doTask")}</button><button id="auto-verify-task" class="btn btn-success">${E("verifyTask")}</button></h2><div id="auto-task-info" style="overflow-y: auto;max-height: 500px;"></div></div>`),await n.after(),$("#auto-do-task").on("click",()=>{n.doTask()}),$("#auto-verify-task").on("click",()=>{n.verifyTask()}),console.log("%c%s","color:#1bbe1a","Auto TaskGS特供脚本初始化完成！")}})}()}();