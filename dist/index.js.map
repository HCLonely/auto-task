{"version":3,"sources":["webpack://auto-task-new/webpack/bootstrap","webpack://auto-task-new/webpack/runtime/make namespace object","webpack://auto-task-new/./src/scripts/tools/throwError.ts","webpack://auto-task-new/./src/scripts/tools/tools.ts","webpack://auto-task-new/./src/scripts/social/Social.ts","webpack://auto-task-new/./src/scripts/tools/httpRequest.ts","webpack://auto-task-new/./src/scripts/i18n/i18n.ts","webpack://auto-task-new/./src/scripts/echoLog.ts","webpack://auto-task-new/./src/scripts/social/Discord.ts","webpack://auto-task-new/./src/scripts/social/Instagram.ts","webpack://auto-task-new/./src/scripts/social/Reddit.ts","webpack://auto-task-new/./src/scripts/social/Twitch.ts","webpack://auto-task-new/./src/scripts/social/Twitter.ts","webpack://auto-task-new/./src/scripts/social/Vk.ts","webpack://auto-task-new/./src/scripts/social/Youtube.ts","webpack://auto-task-new/./src/index.ts"],"names":["__webpack_require__","r","Symbol","toStringTag","Object","defineProperty","exports","value","throwError","error","name","console","log","stack","__read","o","n","m","iterator","i","call","ar","e","next","done","push","__spreadArray","to","from","pack","arguments","length","l","Array","prototype","slice","concat","unique","array","Set","delay","time","Promise","resolve","setTimeout","Social","this","initialized","getRealParams","params","links","doTask","link2param","realParams","map","link","filter","tasks","__assign","assign","t","s","p","hasOwnProperty","apply","__awaiter","thisArg","_arguments","P","generator","adopt","reject","fulfilled","step","rejected","result","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","v","op","TypeError","pop","httpRequest","options","times","error_1","_a","dataType","responseType","requestObj","timeout","ontimeout","data","statusText","status","onabort","onerror","onload","GM_xmlhttpRequest","errorMsg","getI18n","argvs","_i","join","echoLog","_b","type","text","url","id","ele","$","includes","replace","addClass","append","scrollIntoView","font","find","status_1","success","html","_c","attr","warning","info","view","status_2","__extends","extendStatics","d","b","setPrototypeOf","__proto__","String","__","constructor","create","__values","Discord","_super","_this","GM_getValue","servers","whiteList","discord","cache","auth","init","isVerified","updateAuth","verifyAuth","GM_setValue","logStatus","error_2","method","headers","authorization","logStatus_1","error_3","newTab","GM_openInTab","active","insert","setParent","onclose","joinServer","inviteId","guild","error_4","_d","response","addId","leaveServer","status_3","error_5","getGuild","status_4","guild_1","error_6","responseText","match","toggleServers","serverLinks","prom","realServers","realServers_1","realServers_1_1","server","e_1_1","error_7","e_1","_e","_f","return","all","Instagram","users","instagram","getUserInfo","csrftoken","hash","finalUrl","followUser","origin","referer","feedback_message","unfollowUser","toggle","userLinks","realUsers","realUsers_1","realUsers_1_1","username","Reddit","reddits","reddit","updateToken","accessToken","nochche","token","toggleTask","test","param","action","sr_name","api_type","redditLinks","realReddits","realReddits_1","realReddits_1_1","name_1","userName","Twitch","channels","twitch","authToken","Authorization","clientId","currentUser","toggleChannel","channelId","followData","unfollowData","getChannelId","user","channelLinks","realChannels","realChannels_1","realChannels_1_1","channel","Twitter","verifyId","retweets","likes","twitter","ct0","toggleUser","verify","userId","_g","_h","_j","getUserId","include_profile_interstitial_type","include_blocking","include_blocked_by","include_followed_by","include_want_retweets","include_mute_edge","include_can_dm","include_can_media_tag","skip_status","errors","code","anonymous","JSON","parse","rest_id","toggleRetweet","retweetId","tweet_mode","retweetLinks","realRetweets","realRetweets_1","realRetweets_1_1","retweet","e_2_1","e_2","Vk","names","vk","toggleGroup","dataParam","reqData","groupAct","act","al","gid","groupId","groupHash","context","togglePublic","publicJoined","pid","publicPid","publicHash","sendWall","_k","_l","_m","_o","resultR","statusTextR","statusR","dataR","jsonData","postId","ownerId","_p","object","Message","close_comments","friends_only","list","mark_as_ads","mute_notifications","ret_data","payload","share_my","post_id","owner_id","deleteWall","dataParams","status_5","confirm","wallHash","post","getId","status_6","toggleVk","formatName","error_8","nameLinks","realNames","realNames_1","realNames_1_1","error_9","Youtube","youtube","getInfo","apiKey","client","request","videoId","likeParams","needLogin","hl","getToken","notice","PAPISID","Cookies","get","Swal","fire","title","icon","nowTime","parseInt","Date","getTime","visitorData","sha1","stringify","sessionId","internalExperimentFlags","consistencyTokenJars","channelIds","toggleLikeVideo","likeVideoData","target","videoLinks","realLikes","realLikes_1","realLikes_1_1","video","window","location","hostname","localStorage","getItem","close","isLogin","commonOptions","unsafeWindow"],"mappings":"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","file":"index.js","sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/*\r\n * @Author       : HCLonely\r\n * @Date         : 2021-10-13 14:08:18\r\n * @LastEditTime : 2021-10-13 14:11:51\r\n * @LastEditors  : HCLonely\r\n * @FilePath     : /auto-task-new/src/scripts/tools/throwError.ts\r\n * @Description  : 错误处理函数\r\n */\r\nexport default function throwError(error, name) {\r\n    console.log('%c%s', 'color:white;background:red', name + \"\\n\" + error.stack);\r\n}\r\n","var __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\n/*\r\n * @Author       : HCLonely\r\n * @Date         : 2021-10-26 14:58:11\r\n * @LastEditTime : 2021-10-30 12:22:52\r\n * @LastEditors  : HCLonely\r\n * @FilePath     : /auto-task-new/src/scripts/tools/tools.ts\r\n * @Description  :\r\n */\r\nimport throwError from './throwError';\r\nvar unique = function (array) {\r\n    try {\r\n        return __spreadArray([], __read(new Set(array)), false);\r\n    }\r\n    catch (error) {\r\n        throwError(error, 'unique');\r\n        return [];\r\n    }\r\n};\r\nvar delay = function (time) {\r\n    if (time === void 0) { time = 1000; }\r\n    return new Promise(function (resolve) {\r\n        setTimeout(function () { resolve(true); }, time);\r\n    });\r\n};\r\nexport { unique, delay };\r\n","/*\r\n * @Author       : HCLonely\r\n * @Date         : 2021-10-15 10:48:42\r\n * @LastEditTime : 2021-10-30 20:57:39\r\n * @LastEditors  : HCLonely\r\n * @FilePath     : /auto-task-new/src/scripts/social/Social.ts\r\n * @Description  :\r\n */\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nimport throwError from '../tools/throwError';\r\nimport { unique } from '../tools/tools';\r\nvar Social = /** @class */ (function () {\r\n    function Social() {\r\n        this.initialized = false;\r\n    }\r\n    // 通用\r\n    Social.prototype.getRealParams = function (name, params, links, doTask, link2param) {\r\n        try {\r\n            var realParams = [];\r\n            if (params.length > 0) {\r\n                realParams = __spreadArray([], __read(params), false);\r\n            }\r\n            if (links.length > 0) {\r\n                realParams = __spreadArray(__spreadArray([], __read(realParams), false), __read(links\r\n                    .map(function (link) { return link2param(link); })\r\n                    .filter(function (link) { return link; })), false);\r\n            }\r\n            if (!doTask && this.tasks[name].length > 0) {\r\n                realParams = __spreadArray(__spreadArray([], __read(realParams), false), __read(this.tasks[name]), false);\r\n            }\r\n            return unique(realParams);\r\n        }\r\n        catch (error) {\r\n            throwError(error, 'Social.getRealParams');\r\n            return [];\r\n        }\r\n    };\r\n    return Social;\r\n}());\r\nexport default Social;\r\n","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\n/*\r\n * @Author       : HCLonely\r\n * @Date         : 2021-10-13 13:55:36\r\n * @LastEditTime : 2021-10-30 10:28:39\r\n * @LastEditors  : HCLonely\r\n * @FilePath     : /auto-task-new/src/scripts/tools/httpRequest.ts\r\n * @Description  : http请求函数封装\r\n */\r\nimport throwError from './throwError';\r\nvar httpRequest = function (options, times) {\r\n    if (times === void 0) { times = 0; }\r\n    return __awaiter(void 0, void 0, void 0, function () {\r\n        var result, error_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    _a.trys.push([0, 4, , 5]);\r\n                    return [4 /*yield*/, new Promise(function (resolve) {\r\n                            if (options.dataType) {\r\n                                options.responseType = options.dataType;\r\n                            }\r\n                            var requestObj = __assign({\r\n                                timeout: 30000,\r\n                                ontimeout: function (data) {\r\n                                    resolve({ result: 'Error', statusText: 'Timeout', status: 601, data: data, options: options });\r\n                                },\r\n                                onabort: function (data) {\r\n                                    resolve({ result: 'Error', statusText: 'Aborted', status: 602, data: data, options: options });\r\n                                },\r\n                                onerror: function (data) {\r\n                                    resolve({ result: 'Error', statusText: 'Error', status: 603, data: data, options: options });\r\n                                },\r\n                                onload: function (data) {\r\n                                    resolve({ result: 'Success', statusText: 'Load', status: 600, data: data, options: options });\r\n                                }\r\n                            }, options);\r\n                            GM_xmlhttpRequest(requestObj); // eslint-disable-line new-cap\r\n                        })];\r\n                case 1:\r\n                    result = _a.sent();\r\n                    console.log('发送请求:', result);\r\n                    if (!(result.status !== 600 && times < 2)) return [3 /*break*/, 3];\r\n                    return [4 /*yield*/, httpRequest(options, times + 1)];\r\n                case 2: return [2 /*return*/, _a.sent()];\r\n                case 3: return [2 /*return*/, result];\r\n                case 4:\r\n                    error_1 = _a.sent();\r\n                    throwError(error_1, 'httpRequest');\r\n                    console.log('发送请求:', { errorMsg: error_1, options: options });\r\n                    return [2 /*return*/, { result: 'JsError', statusText: 'Error', status: 604, error: error_1, options: options }];\r\n                case 5: return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n};\r\nexport default httpRequest;\r\n","/*\r\n * @Author       : HCLonely\r\n * @Date         : 2021-10-26 15:18:09\r\n * @LastEditTime : 2021-10-26 15:20:04\r\n * @LastEditors  : HCLonely\r\n * @FilePath     : /auto-task-new/src/scripts/i18n/i18n.ts\r\n * @Description  : i18n\r\n ! 测试用\r\n */\r\nfunction getI18n() {\r\n    var argvs = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        argvs[_i] = arguments[_i];\r\n    }\r\n    return argvs.join(' ');\r\n}\r\nexport default getI18n;\r\n","/*\r\n * @Author       : HCLonely\r\n * @Date         : 2021-10-26 15:03:26\r\n * @LastEditTime : 2021-10-30 12:28:47\r\n * @LastEditors  : HCLonely\r\n * @FilePath     : /auto-task-new/src/scripts/echoLog.ts\r\n * @Description  :\r\n */\r\nimport throwError from './tools/throwError';\r\nimport getI18n from './i18n/i18n';\r\nvar echoLog = function (_a) {\r\n    var _b = _a.type, type = _b === void 0 ? 'text' : _b, text = _a.text, url = _a.url, id = _a.id;\r\n    try {\r\n        var ele = void 0;\r\n        switch (type) {\r\n            case 'updateSteamCommunity':\r\n                ele = $(\"<li>\" + getI18n('updateCommunityId') + \"<font></font></li>\");\r\n                break;\r\n            case 'updateSteamStore':\r\n                ele = $(\"<li>\" + getI18n('updateStoreId') + \"<font></font></li>\");\r\n                break;\r\n            case 'joinSteamGroup':\r\n            case 'leaveSteamGroup':\r\n            case 'getSteamGroupId':\r\n                ele = $(\"<li>\" + getI18n(type) + \"<a href=\\\"https://steamcommunity.com/groups/\" + text + \"\\\" target=\\\"_blank\\\">\" + text + \"</a>...<font></font></li>\");\r\n                break;\r\n            case 'subscribeForum':\r\n            case 'unsubscribeForum':\r\n            case 'getForumId':\r\n                ele = $(\"<li>\" + getI18n(type) + \"<a href=\\\"https://steamcommunity.com/app/\" + text + \"/discussions/\\\" target=\\\"_blank\\\">\" + text + \"</a>...<font></font></li>\");\r\n                break;\r\n            case 'followCurator':\r\n            case 'unfollowCurator':\r\n            case 'getCuratorId':\r\n                ele = $(\"<li>\" + getI18n(type) + \"<a href=\\\"https://store.steampowered.com/\" + ((text === null || text === void 0 ? void 0 : text.includes('/')) ? text : \"curator/\" + text) + \"\\\" target=\\\"_blank\\\">\" + text + \"</a>...<font></font></li>\");\r\n                break;\r\n            case 'getDeveloperId':\r\n            case 'followDeveloper':\r\n            case 'unfollowDeveloper':\r\n                ele = $(\"<li>\" + getI18n(type) + \"<a href=\\\"https://store.steampowered.com/developer/\" + text + \"\\\" target=\\\"_blank\\\">\" + text + \"</a>...<font></font></li>\");\r\n                break;\r\n            case 'getPublisherId':\r\n            case 'followPublisher':\r\n            case 'unfollowPublisher':\r\n                ele = $(\"<li>\" + getI18n(type) + \"<a href=\\\"https://store.steampowered.com/publisher/\" + text + \"\\\" target=\\\"_blank\\\">\" + text + \"</a>...<font></font></li>\");\r\n                break;\r\n            case 'getFranchiseId':\r\n            case 'followFranchise':\r\n            case 'unfollowFranchise':\r\n                ele = $(\"<li>\" + getI18n(type) + \"<a href=\\\"https://store.steampowered.com/franchise/\" + text + \"\\\" target=\\\"_blank\\\">\" + text + \"</a>...<font></font></li>\");\r\n                break;\r\n            case 'addWishlist':\r\n            case 'removeWishlist':\r\n            case 'followGame':\r\n            case 'unfollowGame':\r\n                ele = $(\"<li>\" + getI18n(type) + \"<a href=\\\"https://store.steampowered.com/app/\" + text + \"\\\" target=\\\"_blank\\\">\" + text + \"</a>...<font></font></li>\");\r\n                break;\r\n            case 'favoriteWorkshop':\r\n            case 'unfavoriteWorkshop':\r\n            case 'getWorkshopAppId':\r\n            case 'voteupWorkshop':\r\n                ele = $(\"<li>\" + getI18n(type) + \"<a href=\\\"https://steamcommunity.com/sharedfiles/filedetails/?id=\" + text + \"\\\" target=\\\"_blank\\\">\\n      \" + text + \"</a>...<font></font></li>\");\r\n                break;\r\n            case 'likeAnnouncements':\r\n                ele = $(\"<li>\" + getI18n('likeAnnouncements') + \"<a href=\\\"\" + url + \"\\\" target=\\\"_blank\\\">\" + id + \"</a>...<font></font></li>\");\r\n                break;\r\n            case 'changeCountry':\r\n                ele = $(\"<li>\" + getI18n('changeCountry') + text + \"...<font></font></li>\");\r\n                break;\r\n            case 'joinDiscordServer':\r\n            case 'leaveDiscordServer':\r\n            case 'getDiscordGuild':\r\n                ele = $(\"<li>\" + getI18n(type) + \"<a href=\\\"https://discord.com/invite/\" + text + \"\\\" target=\\\"_blank\\\">\" + text + \"</a>...<font></font></li>\");\r\n                break;\r\n            case 'updateDiscordAuth':\r\n                ele = $(\"<li style=\\\"color:red;\\\">\" + getI18n('updateDiscordAuth') + \"</li>\");\r\n                break;\r\n            case 'followTwitchChannel':\r\n            case 'unfollowTwitchChannel':\r\n            case 'getTwitchChannelId':\r\n                ele = $(\"<li>\" + getI18n(type) + \"<a href=\\\"https://www.twitch.tv/\" + text + \"\\\" target=\\\"_blank\\\">\" + text + \"</a>...<font></font></li>\");\r\n                break;\r\n            case 'getInsInfo':\r\n                ele = $(\"<li>\" + getI18n('getInsInfo') + \"<a href=\\\"https://www.instagram.com/\" + text + \"/\\\" target=\\\"_blank\\\">\" + text + \"</a>...<font></font></li>\");\r\n                break;\r\n            case 'followIns':\r\n            case 'unfollowIns':\r\n                ele = $(\"<li>\" + getI18n(type) + \"<a href=\\\"https://www.instagram.com/\" + text + \"/\\\" target=\\\"_blank\\\">\" + text + \"</a>...<font></font></li>\");\r\n                break;\r\n            case 'getTwitterUserId':\r\n            case 'followTwitterUser':\r\n            case 'unfollowTwitterUser':\r\n                ele = $(\"<li>\" + getI18n(type) + \"<a href=\\\"https://twitter.com/\" + text + \"\\\" target=\\\"_blank\\\">\" + text + \"</a>...<font></font></li>\");\r\n                break;\r\n            case 'retweet':\r\n            case 'unretweet':\r\n                ele = $(\"<li>\" + getI18n(type) + text + \"...<font></font></li>\");\r\n                break;\r\n            case 'joinReddit':\r\n            case 'leaveReddit':\r\n                ele = $(\"<li>\" + getI18n(type) + \"<a href=\\\"https://www.reddit.com/r/\" + text + \"/\\\" target=\\\"_blank\\\">\" + text + \"</a>...<font></font></li>\");\r\n                break;\r\n            case 'followRedditUser':\r\n            case 'unfollowRedditUser':\r\n                ele = $(\"<li>\" + getI18n(type) + \"<a href=\\\"https://www.reddit.com/user/\" + (text === null || text === void 0 ? void 0 : text.replace('u_', '')) + \"\\\" target=\\\"_blank\\\">\\n      \" + (text === null || text === void 0 ? void 0 : text.replace('u_', '')) + \"</a>...<font></font></li>\");\r\n                break;\r\n            case 'followYtbChannel':\r\n            case 'unfollowYtbChannel':\r\n                ele = $(\"<li>\" + getI18n(type) + \"<a href=\\\"https://www.youtube.com/channel/\" + text + \"\\\" target=\\\"_blank\\\">\" + text + \"</a>...<font></font></li>\");\r\n                break;\r\n            case 'likeYtbVideo':\r\n            case 'unlikeYtbVideo':\r\n                ele = $(\"<li>\" + getI18n(type) + \"<a href=\\\"https://www.youtube.com/watch?v=\" + text + \"\\\" target=\\\"_blank\\\">\" + text + \"</a>...<font></font></li>\");\r\n                break;\r\n            case 'getVkId':\r\n            case 'joinVkGroup':\r\n            case 'leaveVkGroup':\r\n            case 'joinVkPublic':\r\n            case 'leaveVkPublic':\r\n            case 'repostVkWall':\r\n                ele = $(\"<li>\" + getI18n(type) + \"<a href=\\\"https://vk.com/\" + text + \"/\\\" target=\\\"_blank\\\">\" + text + \"</a>...<font></font></li>\");\r\n                break;\r\n            case 'visitLink':\r\n                ele = $(\"<li>\" + getI18n('visitLink') + \"<a href=\\\"\" + text + \"\\\" target=\\\"_blank\\\">\" + text + \"</a>...<font></font></li>\");\r\n                break;\r\n            case 'text':\r\n                ele = $(\"<li>\" + getI18n(text) + \"<font></font></li>\");\r\n                break;\r\n            case 'html':\r\n                ele = $(text);\r\n                break;\r\n            default:\r\n                ele = $(\"<li>\" + getI18n('unknown') + \":\" + type + \"...<font></font></li>\");\r\n                break;\r\n        }\r\n        ele.addClass('card-text');\r\n        $('#fuck-task-info').append(ele);\r\n        ele[0].scrollIntoView();\r\n        var font = ele.find('font');\r\n        var status_1 = {\r\n            font: font,\r\n            success: function (text, html) {\r\n                var _a, _b, _c;\r\n                if (text === void 0) { text = 'Success'; }\r\n                if (html === void 0) { html = false; }\r\n                (_a = this.font) === null || _a === void 0 ? void 0 : _a.attr('class', '').addClass('success');\r\n                html ? (_b = this.font) === null || _b === void 0 ? void 0 : _b.html(text) : (_c = this.font) === null || _c === void 0 ? void 0 : _c.text(text);\r\n                return this;\r\n            },\r\n            error: function (text, html) {\r\n                var _a, _b, _c;\r\n                if (text === void 0) { text = 'Error'; }\r\n                if (html === void 0) { html = false; }\r\n                (_a = this.font) === null || _a === void 0 ? void 0 : _a.attr('class', '').addClass('error');\r\n                html ? (_b = this.font) === null || _b === void 0 ? void 0 : _b.html(text) : (_c = this.font) === null || _c === void 0 ? void 0 : _c.text(text);\r\n                return this;\r\n            },\r\n            warning: function (text, html) {\r\n                var _a, _b, _c;\r\n                if (text === void 0) { text = 'Warning'; }\r\n                if (html === void 0) { html = false; }\r\n                (_a = this.font) === null || _a === void 0 ? void 0 : _a.attr('class', '').addClass('warning');\r\n                html ? (_b = this.font) === null || _b === void 0 ? void 0 : _b.html(text) : (_c = this.font) === null || _c === void 0 ? void 0 : _c.text(text);\r\n                return this;\r\n            },\r\n            info: function (text, html) {\r\n                var _a, _b, _c;\r\n                if (text === void 0) { text = 'Info'; }\r\n                if (html === void 0) { html = false; }\r\n                (_a = this.font) === null || _a === void 0 ? void 0 : _a.attr('class', '').addClass('info');\r\n                html ? (_b = this.font) === null || _b === void 0 ? void 0 : _b.html(text) : (_c = this.font) === null || _c === void 0 ? void 0 : _c.text(text);\r\n                return this;\r\n            },\r\n            view: function () {\r\n                var _a;\r\n                (_a = this.font) === null || _a === void 0 ? void 0 : _a[0].scrollIntoView();\r\n                return this;\r\n            }\r\n        };\r\n        return status_1;\r\n    }\r\n    catch (error) {\r\n        throwError(error, 'echoLog');\r\n        var status_2 = {\r\n            success: function () { return status_2; },\r\n            error: function () { return status_2; },\r\n            warning: function () { return status_2; },\r\n            info: function () { return status_2; },\r\n            view: function () { return status_2; }\r\n        };\r\n        return status_2;\r\n    }\r\n};\r\nexport default echoLog;\r\n","/*\r\n * @Author       : HCLonely\r\n * @Date         : 2021-09-28 15:03:10\r\n * @LastEditTime : 2021-10-30 21:05:30\r\n * @LastEditors  : HCLonely\r\n * @FilePath     : /auto-task-new/src/scripts/social/Discord.ts\r\n * @Description  : Discord 加入&移除服务器\r\n ! 白名单处理\r\n */\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nimport Social from './Social';\r\nimport httpRequest from '../tools/httpRequest';\r\nimport throwError from '../tools/throwError';\r\nimport { unique, delay } from '../tools/tools';\r\nimport echoLog from '../echoLog';\r\nvar Discord = /** @class */ (function (_super) {\r\n    __extends(Discord, _super);\r\n    // TODO: 任务识别\r\n    function Discord(id) {\r\n        var _a;\r\n        var _this = _super.call(this) || this;\r\n        _this.tasks = GM_getValue(\"Discord-\" + id) || { servers: [] }; // eslint-disable-line new-cap\r\n        _this.whiteList = ((_a = GM_getValue('whiteList')) === null || _a === void 0 ? void 0 : _a.discord) || { servers: [] }; // eslint-disable-line new-cap\r\n        _this.cache = GM_getValue('discordCache') || {}; // eslint-disable-line new-cap\r\n        _this.auth = GM_getValue('discordAuth') || {}; // eslint-disable-line new-cap\r\n        return _this;\r\n    }\r\n    // TODO:优化\r\n    Discord.prototype.init = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var isVerified, error_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 5, , 6]);\r\n                        if (!!this.auth.auth) return [3 /*break*/, 2];\r\n                        echoLog({ type: 'updateDiscordAuth' });\r\n                        return [4 /*yield*/, this.updateAuth()];\r\n                    case 1:\r\n                        if (_a.sent()) {\r\n                            this.initialized = true;\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        return [2 /*return*/, false];\r\n                    case 2: return [4 /*yield*/, this.verifyAuth()];\r\n                    case 3:\r\n                        isVerified = _a.sent();\r\n                        if (isVerified) {\r\n                            echoLog({ text: 'Init discord success!' });\r\n                            this.initialized = true;\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        GM_setValue('discordAuth', { auth: null }); // eslint-disable-line new-cap\r\n                        return [4 /*yield*/, this.updateAuth()];\r\n                    case 4:\r\n                        if (_a.sent()) {\r\n                            echoLog({ text: 'Init discord success!' });\r\n                            this.initialized = true;\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        echoLog({ text: 'Init discord failed!' });\r\n                        return [2 /*return*/, false];\r\n                    case 5:\r\n                        error_1 = _a.sent();\r\n                        throwError(error_1, 'Discord.init');\r\n                        return [2 /*return*/, false];\r\n                    case 6: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    // 验证discord凭证是否失效\r\n    Discord.prototype.verifyAuth = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var logStatus, _a, result, statusText, status_1, data, error_2;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _b.trys.push([0, 2, , 3]);\r\n                        logStatus = echoLog({ type: 'text', text: 'verifyDiscordAuth' });\r\n                        return [4 /*yield*/, httpRequest({\r\n                                url: 'https://discord.com/api/v6/users/@me',\r\n                                method: 'HEAD',\r\n                                headers: { authorization: this.auth.auth }\r\n                            })];\r\n                    case 1:\r\n                        _a = _b.sent(), result = _a.result, statusText = _a.statusText, status_1 = _a.status, data = _a.data;\r\n                        if (result === 'Success') {\r\n                            if ((data === null || data === void 0 ? void 0 : data.status) === 200) {\r\n                                logStatus.success();\r\n                                return [2 /*return*/, true];\r\n                            }\r\n                            logStatus.error(\"Error:\" + (data === null || data === void 0 ? void 0 : data.statusText) + \"(\" + (data === null || data === void 0 ? void 0 : data.status) + \")\");\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        logStatus.error(result + \":\" + statusText + \"(\" + status_1 + \")\");\r\n                        return [2 /*return*/, false];\r\n                    case 2:\r\n                        error_2 = _b.sent();\r\n                        throwError(error_2, 'Discord.verifyAuth');\r\n                        return [2 /*return*/, false];\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Discord.prototype.updateAuth = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var logStatus_1, error_3;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 2, , 3]);\r\n                        logStatus_1 = echoLog({ type: 'text', text: 'updateDiscordAuth' });\r\n                        return [4 /*yield*/, new Promise(function (resolve) {\r\n                                var newTab = GM_openInTab('https://discord.com/channels/@me#auth', // eslint-disable-line new-cap\r\n                                { active: true, insert: true, setParent: true });\r\n                                newTab.onclose = function () { return __awaiter(_this, void 0, void 0, function () {\r\n                                    var auth, _a;\r\n                                    var _b;\r\n                                    return __generator(this, function (_c) {\r\n                                        switch (_c.label) {\r\n                                            case 0:\r\n                                                auth = (_b = GM_getValue('discordAuth')) === null || _b === void 0 ? void 0 : _b.auth;\r\n                                                if (!auth) return [3 /*break*/, 2];\r\n                                                this.auth = { auth: auth };\r\n                                                logStatus_1.success();\r\n                                                _a = resolve;\r\n                                                return [4 /*yield*/, this.verifyAuth()];\r\n                                            case 1:\r\n                                                _a.apply(void 0, [_c.sent()]);\r\n                                                return [3 /*break*/, 3];\r\n                                            case 2:\r\n                                                logStatus_1.error('Error: Update discord auth failed!');\r\n                                                resolve(false);\r\n                                                _c.label = 3;\r\n                                            case 3: return [2 /*return*/];\r\n                                        }\r\n                                    });\r\n                                }); };\r\n                            })];\r\n                    case 1: return [2 /*return*/, _a.sent()];\r\n                    case 2:\r\n                        error_3 = _a.sent();\r\n                        throwError(error_3, 'Discord.updateAuth');\r\n                        return [2 /*return*/, false];\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Discord.prototype.joinServer = function (inviteId) {\r\n        var _a, _b;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var logStatus, _c, result, statusText, status_2, data, guild, error_4;\r\n            return __generator(this, function (_d) {\r\n                switch (_d.label) {\r\n                    case 0:\r\n                        _d.trys.push([0, 2, , 3]);\r\n                        logStatus = echoLog({ type: 'joinDiscordServer', text: inviteId });\r\n                        return [4 /*yield*/, httpRequest({\r\n                                url: \"https://discord.com/api/v6/invites/\" + inviteId,\r\n                                method: 'POST',\r\n                                dataType: 'json',\r\n                                headers: { authorization: this.auth.auth }\r\n                            })];\r\n                    case 1:\r\n                        _c = _d.sent(), result = _c.result, statusText = _c.statusText, status_2 = _c.status, data = _c.data;\r\n                        if (result === 'Success' && (data === null || data === void 0 ? void 0 : data.status) === 200) {\r\n                            logStatus.success();\r\n                            guild = String((_b = (_a = data.response) === null || _a === void 0 ? void 0 : _a.guild) === null || _b === void 0 ? void 0 : _b.id);\r\n                            if (guild) {\r\n                                // TODO: 优化\r\n                                this.addId(inviteId, guild);\r\n                                this.tasks.servers = unique(__spreadArray(__spreadArray([], __read(this.tasks.servers), false), [inviteId], false));\r\n                            }\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        logStatus.error(result + \":\" + statusText + \"(\" + status_2 + \")\");\r\n                        return [2 /*return*/, false];\r\n                    case 2:\r\n                        error_4 = _d.sent();\r\n                        throwError(error_4, 'Discord.joinServer');\r\n                        return [2 /*return*/, false];\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Discord.prototype.leaveServer = function (inviteId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var guild, logStatus, _a, result, statusText, status_3, data, error_5;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _b.trys.push([0, 3, , 4]);\r\n                        if (this.whiteList.servers.includes(inviteId)) {\r\n                            // TODO: 直接echo\r\n                            echoLog({ type: 'whiteList', text: inviteId });\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        return [4 /*yield*/, this.getGuild(inviteId)];\r\n                    case 1:\r\n                        guild = _b.sent();\r\n                        if (!guild) {\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        logStatus = echoLog({ type: 'leaveDiscordServer', text: inviteId });\r\n                        return [4 /*yield*/, httpRequest({\r\n                                url: \"https://discord.com/api/v6/users/@me/guilds/\" + guild,\r\n                                method: 'DELETE',\r\n                                headers: { authorization: this.auth.auth }\r\n                            })];\r\n                    case 2:\r\n                        _a = _b.sent(), result = _a.result, statusText = _a.statusText, status_3 = _a.status, data = _a.data;\r\n                        if (result === 'Success' && (data === null || data === void 0 ? void 0 : data.status) === 204) {\r\n                            logStatus.success();\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        logStatus.error(result + \":\" + statusText + \"(\" + status_3 + \")\");\r\n                        return [2 /*return*/, false];\r\n                    case 3:\r\n                        error_5 = _b.sent();\r\n                        throwError(error_5, 'Discord.leaveServer');\r\n                        return [2 /*return*/, false];\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Discord.prototype.getGuild = function (inviteId) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var logStatus, guild, _b, result, statusText, status_4, data, guild_1, error_6;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        _c.trys.push([0, 2, , 3]);\r\n                        logStatus = echoLog({ type: 'getDiscordGuild', text: inviteId });\r\n                        guild = this.cache[inviteId];\r\n                        if (guild) {\r\n                            logStatus.success();\r\n                            return [2 /*return*/, guild];\r\n                        }\r\n                        return [4 /*yield*/, httpRequest({\r\n                                url: \"https://discord.com/invite/\" + inviteId,\r\n                                method: 'GET'\r\n                            })];\r\n                    case 1:\r\n                        _b = _c.sent(), result = _b.result, statusText = _b.statusText, status_4 = _b.status, data = _b.data;\r\n                        if (result === 'Success' && (data === null || data === void 0 ? void 0 : data.status) === 200) {\r\n                            guild_1 = (_a = data.responseText.match(/https?:\\/\\/cdn\\.discordapp\\.com\\/icons\\/([\\d]+?)\\//)) === null || _a === void 0 ? void 0 : _a[1];\r\n                            if (guild_1) {\r\n                                logStatus.success();\r\n                                this.addId(inviteId, guild_1);\r\n                                return [2 /*return*/, guild_1];\r\n                            }\r\n                            logStatus.error(result + \":\" + statusText + \"(\" + status_4 + \")\");\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        logStatus.error(result + \":\" + statusText + \"(\" + status_4 + \")\");\r\n                        return [2 /*return*/, false];\r\n                    case 2:\r\n                        error_6 = _c.sent();\r\n                        throwError(error_6, 'Discord.getGuild');\r\n                        return [2 /*return*/, false];\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    // TODO:返回类型定义\r\n    Discord.prototype.toggleServers = function (_a) {\r\n        var _b = _a.doTask, doTask = _b === void 0 ? true : _b, _c = _a.servers, servers = _c === void 0 ? [] : _c, _d = _a.serverLinks, serverLinks = _d === void 0 ? [] : _d;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var prom, realServers, realServers_1, realServers_1_1, server, e_1_1, error_7;\r\n            var e_1, _e;\r\n            return __generator(this, function (_f) {\r\n                switch (_f.label) {\r\n                    case 0:\r\n                        _f.trys.push([0, 10, , 11]);\r\n                        if (!this.initialized) {\r\n                            echoLog({ type: 'text', text: '请先初始化' });\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        prom = [];\r\n                        realServers = this.getRealParams('servers', servers, serverLinks, doTask, function (link) { var _a; return (_a = link.match(/invite\\/(.+)/)) === null || _a === void 0 ? void 0 : _a[1]; });\r\n                        if (!(realServers.length > 0)) return [3 /*break*/, 8];\r\n                        _f.label = 1;\r\n                    case 1:\r\n                        _f.trys.push([1, 6, 7, 8]);\r\n                        realServers_1 = __values(realServers), realServers_1_1 = realServers_1.next();\r\n                        _f.label = 2;\r\n                    case 2:\r\n                        if (!!realServers_1_1.done) return [3 /*break*/, 5];\r\n                        server = realServers_1_1.value;\r\n                        prom.push(this[doTask ? 'joinServer' : 'leaveServer'](server));\r\n                        return [4 /*yield*/, delay(1000)];\r\n                    case 3:\r\n                        _f.sent();\r\n                        _f.label = 4;\r\n                    case 4:\r\n                        realServers_1_1 = realServers_1.next();\r\n                        return [3 /*break*/, 2];\r\n                    case 5: return [3 /*break*/, 8];\r\n                    case 6:\r\n                        e_1_1 = _f.sent();\r\n                        e_1 = { error: e_1_1 };\r\n                        return [3 /*break*/, 8];\r\n                    case 7:\r\n                        try {\r\n                            if (realServers_1_1 && !realServers_1_1.done && (_e = realServers_1.return)) _e.call(realServers_1);\r\n                        }\r\n                        finally { if (e_1) throw e_1.error; }\r\n                        return [7 /*endfinally*/];\r\n                    case 8: return [4 /*yield*/, Promise.all(prom).then(function () { return true; })];\r\n                    case 9: \r\n                    // TODO: 返回值处理\r\n                    return [2 /*return*/, _f.sent()];\r\n                    case 10:\r\n                        error_7 = _f.sent();\r\n                        throwError(error_7, 'Discord.toggleServers');\r\n                        return [2 /*return*/, false];\r\n                    case 11: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Discord.prototype.addId = function (inviteId, guild) {\r\n        this.cache[inviteId] = guild;\r\n        GM_setValue('discordCache', this.cache); // eslint-disable-line new-cap\r\n    };\r\n    return Discord;\r\n}(Social));\r\nexport default Discord;\r\n","/*\r\n * @Author       : HCLonely\r\n * @Date         : 2021-09-29 12:54:16\r\n * @LastEditTime : 2021-10-30 21:03:01\r\n * @LastEditors  : HCLonely\r\n * @FilePath     : /auto-task-new/src/scripts/social/Instagram.ts\r\n * @Description  : Instagram 关注&取关用户\r\n */\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nimport Social from './Social';\r\nimport echoLog from '../echoLog';\r\nimport throwError from '../tools/throwError';\r\nimport httpRequest from '../tools/httpRequest';\r\nimport getI18n from '../i18n/i18n';\r\nimport { unique, delay } from '../tools/tools';\r\nvar Instagram = /** @class */ (function (_super) {\r\n    __extends(Instagram, _super);\r\n    // TODO: 任务识别\r\n    function Instagram(id) {\r\n        var _a;\r\n        var _this = _super.call(this) || this;\r\n        _this.tasks = GM_getValue(\"Instagram-\" + id) || { users: [] }; // eslint-disable-line new-cap\r\n        _this.whiteList = ((_a = GM_getValue('whiteList')) === null || _a === void 0 ? void 0 : _a.instagram) || { users: [] }; // eslint-disable-line new-cap\r\n        return _this;\r\n    }\r\n    Instagram.prototype.init = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var isVerified, error_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 2, , 3]);\r\n                        return [4 /*yield*/, this.getUserInfo()];\r\n                    case 1:\r\n                        isVerified = _a.sent();\r\n                        if (isVerified) {\r\n                            echoLog({ text: 'Init instagram success!' });\r\n                            this.initialized = true;\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        echoLog({ text: 'Init instagram failed!' });\r\n                        return [2 /*return*/, false];\r\n                    case 2:\r\n                        error_1 = _a.sent();\r\n                        throwError(error_1, 'Instagram.init');\r\n                        return [2 /*return*/, false];\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Instagram.prototype.getUserInfo = function (name) {\r\n        var _a, _b, _c;\r\n        if (name === void 0) { name = 'instagram'; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var logStatus, _d, result, statusText, status_1, data, csrftoken, hash, id, error_2;\r\n            return __generator(this, function (_e) {\r\n                switch (_e.label) {\r\n                    case 0:\r\n                        _e.trys.push([0, 2, , 3]);\r\n                        logStatus = echoLog({ type: name === 'instagram' ? 'getInsInfo' : 'getInsUserId', text: name });\r\n                        return [4 /*yield*/, httpRequest({\r\n                                url: \"https://www.instagram.com/\" + name + \"/\",\r\n                                method: 'GET'\r\n                            })];\r\n                    case 1:\r\n                        _d = _e.sent(), result = _d.result, statusText = _d.statusText, status_1 = _d.status, data = _d.data;\r\n                        if (result === 'Success') {\r\n                            if (data === null || data === void 0 ? void 0 : data.finalUrl.includes('accounts/login')) {\r\n                                logStatus.error(\"Error:\" + getI18n('loginIns'), true);\r\n                                return [2 /*return*/, false];\r\n                            }\r\n                            else if (data === null || data === void 0 ? void 0 : data.finalUrl.includes('www.instagram.com/challenge')) {\r\n                                logStatus.error(\"Error:\" + getI18n('insBanned'));\r\n                                return [2 /*return*/, false];\r\n                            }\r\n                            if ((data === null || data === void 0 ? void 0 : data.status) === 200) {\r\n                                csrftoken = (_a = data.responseText.match(/\"csrf_token\":\"(.+?)\"/)) === null || _a === void 0 ? void 0 : _a[1];\r\n                                hash = (_b = data.responseText.match(/\"rollout_hash\":\"(.+?)\"/)) === null || _b === void 0 ? void 0 : _b[1];\r\n                                if (name === 'instagram') {\r\n                                    if (csrftoken && hash) {\r\n                                        this.auth = { csrftoken: csrftoken, hash: hash };\r\n                                        return [2 /*return*/, true];\r\n                                    }\r\n                                    return [2 /*return*/, false];\r\n                                }\r\n                                this.auth.csrftoken = csrftoken || this.auth.csrftoken;\r\n                                this.auth.hash = csrftoken || this.auth.hash;\r\n                                id = (_c = data.responseText.match(/\"profilePage_([\\d]+?)\"/)) === null || _c === void 0 ? void 0 : _c[1];\r\n                                if (id) {\r\n                                    logStatus.success();\r\n                                    return [2 /*return*/, id];\r\n                                }\r\n                                logStatus.error('Error: Get ins data error!');\r\n                                return [2 /*return*/, false];\r\n                            }\r\n                            logStatus.error(result + \":\" + statusText + \"(\" + status_1 + \")\");\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        return [2 /*return*/, false];\r\n                    case 2:\r\n                        error_2 = _e.sent();\r\n                        throwError(error_2, 'Instagram.getUserInfo');\r\n                        return [2 /*return*/, false];\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Instagram.prototype.followUser = function (name) {\r\n        var _a, _b;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var id, logStatus, _c, result, statusText, status_2, data, error_3;\r\n            return __generator(this, function (_d) {\r\n                switch (_d.label) {\r\n                    case 0:\r\n                        _d.trys.push([0, 3, , 4]);\r\n                        return [4 /*yield*/, this.getUserInfo(name)];\r\n                    case 1:\r\n                        id = _d.sent();\r\n                        if (!id)\r\n                            return [2 /*return*/, false];\r\n                        logStatus = echoLog({ type: 'followIns', text: name });\r\n                        return [4 /*yield*/, httpRequest({\r\n                                url: \"https://www.instagram.com/web/friendships/\" + id + \"/follow/\",\r\n                                method: 'POST',\r\n                                dataType: 'json',\r\n                                headers: {\r\n                                    'x-csrftoken': this.auth.csrftoken,\r\n                                    origin: 'https://www.instagram.com',\r\n                                    referer: \"https://www.instagram.com/\" + name + \"/\",\r\n                                    'content-type': 'application/x-www-form-urlencoded',\r\n                                    'sec-fetch-site': 'same-origin',\r\n                                    'x-instagram-ajax': this.auth.hash\r\n                                }\r\n                            })];\r\n                    case 2:\r\n                        _c = _d.sent(), result = _c.result, statusText = _c.statusText, status_2 = _c.status, data = _c.data;\r\n                        if (result === 'Success') {\r\n                            if ((data === null || data === void 0 ? void 0 : data.status) === 200 && ((_a = data.response) === null || _a === void 0 ? void 0 : _a.result) === 'following') {\r\n                                logStatus.success();\r\n                                this.tasks.users = unique(__spreadArray(__spreadArray([], __read(this.tasks.users), false), [name], false));\r\n                                return [2 /*return*/, true];\r\n                            }\r\n                            logStatus.error(\"Error:\" + (((_b = data === null || data === void 0 ? void 0 : data.response) === null || _b === void 0 ? void 0 : _b.feedback_message) || ((data === null || data === void 0 ? void 0 : data.statusText) + \"(\" + (data === null || data === void 0 ? void 0 : data.status) + \")\"))); // eslint-disable-line camelcase\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        logStatus.error(result + \":\" + statusText + \"(\" + status_2 + \")\");\r\n                        return [2 /*return*/, false];\r\n                    case 3:\r\n                        error_3 = _d.sent();\r\n                        throwError(error_3, 'Instagram.followUser');\r\n                        return [2 /*return*/, false];\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Instagram.prototype.unfollowUser = function (name) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var id, logStatus, _b, result, statusText, status_3, data, error_4;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        _c.trys.push([0, 3, , 4]);\r\n                        if (this.whiteList.users.includes(name)) {\r\n                            // TODO: 直接echo\r\n                            echoLog({ type: 'whiteList', text: name });\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        return [4 /*yield*/, this.getUserInfo(name)];\r\n                    case 1:\r\n                        id = _c.sent();\r\n                        if (!id)\r\n                            return [2 /*return*/, false];\r\n                        logStatus = echoLog({ type: 'unfollowIns', text: name });\r\n                        return [4 /*yield*/, httpRequest({\r\n                                url: \"https://www.instagram.com/web/friendships/\" + id + \"/unfollow/\",\r\n                                method: 'POST',\r\n                                dataType: 'json',\r\n                                headers: {\r\n                                    'x-csrftoken': this.auth.csrftoken,\r\n                                    origin: 'https://www.instagram.com',\r\n                                    referer: \"https://www.instagram.com/\" + name + \"/\",\r\n                                    'content-type': 'application/x-www-form-urlencoded',\r\n                                    'sec-fetch-site': 'same-origin',\r\n                                    'x-instagram-ajax': this.auth.hash\r\n                                }\r\n                            })];\r\n                    case 2:\r\n                        _b = _c.sent(), result = _b.result, statusText = _b.statusText, status_3 = _b.status, data = _b.data;\r\n                        if (result === 'Success') {\r\n                            if ((data === null || data === void 0 ? void 0 : data.status) === 200 && ((_a = data.response) === null || _a === void 0 ? void 0 : _a.status) === 'ok') {\r\n                                logStatus.success();\r\n                                return [2 /*return*/, true];\r\n                            }\r\n                            logStatus.error(\"Error:\" + (data === null || data === void 0 ? void 0 : data.statusText) + \"(\" + (data === null || data === void 0 ? void 0 : data.status) + \")\");\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        logStatus.error(result + \":\" + statusText + \"(\" + status_3 + \")\");\r\n                        return [2 /*return*/, false];\r\n                    case 3:\r\n                        error_4 = _c.sent();\r\n                        throwError(error_4, 'Instagram.unfollowUser');\r\n                        return [2 /*return*/, false];\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    // 改成处理任务\r\n    Instagram.prototype.toggle = function (_a) {\r\n        var _b = _a.doTask, doTask = _b === void 0 ? true : _b, _c = _a.users, users = _c === void 0 ? [] : _c, _d = _a.userLinks, userLinks = _d === void 0 ? [] : _d;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var prom, realUsers, realUsers_1, realUsers_1_1, username, e_1_1, error_5;\r\n            var e_1, _e;\r\n            return __generator(this, function (_f) {\r\n                switch (_f.label) {\r\n                    case 0:\r\n                        _f.trys.push([0, 10, , 11]);\r\n                        if (!this.initialized) {\r\n                            echoLog({ type: 'text', text: '请先初始化' });\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        prom = [];\r\n                        realUsers = this.getRealParams('users', users, userLinks, doTask, function (link) { var _a; return (_a = link.match(/https:\\/\\/www\\.instagram\\.com\\/(.+)?\\//)) === null || _a === void 0 ? void 0 : _a[1]; });\r\n                        if (!(realUsers.length > 0)) return [3 /*break*/, 8];\r\n                        _f.label = 1;\r\n                    case 1:\r\n                        _f.trys.push([1, 6, 7, 8]);\r\n                        realUsers_1 = __values(realUsers), realUsers_1_1 = realUsers_1.next();\r\n                        _f.label = 2;\r\n                    case 2:\r\n                        if (!!realUsers_1_1.done) return [3 /*break*/, 5];\r\n                        username = realUsers_1_1.value;\r\n                        prom.push(this[doTask ? 'followUser' : 'unfollowUser'](username));\r\n                        return [4 /*yield*/, delay(1000)];\r\n                    case 3:\r\n                        _f.sent();\r\n                        _f.label = 4;\r\n                    case 4:\r\n                        realUsers_1_1 = realUsers_1.next();\r\n                        return [3 /*break*/, 2];\r\n                    case 5: return [3 /*break*/, 8];\r\n                    case 6:\r\n                        e_1_1 = _f.sent();\r\n                        e_1 = { error: e_1_1 };\r\n                        return [3 /*break*/, 8];\r\n                    case 7:\r\n                        try {\r\n                            if (realUsers_1_1 && !realUsers_1_1.done && (_e = realUsers_1.return)) _e.call(realUsers_1);\r\n                        }\r\n                        finally { if (e_1) throw e_1.error; }\r\n                        return [7 /*endfinally*/];\r\n                    case 8: return [4 /*yield*/, Promise.all(prom).then(function () { return true; })];\r\n                    case 9: \r\n                    // TODO: 返回值处理\r\n                    return [2 /*return*/, _f.sent()];\r\n                    case 10:\r\n                        error_5 = _f.sent();\r\n                        throwError(error_5, 'Instagram.toggleUsers');\r\n                        return [2 /*return*/, false];\r\n                    case 11: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return Instagram;\r\n}(Social));\r\nexport default Instagram;\r\n","/*\r\n * @Author       : HCLonely\r\n * @Date         : 2021-09-30 09:43:32\r\n * @LastEditTime : 2021-10-30 20:58:58\r\n * @LastEditors  : HCLonely\r\n * @FilePath     : /auto-task-new/src/scripts/social/Reddit.ts\r\n * @Description  : Reddit 订阅&取消订阅\r\n */\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nimport Social from './Social';\r\nimport echoLog from '../echoLog';\r\nimport throwError from '../tools/throwError';\r\nimport httpRequest from '../tools/httpRequest';\r\nimport getI18n from '../i18n/i18n';\r\nimport { unique, delay } from '../tools/tools';\r\nvar Reddit = /** @class */ (function (_super) {\r\n    __extends(Reddit, _super);\r\n    // TODO: 任务识别\r\n    function Reddit(id) {\r\n        var _a;\r\n        var _this = _super.call(this) || this;\r\n        _this.tasks = GM_getValue(\"Reddit-\" + id) || { reddits: [] }; // eslint-disable-line new-cap\r\n        _this.whiteList = ((_a = GM_getValue('whiteList')) === null || _a === void 0 ? void 0 : _a.reddit) || { reddits: [] }; // eslint-disable-line new-cap\r\n        _this.auth = GM_getValue('redditAuth') || {}; // eslint-disable-line new-cap\r\n        return _this;\r\n    }\r\n    // 通用化\r\n    Reddit.prototype.init = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var isVerified, error_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 2, , 3]);\r\n                        return [4 /*yield*/, this.updateToken()];\r\n                    case 1:\r\n                        isVerified = _a.sent();\r\n                        if (isVerified) {\r\n                            echoLog({ text: 'Init reddit success!' });\r\n                            this.initialized = true;\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        echoLog({ text: 'Init reddit failed!' });\r\n                        return [2 /*return*/, false];\r\n                    case 2:\r\n                        error_1 = _a.sent();\r\n                        throwError(error_1, 'Reddit.init');\r\n                        return [2 /*return*/, false];\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Reddit.prototype.updateToken = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var logStatus, _a, result, statusText, status_1, data, _b, accessToken, error_2;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        _c.trys.push([0, 2, , 3]);\r\n                        logStatus = echoLog({ type: 'text', text: 'updateRedditInfo' });\r\n                        return [4 /*yield*/, httpRequest({\r\n                                url: 'https://www.reddit.com/',\r\n                                method: 'GET',\r\n                                nochche: true,\r\n                                headers: {\r\n                                    'Cache-Control': 'no-cache'\r\n                                }\r\n                            })];\r\n                    case 1:\r\n                        _a = _c.sent(), result = _a.result, statusText = _a.statusText, status_1 = _a.status, data = _a.data;\r\n                        if (result === 'Success') {\r\n                            if ((data === null || data === void 0 ? void 0 : data.status) === 200) {\r\n                                if (data.responseText.includes('www.reddit.com/login/')) {\r\n                                    logStatus.error(\"Error:\" + getI18n('loginReddit'), true);\r\n                                    return [2 /*return*/, false];\r\n                                }\r\n                                _b = __read(data.responseText.match(/\"accessToken\":\"(.*?)\",\"expires\":\"(.*?)\"/) || [], 2), accessToken = _b[1];\r\n                                if (accessToken) {\r\n                                    this.auth.token = accessToken;\r\n                                    logStatus.success();\r\n                                    return [2 /*return*/, true];\r\n                                }\r\n                                logStatus.error('Error: Parameter \"accessToken\" not found!');\r\n                                return [2 /*return*/, false];\r\n                            }\r\n                            logStatus.error(\"Error:\" + (data === null || data === void 0 ? void 0 : data.statusText) + \"(\" + (data === null || data === void 0 ? void 0 : data.status) + \")\");\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        logStatus.error(result + \":\" + statusText + \"(\" + status_1 + \")\");\r\n                        return [2 /*return*/, false];\r\n                    case 2:\r\n                        error_2 = _c.sent();\r\n                        throwError(error_2, 'Reddit.updateToken');\r\n                        return [2 /*return*/, false];\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Reddit.prototype.toggleTask = function (_a) {\r\n        var name = _a.name, _b = _a.doTask, doTask = _b === void 0 ? true : _b;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var type, logStatus, _c, result, statusText, status_2, data, error_3;\r\n            return __generator(this, function (_d) {\r\n                switch (_d.label) {\r\n                    case 0:\r\n                        _d.trys.push([0, 2, , 3]);\r\n                        if (!doTask && this.whiteList.reddits.includes(name)) {\r\n                            // TODO: 直接echo\r\n                            echoLog({ type: 'whiteList', text: name });\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        type = doTask ? 'joinReddit' : 'leaveReddit';\r\n                        if (/^u_/.test(name)) {\r\n                            type = doTask ? 'followRedditUser' : 'unfollowRedditUser';\r\n                        }\r\n                        logStatus = echoLog({ type: type, text: name });\r\n                        return [4 /*yield*/, httpRequest({\r\n                                url: 'https://oauth.reddit.com/api/subscribe?redditWebClient=desktop2x&app=desktop2x-client-production&raw_json=1&gilding_detail=1',\r\n                                method: 'POST',\r\n                                headers: { authorization: \"Bearer \" + this.auth.token, 'content-type': 'application/x-www-form-urlencoded' },\r\n                                data: $.param({\r\n                                    action: doTask ? 'sub' : 'unsub',\r\n                                    sr_name: name,\r\n                                    api_type: 'json' // eslint-disable-line camelcase\r\n                                })\r\n                            })];\r\n                    case 1:\r\n                        _c = _d.sent(), result = _c.result, statusText = _c.statusText, status_2 = _c.status, data = _c.data;\r\n                        if (result === 'Success') {\r\n                            if ((data === null || data === void 0 ? void 0 : data.status) === 200) {\r\n                                logStatus.success();\r\n                                if (doTask)\r\n                                    this.tasks.reddits = unique(__spreadArray(__spreadArray([], __read(this.tasks.reddits), false), [name], false));\r\n                                return [2 /*return*/, true];\r\n                            }\r\n                            logStatus.error(\"Error:\" + (data === null || data === void 0 ? void 0 : data.statusText) + \"(\" + (data === null || data === void 0 ? void 0 : data.status) + \")\");\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        logStatus.error(result + \":\" + statusText + \"(\" + status_2 + \")\");\r\n                        return [2 /*return*/, false];\r\n                    case 2:\r\n                        error_3 = _d.sent();\r\n                        throwError(error_3, 'Reddit.toggleTask');\r\n                        return [2 /*return*/, false];\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Reddit.prototype.toggle = function (_a) {\r\n        var _b = _a.doTask, doTask = _b === void 0 ? true : _b, _c = _a.reddits, reddits = _c === void 0 ? [] : _c, _d = _a.redditLinks, redditLinks = _d === void 0 ? [] : _d;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var prom, realReddits, realReddits_1, realReddits_1_1, name_1, e_1_1, error_4;\r\n            var e_1, _e;\r\n            return __generator(this, function (_f) {\r\n                switch (_f.label) {\r\n                    case 0:\r\n                        _f.trys.push([0, 10, , 11]);\r\n                        prom = [];\r\n                        realReddits = this.getRealParams('reddits', reddits, redditLinks, doTask, function (link) {\r\n                            var _a, _b;\r\n                            var name = (_a = link.match(/https?:\\/\\/www\\.reddit\\.com\\/r\\/([^/]*)/)) === null || _a === void 0 ? void 0 : _a[1];\r\n                            var userName = (_b = link.match(/https?:\\/\\/www\\.reddit\\.com\\/user\\/([^/]*)/)) === null || _b === void 0 ? void 0 : _b[1];\r\n                            if (userName) {\r\n                                return name || userName;\r\n                            }\r\n                            return name;\r\n                        });\r\n                        if (!(realReddits.length > 0)) return [3 /*break*/, 8];\r\n                        _f.label = 1;\r\n                    case 1:\r\n                        _f.trys.push([1, 6, 7, 8]);\r\n                        realReddits_1 = __values(realReddits), realReddits_1_1 = realReddits_1.next();\r\n                        _f.label = 2;\r\n                    case 2:\r\n                        if (!!realReddits_1_1.done) return [3 /*break*/, 5];\r\n                        name_1 = realReddits_1_1.value;\r\n                        prom.push(this.toggleTask({ name: name_1, doTask: doTask }));\r\n                        return [4 /*yield*/, delay(1000)];\r\n                    case 3:\r\n                        _f.sent();\r\n                        _f.label = 4;\r\n                    case 4:\r\n                        realReddits_1_1 = realReddits_1.next();\r\n                        return [3 /*break*/, 2];\r\n                    case 5: return [3 /*break*/, 8];\r\n                    case 6:\r\n                        e_1_1 = _f.sent();\r\n                        e_1 = { error: e_1_1 };\r\n                        return [3 /*break*/, 8];\r\n                    case 7:\r\n                        try {\r\n                            if (realReddits_1_1 && !realReddits_1_1.done && (_e = realReddits_1.return)) _e.call(realReddits_1);\r\n                        }\r\n                        finally { if (e_1) throw e_1.error; }\r\n                        return [7 /*endfinally*/];\r\n                    case 8: return [4 /*yield*/, Promise.all(prom).then(function () { return true; })];\r\n                    case 9: \r\n                    // TODO: 返回值处理\r\n                    return [2 /*return*/, _f.sent()];\r\n                    case 10:\r\n                        error_4 = _f.sent();\r\n                        throwError(error_4, 'Reddit.toggle');\r\n                        return [2 /*return*/, false];\r\n                    case 11: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return Reddit;\r\n}(Social));\r\nexport default Reddit;\r\n","/*\r\n * @Author       : HCLonely\r\n * @Date         : 2021-10-04 10:00:41\r\n * @LastEditTime : 2021-10-30 21:03:46\r\n * @LastEditors  : HCLonely\r\n * @FilePath     : /auto-task-new/src/scripts/social/Twitch.ts\r\n * @Description  : Twitch 关注/取关频道\r\n */\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nimport Social from './Social';\r\nimport echoLog from '../echoLog';\r\nimport throwError from '../tools/throwError';\r\nimport httpRequest from '../tools/httpRequest';\r\nimport { unique, delay } from '../tools/tools';\r\nvar Twitch = /** @class */ (function (_super) {\r\n    __extends(Twitch, _super);\r\n    // TODO: 任务识别\r\n    function Twitch(id) {\r\n        var _a;\r\n        var _this = _super.call(this) || this;\r\n        _this.tasks = GM_getValue(\"Twitch-\" + id) || { channels: [] }; // eslint-disable-line new-cap\r\n        _this.whiteList = ((_a = GM_getValue('whiteList')) === null || _a === void 0 ? void 0 : _a.twitch) || { channels: [] }; // eslint-disable-line new-cap\r\n        _this.auth = GM_getValue('twitchAuth') || {}; // eslint-disable-line new-cap\r\n        return _this;\r\n    }\r\n    // 通用化,log\r\n    Twitch.prototype.init = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var isVerified, error_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 5, , 6]);\r\n                        if (!!this.auth.authToken) return [3 /*break*/, 2];\r\n                        echoLog({ type: 'updateTwitchAuth' });\r\n                        return [4 /*yield*/, this.updateAuth()];\r\n                    case 1:\r\n                        if (_a.sent()) {\r\n                            this.initialized = true;\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        return [2 /*return*/, false];\r\n                    case 2: return [4 /*yield*/, this.verifyAuth()];\r\n                    case 3:\r\n                        isVerified = _a.sent();\r\n                        if (isVerified) {\r\n                            echoLog({ text: 'Init twitch success!' });\r\n                            this.initialized = true;\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        GM_setValue('twitchAuth', { auth: null }); // eslint-disable-line new-cap\r\n                        return [4 /*yield*/, this.updateAuth()];\r\n                    case 4:\r\n                        if (_a.sent()) {\r\n                            echoLog({ text: 'Init twitch success!' });\r\n                            this.initialized = true;\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        echoLog({ text: 'Init twitch failed!' });\r\n                        return [2 /*return*/, false];\r\n                    case 5:\r\n                        error_1 = _a.sent();\r\n                        throwError(error_1, 'Twitch.init');\r\n                        return [2 /*return*/, false];\r\n                    case 6: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Twitch.prototype.verifyAuth = function () {\r\n        var _a, _b, _c;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var logStatus, _d, result, statusText, status_1, data, error_2;\r\n            return __generator(this, function (_e) {\r\n                switch (_e.label) {\r\n                    case 0:\r\n                        _e.trys.push([0, 2, , 3]);\r\n                        logStatus = echoLog({ type: 'text', text: 'verifyTwitchAuth' });\r\n                        return [4 /*yield*/, httpRequest({\r\n                                url: 'https://gql.twitch.tv/gql',\r\n                                method: 'POST',\r\n                                dataType: 'json',\r\n                                headers: { Authorization: \"OAuth \" + this.auth.authToken, 'Client-Id': this.auth.clientId },\r\n                                data: ('[{\"operationName\":\"FrontPageNew_User\",\"variables\":{\"limit\":1},\"extensions\":{\"persistedQuery\":{\"version\":1,' +\r\n                                    '\"sha256Hash\":\"64bd07a2cbaca80699d62636d966cf6395a5d14a1f0a14282067dcb28b13eb11\"}}}]')\r\n                            })];\r\n                    case 1:\r\n                        _d = _e.sent(), result = _d.result, statusText = _d.statusText, status_1 = _d.status, data = _d.data;\r\n                        if (result === 'Success') {\r\n                            if ((data === null || data === void 0 ? void 0 : data.status) === 200 && ((_c = (_b = (_a = data.response) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.data) === null || _c === void 0 ? void 0 : _c.currentUser)) {\r\n                                logStatus.success();\r\n                                return [2 /*return*/, true];\r\n                            }\r\n                            logStatus.error(\"Error:\" + (data === null || data === void 0 ? void 0 : data.statusText) + \"(\" + (data === null || data === void 0 ? void 0 : data.status) + \")\");\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        logStatus.error(result + \":\" + statusText + \"(\" + status_1 + \")\");\r\n                        return [2 /*return*/, false];\r\n                    case 2:\r\n                        error_2 = _e.sent();\r\n                        throwError(error_2, 'Twitch.verifyAuth');\r\n                        return [2 /*return*/, false];\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Twitch.prototype.updateAuth = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var logStatus_1, error_3;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 2, , 3]);\r\n                        logStatus_1 = echoLog({ type: 'text', text: 'updateTwitchAuth' });\r\n                        return [4 /*yield*/, new Promise(function (resolve) {\r\n                                var newTab = GM_openInTab('https://www.twitch.tv/#auth', // eslint-disable-line new-cap\r\n                                { active: true, insert: true, setParent: true });\r\n                                newTab.onclose = function () { return __awaiter(_this, void 0, void 0, function () {\r\n                                    var auth, _a;\r\n                                    return __generator(this, function (_b) {\r\n                                        switch (_b.label) {\r\n                                            case 0:\r\n                                                auth = GM_getValue('twitchAuth');\r\n                                                if (!auth) return [3 /*break*/, 2];\r\n                                                this.auth = auth;\r\n                                                logStatus_1.success();\r\n                                                _a = resolve;\r\n                                                return [4 /*yield*/, this.verifyAuth()];\r\n                                            case 1:\r\n                                                _a.apply(void 0, [_b.sent()]);\r\n                                                return [3 /*break*/, 3];\r\n                                            case 2:\r\n                                                logStatus_1.error('Error: Update twitch auth failed!');\r\n                                                resolve(false);\r\n                                                _b.label = 3;\r\n                                            case 3: return [2 /*return*/];\r\n                                        }\r\n                                    });\r\n                                }); };\r\n                            })];\r\n                    case 1: return [2 /*return*/, _a.sent()];\r\n                    case 2:\r\n                        error_3 = _a.sent();\r\n                        throwError(error_3, 'Twitch.updateAuth');\r\n                        return [2 /*return*/, false];\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Twitch.prototype.toggleChannel = function (_a) {\r\n        var name = _a.name, _b = _a.doTask, doTask = _b === void 0 ? true : _b;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var channelId, logStatus, followData, unfollowData, _c, result, statusText, status_2, data, error_4;\r\n            return __generator(this, function (_d) {\r\n                switch (_d.label) {\r\n                    case 0:\r\n                        _d.trys.push([0, 3, , 4]);\r\n                        if (!doTask && this.whiteList.channels.includes(name)) {\r\n                            // TODO: 直接echo\r\n                            echoLog({ type: 'whiteList', text: name });\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        return [4 /*yield*/, this.getChannelId(name)];\r\n                    case 1:\r\n                        channelId = _d.sent();\r\n                        if (!channelId)\r\n                            return [2 /*return*/, false];\r\n                        logStatus = echoLog({ type: (doTask ? '' : 'un') + \"followTwitchChannel\", text: name });\r\n                        followData = (\"[{\\\"operationName\\\":\\\"FollowButton_FollowUser\\\",\\\"variables\\\":{\\\"input\\\":{\\\"disableNotifications\\\":false,\\\"targetID\\\":\\\"\" + channelId +\r\n                            '\"}},\"extensions\":{\"persistedQuery\":{\"version\":1,\"sha256Hash\":\"3efee1acda90efdff9fef6e6b4a29213be3ee490781c5b54469717b6131ffdfe\"}}}]');\r\n                        unfollowData = (\"[{\\\"operationName\\\":\\\"FollowButton_UnfollowUser\\\",\\\"variables\\\":{\\\"input\\\":{\\\"targetID\\\":\\\"\" + channelId + \"\\\"}},\" +\r\n                            '\"extensions\":{\"persistedQuery\":{\"version\":1,\"sha256Hash\":\"d7fbdb4e9780dcdc0cc1618ec783309471cd05a59584fc3c56ea1c52bb632d41\"}}}]');\r\n                        return [4 /*yield*/, httpRequest({\r\n                                url: 'https://gql.twitch.tv/gql',\r\n                                method: 'POST',\r\n                                dataType: 'json',\r\n                                headers: { Authorization: \"OAuth \" + this.auth.authToken },\r\n                                data: doTask ? followData : unfollowData\r\n                            })];\r\n                    case 2:\r\n                        _c = _d.sent(), result = _c.result, statusText = _c.statusText, status_2 = _c.status, data = _c.data;\r\n                        if (result === 'Success') {\r\n                            if ((data === null || data === void 0 ? void 0 : data.status) === 200) {\r\n                                logStatus.success();\r\n                                if (doTask) {\r\n                                    this.tasks.channels = unique(__spreadArray(__spreadArray([], __read(this.tasks.channels), false), [name], false));\r\n                                }\r\n                                return [2 /*return*/, true];\r\n                            }\r\n                            logStatus.error(\"Error:\" + (data === null || data === void 0 ? void 0 : data.statusText) + \"(\" + (data === null || data === void 0 ? void 0 : data.status) + \")\");\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        logStatus.error(result + \":\" + statusText + \"(\" + status_2 + \")\");\r\n                        return [2 /*return*/, false];\r\n                    case 3:\r\n                        error_4 = _d.sent();\r\n                        throwError(error_4, 'Twitch.toggleChannel');\r\n                        return [2 /*return*/, false];\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Twitch.prototype.getChannelId = function (name) {\r\n        var _a, _b, _c, _d;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var logStatus, _e, result, statusText, status_3, data, channelId, error_5;\r\n            return __generator(this, function (_f) {\r\n                switch (_f.label) {\r\n                    case 0:\r\n                        _f.trys.push([0, 2, , 3]);\r\n                        logStatus = echoLog({ type: 'getTwitchChannelId', text: name });\r\n                        return [4 /*yield*/, httpRequest({\r\n                                url: 'https://gql.twitch.tv/gql',\r\n                                method: 'POST',\r\n                                headers: { Authorization: \"OAuth \" + this.auth.authToken, 'Client-Id': this.auth.clientId },\r\n                                responseType: 'json',\r\n                                data: (\"[{\\\"operationName\\\":\\\"ActiveWatchParty\\\",\\\"variables\\\":{\\\"channelLogin\\\":\\\"\" + name + \"\\\"},\" +\r\n                                    '\"extensions\":{\"persistedQuery\":{\"version\":1,\"sha256Hash\":\"4a8156c97b19e3a36e081cf6d6ddb5dbf9f9b02ae60e4d2ff26ed70aebc80a30\"}}}]')\r\n                            })];\r\n                    case 1:\r\n                        _e = _f.sent(), result = _e.result, statusText = _e.statusText, status_3 = _e.status, data = _e.data;\r\n                        if (result === 'Success') {\r\n                            if ((data === null || data === void 0 ? void 0 : data.status) === 200) {\r\n                                channelId = String((_d = (_c = (_b = (_a = data.response) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.data) === null || _c === void 0 ? void 0 : _c.user) === null || _d === void 0 ? void 0 : _d.id);\r\n                                if (channelId) {\r\n                                    logStatus.success();\r\n                                    return [2 /*return*/, channelId];\r\n                                }\r\n                                logStatus.error(\"Error:\" + data.statusText + \"(\" + data.status + \")\");\r\n                                return [2 /*return*/, false];\r\n                            }\r\n                            logStatus.error(\"Error:\" + (data === null || data === void 0 ? void 0 : data.statusText) + \"(\" + (data === null || data === void 0 ? void 0 : data.status) + \")\");\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        logStatus.error(result + \":\" + statusText + \"(\" + status_3 + \")\");\r\n                        return [2 /*return*/, false];\r\n                    case 2:\r\n                        error_5 = _f.sent();\r\n                        throwError(error_5, 'Twitch.getChannelId');\r\n                        return [2 /*return*/, false];\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Twitch.prototype.toggle = function (_a) {\r\n        var _b = _a.doTask, doTask = _b === void 0 ? true : _b, _c = _a.channels, channels = _c === void 0 ? [] : _c, _d = _a.channelLinks, channelLinks = _d === void 0 ? [] : _d;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var prom, realChannels, realChannels_1, realChannels_1_1, channel, e_1_1, error_6;\r\n            var e_1, _e;\r\n            return __generator(this, function (_f) {\r\n                switch (_f.label) {\r\n                    case 0:\r\n                        _f.trys.push([0, 9, , 10]);\r\n                        if (!this.initialized) {\r\n                            echoLog({ type: 'text', text: '请先初始化' });\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        prom = [];\r\n                        realChannels = this.getRealParams('channels', channels, channelLinks, doTask, function (link) { var _a; return (_a = link.match(/https:\\/\\/www\\.twitch\\.tv\\/(.+)/)) === null || _a === void 0 ? void 0 : _a[1]; });\r\n                        if (!(realChannels.length > 0)) return [3 /*break*/, 8];\r\n                        _f.label = 1;\r\n                    case 1:\r\n                        _f.trys.push([1, 6, 7, 8]);\r\n                        realChannels_1 = __values(realChannels), realChannels_1_1 = realChannels_1.next();\r\n                        _f.label = 2;\r\n                    case 2:\r\n                        if (!!realChannels_1_1.done) return [3 /*break*/, 5];\r\n                        channel = realChannels_1_1.value;\r\n                        prom.push(this.toggleChannel({ name: channel, doTask: doTask }));\r\n                        return [4 /*yield*/, delay(1000)];\r\n                    case 3:\r\n                        _f.sent();\r\n                        _f.label = 4;\r\n                    case 4:\r\n                        realChannels_1_1 = realChannels_1.next();\r\n                        return [3 /*break*/, 2];\r\n                    case 5: return [3 /*break*/, 8];\r\n                    case 6:\r\n                        e_1_1 = _f.sent();\r\n                        e_1 = { error: e_1_1 };\r\n                        return [3 /*break*/, 8];\r\n                    case 7:\r\n                        try {\r\n                            if (realChannels_1_1 && !realChannels_1_1.done && (_e = realChannels_1.return)) _e.call(realChannels_1);\r\n                        }\r\n                        finally { if (e_1) throw e_1.error; }\r\n                        return [7 /*endfinally*/];\r\n                    case 8: \r\n                    // TODO: 返回值处理\r\n                    return [2 /*return*/, Promise.all(prom).then(function () { return true; })];\r\n                    case 9:\r\n                        error_6 = _f.sent();\r\n                        throwError(error_6, 'Twitch.toggle');\r\n                        return [2 /*return*/, false];\r\n                    case 10: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return Twitch;\r\n}(Social));\r\nexport default Twitch;\r\n","/*\r\n * @Author       : HCLonely\r\n * @Date         : 2021-10-04 10:36:57\r\n * @LastEditTime : 2021-10-30 21:04:27\r\n * @LastEditors  : HCLonely\r\n * @FilePath     : /auto-task-new/src/scripts/social/Twitter.ts\r\n * @Description  : Twitter 关注/取关用户,转推/取消转推推文\r\n ! 功能验证\r\n */\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nimport Social from './Social';\r\nimport echoLog from '../echoLog';\r\nimport throwError from '../tools/throwError';\r\nimport httpRequest from '../tools/httpRequest';\r\nimport { unique, delay } from '../tools/tools';\r\nvar Twitter = /** @class */ (function (_super) {\r\n    __extends(Twitter, _super);\r\n    // TODO: 任务识别\r\n    function Twitter(id, verifyId) {\r\n        var _a;\r\n        var _this = _super.call(this) || this;\r\n        _this.verifyId = '783214';\r\n        _this.tasks = GM_getValue(\"Twitter-\" + id) || { users: [], retweets: [], likes: [] }; // eslint-disable-line new-cap\r\n        _this.whiteList = ((_a = GM_getValue('whiteList')) === null || _a === void 0 ? void 0 : _a.twitter) || { users: [], retweets: [], likes: [] }; // eslint-disable-line new-cap\r\n        _this.auth = GM_getValue('twitterAuth') || {}; // eslint-disable-line new-cap\r\n        if (verifyId) {\r\n            _this.verifyId = verifyId;\r\n        }\r\n        return _this;\r\n    }\r\n    // 通用化,log\r\n    Twitter.prototype.init = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var isVerified, error_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 5, , 6]);\r\n                        if (!!this.auth.ct0) return [3 /*break*/, 2];\r\n                        echoLog({ type: 'updateTwitterAuth' });\r\n                        return [4 /*yield*/, this.updateAuth()];\r\n                    case 1:\r\n                        if (_a.sent()) {\r\n                            this.initialized = true;\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        return [2 /*return*/, false];\r\n                    case 2: return [4 /*yield*/, this.verifyAuth()];\r\n                    case 3:\r\n                        isVerified = _a.sent();\r\n                        if (isVerified) {\r\n                            echoLog({ text: 'Init twitter success!' });\r\n                            this.initialized = true;\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        GM_setValue('twitterAuth', { auth: null }); // eslint-disable-line new-cap\r\n                        return [4 /*yield*/, this.updateAuth()];\r\n                    case 4:\r\n                        if (_a.sent()) {\r\n                            echoLog({ text: 'Init twitter success!' });\r\n                            this.initialized = true;\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        echoLog({ text: 'Init twitter failed!' });\r\n                        return [2 /*return*/, false];\r\n                    case 5:\r\n                        error_1 = _a.sent();\r\n                        throwError(error_1, 'Twitter.init');\r\n                        return [2 /*return*/, false];\r\n                    case 6: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Twitter.prototype.verifyAuth = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var error_2;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 2, , 3]);\r\n                        return [4 /*yield*/, this.toggleUser({ name: 'verify', doTask: true, verify: true })];\r\n                    case 1: return [2 /*return*/, _a.sent()];\r\n                    case 2:\r\n                        error_2 = _a.sent();\r\n                        throwError(error_2, 'Twitter.verifyAuth');\r\n                        return [2 /*return*/, false];\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    // TODO: 添加跳转\r\n    Twitter.prototype.updateAuth = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var logStatus_1, error_3;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 2, , 3]);\r\n                        logStatus_1 = echoLog({ type: 'text', text: 'updateTwitchAuth' });\r\n                        return [4 /*yield*/, new Promise(function (resolve) {\r\n                                var newTab = GM_openInTab('https://twitter.com/settings/account?k#auth', // eslint-disable-line new-cap\r\n                                { active: true, insert: true, setParent: true });\r\n                                newTab.onclose = function () { return __awaiter(_this, void 0, void 0, function () {\r\n                                    var auth, _a;\r\n                                    return __generator(this, function (_b) {\r\n                                        switch (_b.label) {\r\n                                            case 0:\r\n                                                auth = GM_getValue('twitterAuth');\r\n                                                if (!auth) return [3 /*break*/, 2];\r\n                                                this.auth = auth;\r\n                                                logStatus_1.success();\r\n                                                _a = resolve;\r\n                                                return [4 /*yield*/, this.verifyAuth()];\r\n                                            case 1:\r\n                                                _a.apply(void 0, [_b.sent()]);\r\n                                                return [3 /*break*/, 3];\r\n                                            case 2:\r\n                                                logStatus_1.error('Error: Update twitter auth failed!');\r\n                                                resolve(false);\r\n                                                _b.label = 3;\r\n                                            case 3: return [2 /*return*/];\r\n                                        }\r\n                                    });\r\n                                }); };\r\n                            })];\r\n                    case 1: return [2 /*return*/, _a.sent()];\r\n                    case 2:\r\n                        error_3 = _a.sent();\r\n                        throwError(error_3, 'Twitter.updateToken');\r\n                        return [2 /*return*/, false];\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Twitter.prototype.toggleUser = function (_a) {\r\n        var _b, _c, _d;\r\n        var name = _a.name, _e = _a.doTask, doTask = _e === void 0 ? true : _e, _f = _a.verify, verify = _f === void 0 ? false : _f;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var userId, _g, logStatus, _h, result, statusText, status_1, data, error_4;\r\n            return __generator(this, function (_j) {\r\n                switch (_j.label) {\r\n                    case 0:\r\n                        _j.trys.push([0, 5, , 6]);\r\n                        if (!doTask && !verify && this.whiteList.users.includes(name)) {\r\n                            // TODO: 直接echo\r\n                            echoLog({ type: 'whiteList', text: name });\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        if (!verify) return [3 /*break*/, 1];\r\n                        _g = this.verifyId;\r\n                        return [3 /*break*/, 3];\r\n                    case 1: return [4 /*yield*/, this.getUserId(name)];\r\n                    case 2:\r\n                        _g = (_j.sent());\r\n                        _j.label = 3;\r\n                    case 3:\r\n                        userId = _g;\r\n                        if (!userId)\r\n                            return [2 /*return*/, false];\r\n                        logStatus = verify ?\r\n                            echoLog({ type: 'text', text: 'verifyTwitterAuth' }) :\r\n                            echoLog({ type: (doTask ? '' : 'un') + \"followTwitterUser\", text: name });\r\n                        return [4 /*yield*/, httpRequest({\r\n                                url: \"https://api.twitter.com/1.1/friendships/\" + (doTask ? 'create' : 'destroy') + \".json\",\r\n                                method: 'POST',\r\n                                headers: {\r\n                                    authorization: 'Bearer AAAAAAAAAAAAAAAAAAAAANRILgAAAAAAnNwIzUejRCOuH5E6I8xnZz4puTs%3D1Zv7ttfk8LF81IUq16cHjhLTvJu4FA33AGWWjCpTnA',\r\n                                    'Content-Type': 'application/x-www-form-urlencoded',\r\n                                    'x-csrf-token': this.auth.ct0\r\n                                },\r\n                                responseType: 'json',\r\n                                /* eslint-disable camelcase */\r\n                                data: $.param({\r\n                                    include_profile_interstitial_type: 1,\r\n                                    include_blocking: 1,\r\n                                    include_blocked_by: 1,\r\n                                    include_followed_by: 1,\r\n                                    include_want_retweets: 1,\r\n                                    include_mute_edge: 1,\r\n                                    include_can_dm: 1,\r\n                                    include_can_media_tag: 1,\r\n                                    skip_status: 1,\r\n                                    id: userId\r\n                                })\r\n                                /* eslint-enable camelcase */\r\n                            })];\r\n                    case 4:\r\n                        _h = _j.sent(), result = _h.result, statusText = _h.statusText, status_1 = _h.status, data = _h.data;\r\n                        if (result === 'Success') {\r\n                            if ((data === null || data === void 0 ? void 0 : data.status) === 200) {\r\n                                logStatus.success();\r\n                                if (doTask && !verify) {\r\n                                    this.tasks.users = unique(__spreadArray(__spreadArray([], __read(this.tasks.users), false), [name], false));\r\n                                }\r\n                                return [2 /*return*/, true];\r\n                            }\r\n                            if (verify && (data === null || data === void 0 ? void 0 : data.status) === 403 && ((_d = (_c = (_b = data.response) === null || _b === void 0 ? void 0 : _b.errors) === null || _c === void 0 ? void 0 : _c[0]) === null || _d === void 0 ? void 0 : _d.code) === 158) {\r\n                                return [2 /*return*/, true];\r\n                            }\r\n                            logStatus.error(\"Error:\" + (data === null || data === void 0 ? void 0 : data.statusText) + \"(\" + (data === null || data === void 0 ? void 0 : data.status) + \")\");\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        logStatus.error(result + \":\" + statusText + \"(\" + status_1 + \")\");\r\n                        return [2 /*return*/, false];\r\n                    case 5:\r\n                        error_4 = _j.sent();\r\n                        throwError(error_4, 'Twitter.toggleUser');\r\n                        return [2 /*return*/, false];\r\n                    case 6: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Twitter.prototype.getUserId = function (name) {\r\n        var _a, _b;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var logStatus, _c, result, statusText, status_2, data, response, userId, error_5;\r\n            return __generator(this, function (_d) {\r\n                switch (_d.label) {\r\n                    case 0:\r\n                        _d.trys.push([0, 2, , 3]);\r\n                        logStatus = echoLog({ type: 'getTwitterUserId', text: name });\r\n                        return [4 /*yield*/, httpRequest({\r\n                                url: ('https://api.twitter.com/graphql/-xfUfZsnR_zqjFd-IfrN5A/UserByScreenName' +\r\n                                    (\"?variables=%7B%22screen_name%22%3A%22\" + name + \"%22%2C%22withHighlightedLabel%22%3Atrue%7D\")),\r\n                                method: 'GET',\r\n                                headers: {\r\n                                    authorization: 'Bearer AAAAAAAAAAAAAAAAAAAAANRILgAAAAAAnNwIzUejRCOuH5E6I8xnZz4puTs%3D1Zv7ttfk8LF81IUq16cHjhLTvJu4FA33AGWWjCpTnA',\r\n                                    'content-type': 'application/json'\r\n                                },\r\n                                responseType: 'json',\r\n                                anonymous: true\r\n                            })];\r\n                    case 1:\r\n                        _c = _d.sent(), result = _c.result, statusText = _c.statusText, status_2 = _c.status, data = _c.data;\r\n                        if (result === 'Success') {\r\n                            if ((data === null || data === void 0 ? void 0 : data.status) === 200) {\r\n                                response = data.response || (typeof data.responseText === 'object' ? data.responseText : null);\r\n                                if (!response) {\r\n                                    try {\r\n                                        response = JSON.parse(data.responseText);\r\n                                    }\r\n                                    catch (error) {\r\n                                        response = null;\r\n                                    }\r\n                                }\r\n                                userId = String((_b = (_a = response === null || response === void 0 ? void 0 : response.data) === null || _a === void 0 ? void 0 : _a.user) === null || _b === void 0 ? void 0 : _b.rest_id);\r\n                                if (userId) {\r\n                                    logStatus.success();\r\n                                    return [2 /*return*/, userId];\r\n                                }\r\n                                logStatus.error(\"Error:\" + data.statusText + \"(\" + data.status + \")\");\r\n                                return [2 /*return*/, false];\r\n                            }\r\n                            logStatus.error(\"Error:\" + (data === null || data === void 0 ? void 0 : data.statusText) + \"(\" + (data === null || data === void 0 ? void 0 : data.status) + \")\");\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        logStatus.error(result + \":\" + statusText + \"(\" + status_2 + \")\");\r\n                        return [2 /*return*/, false];\r\n                    case 2:\r\n                        error_5 = _d.sent();\r\n                        throwError(error_5, 'Twitter.getUserId');\r\n                        return [2 /*return*/, false];\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Twitter.prototype.toggleRetweet = function (_a) {\r\n        var _b, _c, _d;\r\n        var retweetId = _a.retweetId, _e = _a.doTask, doTask = _e === void 0 ? true : _e;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var logStatus, _f, result, statusText, status_3, data, error_6;\r\n            return __generator(this, function (_g) {\r\n                switch (_g.label) {\r\n                    case 0:\r\n                        _g.trys.push([0, 2, , 3]);\r\n                        if (!doTask && this.whiteList.retweets.includes(retweetId)) {\r\n                            // TODO: 直接echo\r\n                            echoLog({ type: 'whiteList', text: retweetId });\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        logStatus = echoLog({ type: (doTask ? '' : 'un') + \"retweet\", text: retweetId });\r\n                        return [4 /*yield*/, httpRequest({\r\n                                url: \"https://api.twitter.com/1.1/statuses/\" + (doTask ? '' : 'un') + \"retweet.json\",\r\n                                method: 'POST',\r\n                                headers: {\r\n                                    authorization: 'Bearer AAAAAAAAAAAAAAAAAAAAANRILgAAAAAAnNwIzUejRCOuH5E6I8xnZz4puTs%3D1Zv7ttfk8LF81IUq16cHjhLTvJu4FA33AGWWjCpTnA',\r\n                                    'Content-Type': 'application/x-www-form-urlencoded',\r\n                                    'x-csrf-token': this.auth.ct0\r\n                                },\r\n                                data: $.param({\r\n                                    tweet_mode: 'extended',\r\n                                    id: retweetId\r\n                                }),\r\n                                responseType: 'json'\r\n                            })];\r\n                    case 1:\r\n                        _f = _g.sent(), result = _f.result, statusText = _f.statusText, status_3 = _f.status, data = _f.data;\r\n                        if (result === 'Success') {\r\n                            if ((data === null || data === void 0 ? void 0 : data.status) === 200 || ((data === null || data === void 0 ? void 0 : data.status) === 403 && ((_d = (_c = (_b = data.response) === null || _b === void 0 ? void 0 : _b.errors) === null || _c === void 0 ? void 0 : _c[0]) === null || _d === void 0 ? void 0 : _d.code) === 327)) {\r\n                                logStatus.success();\r\n                                if (doTask)\r\n                                    this.tasks.retweets = unique(__spreadArray(__spreadArray([], __read(this.tasks.retweets), false), [retweetId], false));\r\n                                return [2 /*return*/, true];\r\n                            }\r\n                            logStatus.error(\"Error:\" + (data === null || data === void 0 ? void 0 : data.statusText) + \"(\" + (data === null || data === void 0 ? void 0 : data.status) + \")\");\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        logStatus.error(result + \":\" + statusText + \"(\" + status_3 + \")\");\r\n                        return [2 /*return*/, false];\r\n                    case 2:\r\n                        error_6 = _g.sent();\r\n                        throwError(error_6, 'Twitter.toggleRetweet');\r\n                        return [2 /*return*/, false];\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Twitter.prototype.toggle = function (_a) {\r\n        var _b = _a.doTask, doTask = _b === void 0 ? true : _b, _c = _a.users, users = _c === void 0 ? [] : _c, _d = _a.userLinks, userLinks = _d === void 0 ? [] : _d, _e = _a.retweets, retweets = _e === void 0 ? [] : _e, _f = _a.retweetLinks, retweetLinks = _f === void 0 ? [] : _f;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var prom, realUsers, realRetweets, realUsers_1, realUsers_1_1, user, e_1_1, realRetweets_1, realRetweets_1_1, retweet, e_2_1, error_7;\r\n            var e_1, _g, e_2, _h;\r\n            return __generator(this, function (_j) {\r\n                switch (_j.label) {\r\n                    case 0:\r\n                        _j.trys.push([0, 17, , 18]);\r\n                        if (!this.initialized) {\r\n                            echoLog({ type: 'text', text: '请先初始化' });\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        prom = [];\r\n                        realUsers = this.getRealParams('users', users, userLinks, doTask, function (link) { var _a; return (_a = link.match(/https:\\/\\/twitter\\.com\\/(.+)/)) === null || _a === void 0 ? void 0 : _a[1]; });\r\n                        realRetweets = this.getRealParams('retweets', retweets, retweetLinks, doTask, function (link) { var _a; return (_a = link.match(/https:\\/\\/twitter\\.com\\/.*?\\/status\\/([\\d]+)/)) === null || _a === void 0 ? void 0 : _a[1]; });\r\n                        if (!(realUsers.length > 0)) return [3 /*break*/, 8];\r\n                        _j.label = 1;\r\n                    case 1:\r\n                        _j.trys.push([1, 6, 7, 8]);\r\n                        realUsers_1 = __values(realUsers), realUsers_1_1 = realUsers_1.next();\r\n                        _j.label = 2;\r\n                    case 2:\r\n                        if (!!realUsers_1_1.done) return [3 /*break*/, 5];\r\n                        user = realUsers_1_1.value;\r\n                        prom.push(this.toggleUser({ name: user, doTask: doTask }));\r\n                        return [4 /*yield*/, delay(1000)];\r\n                    case 3:\r\n                        _j.sent();\r\n                        _j.label = 4;\r\n                    case 4:\r\n                        realUsers_1_1 = realUsers_1.next();\r\n                        return [3 /*break*/, 2];\r\n                    case 5: return [3 /*break*/, 8];\r\n                    case 6:\r\n                        e_1_1 = _j.sent();\r\n                        e_1 = { error: e_1_1 };\r\n                        return [3 /*break*/, 8];\r\n                    case 7:\r\n                        try {\r\n                            if (realUsers_1_1 && !realUsers_1_1.done && (_g = realUsers_1.return)) _g.call(realUsers_1);\r\n                        }\r\n                        finally { if (e_1) throw e_1.error; }\r\n                        return [7 /*endfinally*/];\r\n                    case 8:\r\n                        if (!(realRetweets.length > 0)) return [3 /*break*/, 16];\r\n                        _j.label = 9;\r\n                    case 9:\r\n                        _j.trys.push([9, 14, 15, 16]);\r\n                        realRetweets_1 = __values(realRetweets), realRetweets_1_1 = realRetweets_1.next();\r\n                        _j.label = 10;\r\n                    case 10:\r\n                        if (!!realRetweets_1_1.done) return [3 /*break*/, 13];\r\n                        retweet = realRetweets_1_1.value;\r\n                        prom.push(this.toggleRetweet({ retweetId: retweet, doTask: doTask }));\r\n                        return [4 /*yield*/, delay(1000)];\r\n                    case 11:\r\n                        _j.sent();\r\n                        _j.label = 12;\r\n                    case 12:\r\n                        realRetweets_1_1 = realRetweets_1.next();\r\n                        return [3 /*break*/, 10];\r\n                    case 13: return [3 /*break*/, 16];\r\n                    case 14:\r\n                        e_2_1 = _j.sent();\r\n                        e_2 = { error: e_2_1 };\r\n                        return [3 /*break*/, 16];\r\n                    case 15:\r\n                        try {\r\n                            if (realRetweets_1_1 && !realRetweets_1_1.done && (_h = realRetweets_1.return)) _h.call(realRetweets_1);\r\n                        }\r\n                        finally { if (e_2) throw e_2.error; }\r\n                        return [7 /*endfinally*/];\r\n                    case 16: \r\n                    // TODO: 返回值处理\r\n                    return [2 /*return*/, Promise.all(prom).then(function () { return true; })];\r\n                    case 17:\r\n                        error_7 = _j.sent();\r\n                        throwError(error_7, 'Twitch.toggle');\r\n                        return [2 /*return*/, false];\r\n                    case 18: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return Twitter;\r\n}(Social));\r\nexport default Twitter;\r\n","/*\r\n * @Author       : HCLonely\r\n * @Date         : 2021-10-04 11:47:59\r\n * @LastEditTime : 2021-10-30 21:06:13\r\n * @LastEditors  : HCLonely\r\n * @FilePath     : /auto-task-new/src/scripts/social/Vk.ts\r\n * @Description  : Vk 加入/退出群组，关注/取关用户，转发动态\r\n ! 取消转发动态\r\n */\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nimport Social from './Social';\r\nimport echoLog from '../echoLog';\r\nimport throwError from '../tools/throwError';\r\nimport httpRequest from '../tools/httpRequest';\r\nimport getI18n from '../i18n/i18n';\r\nimport { unique, delay } from '../tools/tools';\r\nvar Vk = /** @class */ (function (_super) {\r\n    __extends(Vk, _super);\r\n    // TODO: 任务识别\r\n    function Vk(id) {\r\n        var _a;\r\n        var _this = _super.call(this) || this;\r\n        _this.username = '';\r\n        _this.tasks = GM_getValue(\"Vk-\" + id) || { names: [] }; // eslint-disable-line new-cap\r\n        _this.whiteList = ((_a = GM_getValue('whiteList')) === null || _a === void 0 ? void 0 : _a.vk) || { names: [] }; // eslint-disable-line new-cap\r\n        _this.cache = GM_getValue('vkCache') || {}; // eslint-disable-line new-cap\r\n        return _this;\r\n    }\r\n    // 通用化,log\r\n    Vk.prototype.init = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var isVerified, error_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 2, , 3]);\r\n                        return [4 /*yield*/, this.verifyAuth()];\r\n                    case 1:\r\n                        isVerified = _a.sent();\r\n                        if (isVerified) {\r\n                            echoLog({ text: 'Init vk success!' });\r\n                            this.initialized = true;\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        echoLog({ text: 'Init vk failed!' });\r\n                        return [2 /*return*/, false];\r\n                    case 2:\r\n                        error_1 = _a.sent();\r\n                        throwError(error_1, 'Vk.init');\r\n                        return [2 /*return*/, false];\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Vk.prototype.verifyAuth = function () {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var logStatus, _b, result, statusText, status_1, data, error_2;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        _c.trys.push([0, 2, , 3]);\r\n                        logStatus = echoLog({ type: 'text', text: 'verifyVkLogin' });\r\n                        return [4 /*yield*/, httpRequest({\r\n                                url: 'https://vk.com/im',\r\n                                method: 'GET'\r\n                            })];\r\n                    case 1:\r\n                        _b = _c.sent(), result = _b.result, statusText = _b.statusText, status_1 = _b.status, data = _b.data;\r\n                        if (result === 'Success') {\r\n                            if (data === null || data === void 0 ? void 0 : data.finalUrl.includes('vk.com/login')) {\r\n                                logStatus.error(\"Error:\" + getI18n('loginVk'), true);\r\n                                return [2 /*return*/, false];\r\n                            }\r\n                            if ((data === null || data === void 0 ? void 0 : data.status) === 200) {\r\n                                this.username = ((_a = data.responseText.match(/TopNavBtn__profileLink\" href=\"\\/(.*?)\"/)) === null || _a === void 0 ? void 0 : _a[1]) || '';\r\n                                logStatus.success();\r\n                                return [2 /*return*/, true];\r\n                            }\r\n                            logStatus.error(\"Error:\" + (data === null || data === void 0 ? void 0 : data.statusText) + \"(\" + (data === null || data === void 0 ? void 0 : data.status) + \")\");\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        logStatus.error(result + \":\" + statusText + \"(\" + status_1 + \")\");\r\n                        return [2 /*return*/, false];\r\n                    case 2:\r\n                        error_2 = _c.sent();\r\n                        throwError(error_2, 'Vk.verifyAuth');\r\n                        return [2 /*return*/, false];\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Vk.prototype.toggleGroup = function (name, dataParam, doTask) {\r\n        if (doTask === void 0) { doTask = true; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var logStatus, reqData, _a, result, statusText, status_2, data, error_3;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _b.trys.push([0, 2, , 3]);\r\n                        logStatus = echoLog({ type: doTask ? 'joinVkGroup' : 'leaveVkGroup', text: name });\r\n                        if ((dataParam.groupAct === 'enter' && !doTask) || (dataParam.groupAct === 'leave' && doTask)) {\r\n                            logStatus.success();\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        reqData = {\r\n                            act: doTask ? 'enter' : 'leave',\r\n                            al: 1,\r\n                            gid: dataParam.groupId,\r\n                            hash: dataParam.groupHash\r\n                        };\r\n                        if (doTask)\r\n                            reqData.context = '_';\r\n                        return [4 /*yield*/, httpRequest({\r\n                                url: 'https://vk.com/al_groups.php',\r\n                                method: 'POST',\r\n                                headers: {\r\n                                    origin: 'https://vk.com',\r\n                                    referer: \"https://vk.com/\" + name,\r\n                                    'content-type': 'application/x-www-form-urlencoded'\r\n                                },\r\n                                data: $.param(reqData)\r\n                            })];\r\n                    case 1:\r\n                        _a = _b.sent(), result = _a.result, statusText = _a.statusText, status_2 = _a.status, data = _a.data;\r\n                        if (result === 'Success') {\r\n                            if ((data === null || data === void 0 ? void 0 : data.status) === 200) {\r\n                                logStatus.success();\r\n                                if (doTask)\r\n                                    this.tasks.names = unique(__spreadArray(__spreadArray([], __read(this.tasks.names), false), [name], false));\r\n                                return [2 /*return*/, true];\r\n                            }\r\n                            logStatus.error(\"Error:\" + (data === null || data === void 0 ? void 0 : data.statusText) + \"(\" + (data === null || data === void 0 ? void 0 : data.status) + \")\");\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        logStatus.error(result + \":\" + statusText + \"(\" + status_2 + \")\");\r\n                        return [2 /*return*/, false];\r\n                    case 2:\r\n                        error_3 = _b.sent();\r\n                        throwError(error_3, 'Vk.toggleGroup');\r\n                        return [2 /*return*/, false];\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Vk.prototype.togglePublic = function (name, dataParam, doTask) {\r\n        if (doTask === void 0) { doTask = true; }\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var logStatus, _a, result, statusText, status_3, data, error_4;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _b.trys.push([0, 2, , 3]);\r\n                        logStatus = echoLog({ type: doTask ? 'joinVkPublic' : 'leaveVkPublic', text: name });\r\n                        if ((dataParam.publicJoined && doTask) || (!dataParam.publicJoined && !doTask)) {\r\n                            logStatus.success();\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        return [4 /*yield*/, httpRequest({\r\n                                url: 'https://vk.com/al_public.php',\r\n                                method: 'POST',\r\n                                headers: {\r\n                                    origin: 'https://vk.com',\r\n                                    referer: \"https://vk.com/\" + name,\r\n                                    'content-type': 'application/x-www-form-urlencoded'\r\n                                },\r\n                                data: $.param({\r\n                                    act: doTask ? 'a_enter' : 'a_leave',\r\n                                    al: 1,\r\n                                    pid: dataParam.publicPid,\r\n                                    hash: dataParam.publicHash\r\n                                })\r\n                            })];\r\n                    case 1:\r\n                        _a = _b.sent(), result = _a.result, statusText = _a.statusText, status_3 = _a.status, data = _a.data;\r\n                        if (result === 'Success') {\r\n                            if ((data === null || data === void 0 ? void 0 : data.status) === 200) {\r\n                                logStatus.success();\r\n                                if (doTask)\r\n                                    this.tasks.names = unique(__spreadArray(__spreadArray([], __read(this.tasks.names), false), [name], false));\r\n                                return [2 /*return*/, true];\r\n                            }\r\n                            logStatus.error(\"Error:\" + (data === null || data === void 0 ? void 0 : data.statusText) + \"(\" + (data === null || data === void 0 ? void 0 : data.status) + \")\");\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        logStatus.error(result + \":\" + statusText + \"(\" + status_3 + \")\");\r\n                        return [2 /*return*/, false];\r\n                    case 2:\r\n                        error_4 = _b.sent();\r\n                        throwError(error_4, 'Vk.togglePublic');\r\n                        return [2 /*return*/, false];\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Vk.prototype.sendWall = function (name) {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var logStatus, _m, result, statusText, status_4, data, hash, _o, resultR, statusTextR, statusR, dataR, jsonData, postId, ownerId, error_5;\r\n            return __generator(this, function (_p) {\r\n                switch (_p.label) {\r\n                    case 0:\r\n                        _p.trys.push([0, 6, , 7]);\r\n                        logStatus = echoLog({ type: 'sendVkWall', text: name });\r\n                        return [4 /*yield*/, httpRequest({\r\n                                url: 'https://vk.com/like.php',\r\n                                method: 'POST',\r\n                                headers: {\r\n                                    origin: 'https://vk.com',\r\n                                    referer: \"https://vk.com/\" + name,\r\n                                    'content-type': 'application/x-www-form-urlencoded'\r\n                                },\r\n                                data: $.param({\r\n                                    act: 'publish_box',\r\n                                    al: 1,\r\n                                    object: name\r\n                                })\r\n                            })];\r\n                    case 1:\r\n                        _m = _p.sent(), result = _m.result, statusText = _m.statusText, status_4 = _m.status, data = _m.data;\r\n                        if (!(result === 'Success')) return [3 /*break*/, 5];\r\n                        if (!((data === null || data === void 0 ? void 0 : data.status) === 200)) return [3 /*break*/, 4];\r\n                        hash = (_a = data.responseText.match(/shHash:[\\s]*'(.*?)'/)) === null || _a === void 0 ? void 0 : _a[1];\r\n                        if (!hash) return [3 /*break*/, 3];\r\n                        return [4 /*yield*/, httpRequest({\r\n                                url: 'https://vk.com/like.php',\r\n                                method: 'POST',\r\n                                headers: {\r\n                                    origin: 'https://vk.com',\r\n                                    referer: \"https://vk.com/\" + name,\r\n                                    'content-type': 'application/x-www-form-urlencoded'\r\n                                },\r\n                                /* eslint-disable camelcase */\r\n                                data: $.param({\r\n                                    Message: '',\r\n                                    act: 'a_do_publish',\r\n                                    al: 1,\r\n                                    close_comments: 0,\r\n                                    friends_only: 0,\r\n                                    from: 'box',\r\n                                    hash: hash,\r\n                                    list: '',\r\n                                    mark_as_ads: 0,\r\n                                    mute_notifications: 0,\r\n                                    object: name,\r\n                                    ret_data: 1,\r\n                                    to: 0\r\n                                })\r\n                                /* eslint-enable camelcase */\r\n                            })];\r\n                    case 2:\r\n                        _o = _p.sent(), resultR = _o.result, statusTextR = _o.statusText, statusR = _o.status, dataR = _o.data;\r\n                        if (resultR === 'Success') {\r\n                            if ((dataR === null || dataR === void 0 ? void 0 : dataR.status) === 200) {\r\n                                jsonData = JSON.parse(((_b = dataR.responseText) === null || _b === void 0 ? void 0 : _b.replace('<!--', '')) || '{}');\r\n                                if (((_e = (_d = (_c = jsonData === null || jsonData === void 0 ? void 0 : jsonData.payload) === null || _c === void 0 ? void 0 : _c[1]) === null || _d === void 0 ? void 0 : _d[1]) === null || _e === void 0 ? void 0 : _e.share_my) === true) { // eslint-disable-line camelcase\r\n                                    logStatus.success();\r\n                                    postId = String((_h = (_g = (_f = jsonData === null || jsonData === void 0 ? void 0 : jsonData.payload) === null || _f === void 0 ? void 0 : _f[1]) === null || _g === void 0 ? void 0 : _g[1]) === null || _h === void 0 ? void 0 : _h.post_id);\r\n                                    ownerId = String((_l = (_k = (_j = jsonData === null || jsonData === void 0 ? void 0 : jsonData.payload) === null || _j === void 0 ? void 0 : _j[1]) === null || _k === void 0 ? void 0 : _k[1]) === null || _l === void 0 ? void 0 : _l.owner_id);\r\n                                    if (postId && ownerId) {\r\n                                        // TODO: 优化\r\n                                        this.addId(name, ownerId + \"_\" + postId);\r\n                                    }\r\n                                    this.tasks.names = unique(__spreadArray(__spreadArray([], __read(this.tasks.names), false), [name], false));\r\n                                    return [2 /*return*/, true];\r\n                                }\r\n                            }\r\n                            logStatus.error(\"Error:\" + (dataR === null || dataR === void 0 ? void 0 : dataR.statusText) + \"(\" + (dataR === null || dataR === void 0 ? void 0 : dataR.status) + \")\");\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        logStatus.error(resultR + \":\" + statusTextR + \"(\" + statusR + \")\");\r\n                        return [2 /*return*/, false];\r\n                    case 3:\r\n                        logStatus.error('Error: Get \"hash\" failed');\r\n                        return [2 /*return*/, false];\r\n                    case 4:\r\n                        logStatus.error(\"Error:\" + (data === null || data === void 0 ? void 0 : data.statusText) + \"(\" + (data === null || data === void 0 ? void 0 : data.status) + \")\");\r\n                        return [2 /*return*/, false];\r\n                    case 5:\r\n                        logStatus.error(result + \":\" + statusText + \"(\" + status_4 + \")\");\r\n                        return [2 /*return*/, false];\r\n                    case 6:\r\n                        error_5 = _p.sent();\r\n                        throwError(error_5, 'Vk.sendWall');\r\n                        return [2 /*return*/, false];\r\n                    case 7: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Vk.prototype.deleteWall = function (name, dataParams) {\r\n        var _a, _b, _c;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var logStatus, _d, result, statusText, status_5, data, jsonData, error_6;\r\n            return __generator(this, function (_e) {\r\n                switch (_e.label) {\r\n                    case 0:\r\n                        _e.trys.push([0, 2, , 3]);\r\n                        logStatus = echoLog({ type: 'deleteVkWall', text: name });\r\n                        return [4 /*yield*/, httpRequest({\r\n                                url: 'https://vk.com/al_wall.php?act=delete',\r\n                                method: 'POST',\r\n                                headers: {\r\n                                    origin: 'https://vk.com',\r\n                                    referer: \"https://vk.com/\" + this.username + \"?w=wall\" + this.cache[name] + \"%2Fall\",\r\n                                    'content-type': 'application/x-www-form-urlencoded'\r\n                                },\r\n                                data: $.param({\r\n                                    act: 'delete',\r\n                                    al: 1,\r\n                                    confirm: 0,\r\n                                    from: 'wkview',\r\n                                    hash: dataParams.wallHash,\r\n                                    post: this.cache[name]\r\n                                })\r\n                            })];\r\n                    case 1:\r\n                        _d = _e.sent(), result = _d.result, statusText = _d.statusText, status_5 = _d.status, data = _d.data;\r\n                        if (result === 'Success') {\r\n                            if ((data === null || data === void 0 ? void 0 : data.status) === 200) {\r\n                                jsonData = JSON.parse(((_a = data.responseText) === null || _a === void 0 ? void 0 : _a.replace('<!--', '')) || '{}');\r\n                                if ((_c = (_b = jsonData === null || jsonData === void 0 ? void 0 : jsonData.payload) === null || _b === void 0 ? void 0 : _b[1]) === null || _c === void 0 ? void 0 : _c[1]) {\r\n                                    logStatus.success();\r\n                                    return [2 /*return*/, true];\r\n                                }\r\n                                logStatus.error(\"Error:\" + (data === null || data === void 0 ? void 0 : data.statusText) + \"(\" + (data === null || data === void 0 ? void 0 : data.status) + \")\");\r\n                                return [2 /*return*/, false];\r\n                            }\r\n                            logStatus.error(\"Error:\" + (data === null || data === void 0 ? void 0 : data.statusText) + \"(\" + (data === null || data === void 0 ? void 0 : data.status) + \")\");\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        logStatus.error(result + \":\" + statusText + \"(\" + status_5 + \")\");\r\n                        return [2 /*return*/, false];\r\n                    case 2:\r\n                        error_6 = _e.sent();\r\n                        throwError(error_6, 'Vk.deleteWall');\r\n                        return [2 /*return*/, false];\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Vk.prototype.getId = function (name, doTask) {\r\n        var _a, _b, _c;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var url, logStatus, _d, result, statusText, status_6, data, _e, groupAct, groupId, groupHash, publicHash, publicPid, publicJoined, wallHash, error_7;\r\n            return __generator(this, function (_f) {\r\n                switch (_f.label) {\r\n                    case 0:\r\n                        _f.trys.push([0, 2, , 3]);\r\n                        url = \"https://vk.com/\" + name;\r\n                        if (/^wall-/.test(name)) {\r\n                            if (doTask) {\r\n                                return [2 /*return*/, { type: 'sendWall' }];\r\n                            }\r\n                            if (!this.cache[name]) {\r\n                                return [2 /*return*/, { type: 'unSupport' }];\r\n                            }\r\n                            url = \"https://vk.com/\" + this.username + \"?w=wall\" + this.cache[name];\r\n                        }\r\n                        logStatus = echoLog({ type: 'getVkId', text: name });\r\n                        return [4 /*yield*/, httpRequest({\r\n                                url: url,\r\n                                method: 'GET'\r\n                            })];\r\n                    case 1:\r\n                        _d = _f.sent(), result = _d.result, statusText = _d.statusText, status_6 = _d.status, data = _d.data;\r\n                        if (result === 'Success') {\r\n                            if ((data === null || data === void 0 ? void 0 : data.status) === 200) {\r\n                                _e = __read(data.responseText.match(/Groups.(enter|leave)\\(.*?,.*?([\\d]+?), '(.*?)'/) || [], 4), groupAct = _e[1], groupId = _e[2], groupHash = _e[3];\r\n                                publicHash = (_a = data.responseText.match(/\"enterHash\":\"(.*?)\"/)) === null || _a === void 0 ? void 0 : _a[1];\r\n                                publicPid = (_b = data.responseText.match(/\"public_id\":([\\d]+?),/)) === null || _b === void 0 ? void 0 : _b[1];\r\n                                publicJoined = !data.responseText.includes('Public.subscribe');\r\n                                if (groupAct && groupId && groupHash) {\r\n                                    logStatus.success();\r\n                                    return [2 /*return*/, { groupAct: groupAct, groupId: groupId, groupHash: groupHash, type: 'group' }];\r\n                                }\r\n                                else if (publicHash && publicPid) {\r\n                                    logStatus.success();\r\n                                    return [2 /*return*/, { publicHash: publicHash, publicPid: publicPid, publicJoined: publicJoined, type: 'public' }];\r\n                                }\r\n                                else if (data.responseText.includes('wall.deletePost') && !doTask) {\r\n                                    wallHash = (_c = data.responseText.match(/wall\\.deletePost\\(this, '.*?', '(.*?)'\\)/)) === null || _c === void 0 ? void 0 : _c[1];\r\n                                    if (wallHash) {\r\n                                        logStatus.success();\r\n                                        return [2 /*return*/, { type: 'deleteWall', wallHash: wallHash }];\r\n                                    }\r\n                                }\r\n                                else if (name.includes('wall') && doTask) {\r\n                                    logStatus.success();\r\n                                    return [2 /*return*/, { type: 'sendWall' }];\r\n                                }\r\n                                logStatus.error('Error: Parameters not found!');\r\n                                return [2 /*return*/, false];\r\n                            }\r\n                            logStatus.error(\"Error:\" + (data === null || data === void 0 ? void 0 : data.statusText) + \"(\" + (data === null || data === void 0 ? void 0 : data.status) + \")\");\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        logStatus.error(result + \":\" + statusText + \"(\" + status_6 + \")\");\r\n                        return [2 /*return*/, false];\r\n                    case 2:\r\n                        error_7 = _f.sent();\r\n                        throwError(error_7, 'Vk.getId');\r\n                        return [2 /*return*/, false];\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Vk.prototype.toggleVk = function (_a) {\r\n        var name = _a.name, _b = _a.doTask, doTask = _b === void 0 ? true : _b;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var formatName, data, _c, _d, _e, error_8;\r\n            return __generator(this, function (_f) {\r\n                switch (_f.label) {\r\n                    case 0:\r\n                        _f.trys.push([0, 16, , 17]);\r\n                        if (!doTask && this.whiteList.names.includes(name)) {\r\n                            // TODO: 直接echo\r\n                            echoLog({ type: 'whiteList', text: name });\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        formatName = name.replace(/\\/$/, '');\r\n                        return [4 /*yield*/, this.getId(formatName, doTask)];\r\n                    case 1:\r\n                        data = _f.sent();\r\n                        if (!data)\r\n                            return [2 /*return*/, false];\r\n                        _c = data.type;\r\n                        switch (_c) {\r\n                            case 'group': return [3 /*break*/, 2];\r\n                            case 'public': return [3 /*break*/, 4];\r\n                            case 'sendWall': return [3 /*break*/, 6];\r\n                            case 'deleteWall': return [3 /*break*/, 10];\r\n                        }\r\n                        return [3 /*break*/, 14];\r\n                    case 2: return [4 /*yield*/, this.toggleGroup(formatName, data, doTask)];\r\n                    case 3: return [2 /*return*/, _f.sent()];\r\n                    case 4: return [4 /*yield*/, this.togglePublic(formatName, data, doTask)];\r\n                    case 5: return [2 /*return*/, _f.sent()];\r\n                    case 6:\r\n                        if (!doTask) return [3 /*break*/, 8];\r\n                        return [4 /*yield*/, this.sendWall(formatName)];\r\n                    case 7:\r\n                        _d = _f.sent();\r\n                        return [3 /*break*/, 9];\r\n                    case 8:\r\n                        _d = true;\r\n                        _f.label = 9;\r\n                    case 9: return [2 /*return*/, _d];\r\n                    case 10:\r\n                        if (!doTask) return [3 /*break*/, 11];\r\n                        _e = true;\r\n                        return [3 /*break*/, 13];\r\n                    case 11: return [4 /*yield*/, this.deleteWall(formatName, data)];\r\n                    case 12:\r\n                        _e = _f.sent();\r\n                        _f.label = 13;\r\n                    case 13: return [2 /*return*/, _e];\r\n                    case 14: return [2 /*return*/, false];\r\n                    case 15: return [3 /*break*/, 17];\r\n                    case 16:\r\n                        error_8 = _f.sent();\r\n                        throwError(error_8, 'Vk.toggleVk');\r\n                        return [2 /*return*/, false];\r\n                    case 17: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Vk.prototype.toggle = function (_a) {\r\n        var _b = _a.doTask, doTask = _b === void 0 ? true : _b, _c = _a.names, names = _c === void 0 ? [] : _c, _d = _a.nameLinks, nameLinks = _d === void 0 ? [] : _d;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var prom, realNames, realNames_1, realNames_1_1, name_1, e_1_1, error_9;\r\n            var e_1, _e;\r\n            return __generator(this, function (_f) {\r\n                switch (_f.label) {\r\n                    case 0:\r\n                        _f.trys.push([0, 9, , 10]);\r\n                        if (!this.initialized) {\r\n                            echoLog({ type: 'text', text: '请先初始化' });\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        prom = [];\r\n                        realNames = this.getRealParams('names', names, nameLinks, doTask, function (link) { var _a; return (_a = link.match(/https:\\/\\/vk\\.com\\/([^/]+)/)) === null || _a === void 0 ? void 0 : _a[1]; });\r\n                        if (!(realNames.length > 0)) return [3 /*break*/, 8];\r\n                        _f.label = 1;\r\n                    case 1:\r\n                        _f.trys.push([1, 6, 7, 8]);\r\n                        realNames_1 = __values(realNames), realNames_1_1 = realNames_1.next();\r\n                        _f.label = 2;\r\n                    case 2:\r\n                        if (!!realNames_1_1.done) return [3 /*break*/, 5];\r\n                        name_1 = realNames_1_1.value;\r\n                        prom.push(this.toggleVk({ name: name_1, doTask: doTask }));\r\n                        return [4 /*yield*/, delay(1000)];\r\n                    case 3:\r\n                        _f.sent();\r\n                        _f.label = 4;\r\n                    case 4:\r\n                        realNames_1_1 = realNames_1.next();\r\n                        return [3 /*break*/, 2];\r\n                    case 5: return [3 /*break*/, 8];\r\n                    case 6:\r\n                        e_1_1 = _f.sent();\r\n                        e_1 = { error: e_1_1 };\r\n                        return [3 /*break*/, 8];\r\n                    case 7:\r\n                        try {\r\n                            if (realNames_1_1 && !realNames_1_1.done && (_e = realNames_1.return)) _e.call(realNames_1);\r\n                        }\r\n                        finally { if (e_1) throw e_1.error; }\r\n                        return [7 /*endfinally*/];\r\n                    case 8: \r\n                    // TODO: 返回值处理\r\n                    return [2 /*return*/, Promise.all(prom).then(function () { return true; })];\r\n                    case 9:\r\n                        error_9 = _f.sent();\r\n                        throwError(error_9, 'Vk.toggle');\r\n                        return [2 /*return*/, false];\r\n                    case 10: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Vk.prototype.addId = function (name, postId) {\r\n        this.cache[name] = postId;\r\n        GM_setValue('vkCache', this.cache); // eslint-disable-line new-cap\r\n    };\r\n    return Vk;\r\n}(Social));\r\nexport default Vk;\r\n","/*\r\n * @Author       : HCLonely\r\n * @Date         : 2021-10-04 12:18:06\r\n * @LastEditTime : 2021-10-30 21:04:41\r\n * @LastEditors  : HCLonely\r\n * @FilePath     : /auto-task-new/src/scripts/social/Youtube.ts\r\n * @Description  : Youtube 订阅/取消订阅频道，点赞/取消点赞视频\r\n */\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __read = (this && this.__read) || function (o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nimport Social from './Social';\r\nimport echoLog from '../echoLog';\r\nimport throwError from '../tools/throwError';\r\nimport httpRequest from '../tools/httpRequest';\r\nimport getI18n from '../i18n/i18n';\r\nimport { unique, delay } from '../tools/tools';\r\nvar Youtube = /** @class */ (function (_super) {\r\n    __extends(Youtube, _super);\r\n    // TODO: 任务识别\r\n    function Youtube(id) {\r\n        var _a;\r\n        var _this = _super.call(this) || this;\r\n        _this.tasks = GM_getValue(\"Youtube-\" + id) || { channels: [], likes: [] }; // eslint-disable-line new-cap\r\n        _this.whiteList = ((_a = GM_getValue('whiteList')) === null || _a === void 0 ? void 0 : _a.youtube) || { channels: [], likes: [] }; // eslint-disable-line new-cap\r\n        _this.auth = GM_getValue('youtubeAuth') || {}; // eslint-disable-line new-cap\r\n        return _this;\r\n    }\r\n    // 通用化,log\r\n    Youtube.prototype.init = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var isVerified;\r\n            return __generator(this, function (_a) {\r\n                try {\r\n                    isVerified = false;\r\n                    if (isVerified) {\r\n                        echoLog({ text: 'Init youtube success!' });\r\n                        this.initialized = true;\r\n                        return [2 /*return*/, true];\r\n                    }\r\n                    echoLog({ text: 'Init youtube failed!' });\r\n                    return [2 /*return*/, false];\r\n                }\r\n                catch (error) {\r\n                    throwError(error, 'Youtube.init');\r\n                    return [2 /*return*/, false];\r\n                }\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    Youtube.prototype.getInfo = function (link, type) {\r\n        var _a, _b, _c, _d, _e;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var logStatus, _f, result, statusText, status_1, data, apiKey, context, _g, client, request, channelId, videoId, likeParams, error_1;\r\n            return __generator(this, function (_h) {\r\n                switch (_h.label) {\r\n                    case 0:\r\n                        _h.trys.push([0, 2, , 3]);\r\n                        logStatus = echoLog({ type: 'text', text: 'getYtbToken' });\r\n                        return [4 /*yield*/, httpRequest({\r\n                                url: link,\r\n                                method: 'GET'\r\n                            })];\r\n                    case 1:\r\n                        _f = _h.sent(), result = _f.result, statusText = _f.statusText, status_1 = _f.status, data = _f.data;\r\n                        if (result === 'Success') {\r\n                            if ((data === null || data === void 0 ? void 0 : data.status) === 200) {\r\n                                if (data.responseText.includes('accounts.google.com/ServiceLogin?service=youtube')) {\r\n                                    logStatus.error(\"Error:\" + getI18n('loginYtb'), true);\r\n                                    return [2 /*return*/, { needLogin: true }];\r\n                                }\r\n                                apiKey = (_a = data.responseText.match(/\"INNERTUBE_API_KEY\":\"(.*?)\"/)) === null || _a === void 0 ? void 0 : _a[1];\r\n                                context = (((_b = (data.responseText.match(/\\(\\{\"INNERTUBE_CONTEXT\":([\\w\\W]*?)\\}\\)/) ||\r\n                                    data.responseText.match(/\"INNERTUBE_CONTEXT\":([\\w\\W]*?\\}),\"INNERTUBE/))) === null || _b === void 0 ? void 0 : _b[1]) || '{}');\r\n                                _g = JSON.parse(context), client = _g.client, request = _g.request;\r\n                                if (apiKey && client && request) {\r\n                                    client.hl = 'en';\r\n                                    if (type === 'channel') {\r\n                                        channelId = (_c = data.responseText.match(/<meta itemprop=\"channelId\" content=\"(.+?)\">/)) === null || _c === void 0 ? void 0 : _c[1];\r\n                                        if (channelId) {\r\n                                            logStatus.success();\r\n                                            return [2 /*return*/, { params: { apiKey: apiKey, client: client, request: request, channelId: channelId } }];\r\n                                        }\r\n                                        logStatus.error('Error: Get \"channelId\" failed!');\r\n                                        return [2 /*return*/, {}];\r\n                                    }\r\n                                    else if (type === 'likeVideo') {\r\n                                        videoId = (_d = data.responseText.match(/<link rel=\"shortlinkUrl\" href=\"https:\\/\\/youtu\\.be\\/(.*?)\">/)) === null || _d === void 0 ? void 0 : _d[1];\r\n                                        likeParams = (_e = data.responseText.match(/\"likeParams\":\"(.*?)\"/)) === null || _e === void 0 ? void 0 : _e[1];\r\n                                        if (videoId) {\r\n                                            logStatus.success();\r\n                                            return [2 /*return*/, { params: { apiKey: apiKey, client: client, request: request, videoId: videoId, likeParams: likeParams } }];\r\n                                        }\r\n                                        logStatus.error('Error: Get \"videoId\" failed!');\r\n                                        return [2 /*return*/, {}];\r\n                                    }\r\n                                    logStatus.error('Error: Unknown type');\r\n                                    return [2 /*return*/, {}];\r\n                                }\r\n                                logStatus.error('Error: Parameter \"apiKey\" not found!');\r\n                                return [2 /*return*/, {}];\r\n                            }\r\n                            logStatus.error(\"Error:\" + (data === null || data === void 0 ? void 0 : data.statusText) + \"(\" + (data === null || data === void 0 ? void 0 : data.status) + \")\");\r\n                            return [2 /*return*/, {}];\r\n                        }\r\n                        logStatus.error(result + \":\" + statusText + \"(\" + status_1 + \")\");\r\n                        return [2 /*return*/, {}];\r\n                    case 2:\r\n                        error_1 = _h.sent();\r\n                        throwError(error_1, 'Youtube.getInfo');\r\n                        return [2 /*return*/, {}];\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Youtube.prototype.getToken = function (notice) {\r\n        try {\r\n            var PAPISID = Cookies.get('__Secure-3PAPISID');\r\n            if (PAPISID) {\r\n                this.auth.PAPISID = PAPISID;\r\n                GM_setValue('youtubeInfo', this.auth); // eslint-disable-line new-cap\r\n                if (notice) {\r\n                    Swal.fire({\r\n                        title: getI18n('updateYtbInfoSuccess'),\r\n                        icon: 'success'\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                if (notice) {\r\n                    Swal.fire({\r\n                        title: getI18n('updateYtbInfoError'),\r\n                        icon: 'error'\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        catch (error) {\r\n            throwError(error, 'Youtube.getToken');\r\n            if (notice) {\r\n                Swal.fire({\r\n                    title: getI18n('updateYtbInfoError'),\r\n                    icon: 'error'\r\n                });\r\n            }\r\n        }\r\n    };\r\n    Youtube.prototype.toggleChannel = function (_a) {\r\n        var link = _a.link, _b = _a.doTask, doTask = _b === void 0 ? true : _b;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _c, params, needLogin, _d, apiKey, client, request, channelId, logStatus, nowTime, _e, result, statusText, status_2, data, error_2;\r\n            return __generator(this, function (_f) {\r\n                switch (_f.label) {\r\n                    case 0:\r\n                        _f.trys.push([0, 3, , 4]);\r\n                        return [4 /*yield*/, this.getInfo(link, 'channel')];\r\n                    case 1:\r\n                        _c = _f.sent(), params = _c.params, needLogin = _c.needLogin;\r\n                        _d = params || {}, apiKey = _d.apiKey, client = _d.client, request = _d.request, channelId = _d.channelId;\r\n                        if (needLogin) {\r\n                            echoLog({ type: 'custom', text: getI18n('loginYtb') });\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        if (!(apiKey && client && request && channelId)) {\r\n                            echoLog({ type: 'custom', text: '\"getYtbToken\" failed' });\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        if (!doTask && this.whiteList.channels.includes(channelId)) {\r\n                            // TODO: 直接echo\r\n                            echoLog({ type: 'whiteList', text: channelId });\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        logStatus = echoLog({ type: doTask ? 'followYtbChannel' : 'unfollowYtbChannel', text: channelId });\r\n                        nowTime = parseInt(String(new Date().getTime() / 1000), 10);\r\n                        return [4 /*yield*/, httpRequest({\r\n                                url: \"https://www.youtube.com/youtubei/v1/subscription/\" + (doTask ? '' : 'un') + \"subscribe?key=\" + apiKey,\r\n                                method: 'POST',\r\n                                headers: {\r\n                                    origin: 'https://www.youtube.com',\r\n                                    referer: \"https://www.youtube.com/channel/\" + channelId,\r\n                                    'content-type': 'application/json',\r\n                                    'x-goog-authuser': '0',\r\n                                    'x-goog-visitor-id': client === null || client === void 0 ? void 0 : client.visitorData,\r\n                                    'x-origin': 'https://www.youtube.com',\r\n                                    authorization: \"SAPISIDHASH \" + nowTime + \"_\" + sha1(nowTime + \" \" + this.auth.PAPISID + \" https://www.youtube.com\")\r\n                                },\r\n                                data: JSON.stringify({\r\n                                    context: {\r\n                                        client: client,\r\n                                        request: {\r\n                                            sessionId: request === null || request === void 0 ? void 0 : request.sessionId,\r\n                                            internalExperimentFlags: [],\r\n                                            consistencyTokenJars: []\r\n                                        },\r\n                                        user: {}\r\n                                    },\r\n                                    channelIds: [channelId],\r\n                                    params: doTask ? 'EgIIAhgA' : 'CgIIAhgA'\r\n                                })\r\n                            })];\r\n                    case 2:\r\n                        _e = _f.sent(), result = _e.result, statusText = _e.statusText, status_2 = _e.status, data = _e.data;\r\n                        if (result === 'Success') {\r\n                            if ((data === null || data === void 0 ? void 0 : data.status) === 200) {\r\n                                if ((doTask &&\r\n                                    (/\"subscribed\": true/.test(data.responseText) || data.responseText.includes('The subscription already exists'))) || (!doTask && /\"subscribed\": false/.test(data.responseText))) {\r\n                                    logStatus.success();\r\n                                    if (doTask)\r\n                                        this.tasks.channels = unique(__spreadArray(__spreadArray([], __read(this.tasks.channels), false), [link], false));\r\n                                    return [2 /*return*/, true];\r\n                                }\r\n                                logStatus.error(getI18n('tryUpdateYtbAuth'), true);\r\n                                return [2 /*return*/, false];\r\n                            }\r\n                            logStatus.error(\"Error:\" + (data === null || data === void 0 ? void 0 : data.statusText) + \"(\" + (data === null || data === void 0 ? void 0 : data.status) + \")\");\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        logStatus.error(result + \":\" + statusText + \"(\" + status_2 + \")\");\r\n                        return [2 /*return*/, false];\r\n                    case 3:\r\n                        error_2 = _f.sent();\r\n                        throwError(error_2, 'Youtube.toggleChannel');\r\n                        return [2 /*return*/, false];\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Youtube.prototype.toggleLikeVideo = function (_a) {\r\n        var link = _a.link, _b = _a.doTask, doTask = _b === void 0 ? true : _b;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _c, params, needLogin, _d, apiKey, client, request, videoId, likeParams, logStatus, nowTime, likeVideoData, _e, result, statusText, status_3, data, error_3;\r\n            return __generator(this, function (_f) {\r\n                switch (_f.label) {\r\n                    case 0:\r\n                        _f.trys.push([0, 3, , 4]);\r\n                        return [4 /*yield*/, this.getInfo(link, 'likeVideo')];\r\n                    case 1:\r\n                        _c = _f.sent(), params = _c.params, needLogin = _c.needLogin;\r\n                        _d = params || {}, apiKey = _d.apiKey, client = _d.client, request = _d.request, videoId = _d.videoId, likeParams = _d.likeParams;\r\n                        if (needLogin) {\r\n                            echoLog({ type: 'text', text: \"\" + getI18n('loginYtb') });\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        if (!(apiKey && client && request && videoId && likeParams)) {\r\n                            echoLog({ type: 'text', text: '\"getYtbToken\" failed' });\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        if (!doTask && this.whiteList.likes.includes(videoId)) {\r\n                            // TODO: 直接echo\r\n                            echoLog({ type: 'whiteList', text: link });\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        logStatus = echoLog({ type: doTask ? 'likeYtbVideo' : 'unlikeYtbVideo', text: videoId });\r\n                        nowTime = parseInt(String(new Date().getTime() / 1000), 10);\r\n                        likeVideoData = {\r\n                            context: {\r\n                                client: client,\r\n                                request: {\r\n                                    sessionId: request.sessionId,\r\n                                    internalExperimentFlags: [],\r\n                                    consistencyTokenJars: []\r\n                                },\r\n                                user: {}\r\n                            },\r\n                            target: {\r\n                                videoId: videoId\r\n                            }\r\n                        };\r\n                        if (doTask) {\r\n                            if (likeParams) {\r\n                                likeVideoData.params = likeParams;\r\n                            }\r\n                            else {\r\n                                logStatus.error('Empty likeParams');\r\n                                return [2 /*return*/, false];\r\n                            }\r\n                        }\r\n                        return [4 /*yield*/, httpRequest({\r\n                                url: \"https://www.youtube.com/youtubei/v1/like/\" + (doTask ? '' : 'remove') + \"like?key=\" + apiKey,\r\n                                method: 'POST',\r\n                                headers: {\r\n                                    origin: 'https://www.youtube.com',\r\n                                    referer: \"https://www.youtube.com/watch?v=\" + videoId,\r\n                                    'content-type': 'application/json',\r\n                                    'x-goog-authuser': '0',\r\n                                    'x-goog-visitor-id': client.visitorData,\r\n                                    'x-origin': 'https://www.youtube.com',\r\n                                    authorization: \"SAPISIDHASH \" + nowTime + \"_\" + sha1(nowTime + \" \" + this.auth.PAPISID + \" https://www.youtube.com\")\r\n                                },\r\n                                data: JSON.stringify(likeVideoData)\r\n                            })];\r\n                    case 2:\r\n                        _e = _f.sent(), result = _e.result, statusText = _e.statusText, status_3 = _e.status, data = _e.data;\r\n                        if (result === 'Success') {\r\n                            if ((data === null || data === void 0 ? void 0 : data.status) === 200) {\r\n                                if ((doTask && data.responseText.includes('Added to Liked videos')) ||\r\n                                    (!doTask &&\r\n                                        (data.responseText.includes('Removed from Liked videos') || data.responseText.includes('Dislike removed')))) {\r\n                                    logStatus.success();\r\n                                    if (doTask)\r\n                                        this.tasks.likes = unique(__spreadArray(__spreadArray([], __read(this.tasks.likes), false), [link], false));\r\n                                    return [2 /*return*/, true];\r\n                                }\r\n                                logStatus.error(getI18n('tryUpdateYtbAuth'), true);\r\n                                return [2 /*return*/, false];\r\n                            }\r\n                            logStatus.error(\"Error:\" + (data === null || data === void 0 ? void 0 : data.statusText) + \"(\" + (data === null || data === void 0 ? void 0 : data.status) + \")\");\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        logStatus.error(result + \":\" + statusText + \"(\" + status_3 + \")\");\r\n                        return [2 /*return*/, false];\r\n                    case 3:\r\n                        error_3 = _f.sent();\r\n                        throwError(error_3, 'Youtube.toggleLikeVideo');\r\n                        return [2 /*return*/, false];\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Youtube.prototype.toggle = function (_a) {\r\n        var _b = _a.doTask, doTask = _b === void 0 ? true : _b, _c = _a.channelLinks, channelLinks = _c === void 0 ? [] : _c, _d = _a.videoLinks, videoLinks = _d === void 0 ? [] : _d;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var prom, realChannels, realLikes, realChannels_1, realChannels_1_1, channel, e_1_1, realLikes_1, realLikes_1_1, video, e_2_1, error_4;\r\n            var e_1, _e, e_2, _f;\r\n            return __generator(this, function (_g) {\r\n                switch (_g.label) {\r\n                    case 0:\r\n                        _g.trys.push([0, 17, , 18]);\r\n                        if (!this.initialized) {\r\n                            echoLog({ type: 'text', text: '请先初始化' });\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        prom = [];\r\n                        realChannels = this.getRealParams('channels', [], channelLinks, doTask, function (link) {\r\n                            var _a;\r\n                            if (/^https:\\/\\/www\\.google\\.com.*?\\/url\\?.*?url=https:\\/\\/www.youtube.com\\/.*/.test(link)) {\r\n                                return (_a = link.match(/url=(https:\\/\\/www.youtube.com\\/.*)/)) === null || _a === void 0 ? void 0 : _a[1];\r\n                            }\r\n                            return link;\r\n                        });\r\n                        realLikes = this.getRealParams('likes', [], videoLinks, doTask, function (link) {\r\n                            var _a;\r\n                            if (/^https:\\/\\/www\\.google\\.com.*?\\/url\\?.*?url=https:\\/\\/www.youtube.com\\/.*/.test(link)) {\r\n                                return (_a = link.match(/url=(https:\\/\\/www.youtube.com\\/.*)/)) === null || _a === void 0 ? void 0 : _a[1];\r\n                            }\r\n                            return link;\r\n                        });\r\n                        if (!(realChannels.length > 0)) return [3 /*break*/, 8];\r\n                        _g.label = 1;\r\n                    case 1:\r\n                        _g.trys.push([1, 6, 7, 8]);\r\n                        realChannels_1 = __values(realChannels), realChannels_1_1 = realChannels_1.next();\r\n                        _g.label = 2;\r\n                    case 2:\r\n                        if (!!realChannels_1_1.done) return [3 /*break*/, 5];\r\n                        channel = realChannels_1_1.value;\r\n                        prom.push(this.toggleChannel({ link: channel, doTask: doTask }));\r\n                        return [4 /*yield*/, delay(1000)];\r\n                    case 3:\r\n                        _g.sent();\r\n                        _g.label = 4;\r\n                    case 4:\r\n                        realChannels_1_1 = realChannels_1.next();\r\n                        return [3 /*break*/, 2];\r\n                    case 5: return [3 /*break*/, 8];\r\n                    case 6:\r\n                        e_1_1 = _g.sent();\r\n                        e_1 = { error: e_1_1 };\r\n                        return [3 /*break*/, 8];\r\n                    case 7:\r\n                        try {\r\n                            if (realChannels_1_1 && !realChannels_1_1.done && (_e = realChannels_1.return)) _e.call(realChannels_1);\r\n                        }\r\n                        finally { if (e_1) throw e_1.error; }\r\n                        return [7 /*endfinally*/];\r\n                    case 8:\r\n                        if (!(realLikes.length > 0)) return [3 /*break*/, 16];\r\n                        _g.label = 9;\r\n                    case 9:\r\n                        _g.trys.push([9, 14, 15, 16]);\r\n                        realLikes_1 = __values(realLikes), realLikes_1_1 = realLikes_1.next();\r\n                        _g.label = 10;\r\n                    case 10:\r\n                        if (!!realLikes_1_1.done) return [3 /*break*/, 13];\r\n                        video = realLikes_1_1.value;\r\n                        prom.push(this.toggleLikeVideo({ link: video, doTask: doTask }));\r\n                        return [4 /*yield*/, delay(1000)];\r\n                    case 11:\r\n                        _g.sent();\r\n                        _g.label = 12;\r\n                    case 12:\r\n                        realLikes_1_1 = realLikes_1.next();\r\n                        return [3 /*break*/, 10];\r\n                    case 13: return [3 /*break*/, 16];\r\n                    case 14:\r\n                        e_2_1 = _g.sent();\r\n                        e_2 = { error: e_2_1 };\r\n                        return [3 /*break*/, 16];\r\n                    case 15:\r\n                        try {\r\n                            if (realLikes_1_1 && !realLikes_1_1.done && (_f = realLikes_1.return)) _f.call(realLikes_1);\r\n                        }\r\n                        finally { if (e_2) throw e_2.error; }\r\n                        return [7 /*endfinally*/];\r\n                    case 16: \r\n                    // TODO: 返回值处理\r\n                    return [2 /*return*/, Promise.all(prom).then(function () { return true; })];\r\n                    case 17:\r\n                        error_4 = _g.sent();\r\n                        throwError(error_4, 'Vk.toggle');\r\n                        return [2 /*return*/, false];\r\n                    case 18: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return Youtube;\r\n}(Social));\r\nexport default Youtube;\r\n","/*\r\n * @Author       : HCLonely\r\n * @Date         : 2021-10-26 15:44:54\r\n * @LastEditTime : 2021-10-30 13:14:09\r\n * @LastEditors  : HCLonely\r\n * @FilePath     : /auto-task-new/src/index.ts\r\n * @Description  :\r\n */\r\nvar _a;\r\nimport Discord from './scripts/social/Discord';\r\nimport Instagram from './scripts/social/Instagram';\r\nimport Reddit from './scripts/social/Reddit';\r\nimport Twitch from './scripts/social/Twitch';\r\nimport Twitter from './scripts/social/Twitter';\r\nimport Vk from './scripts/social/Vk';\r\nimport Youtube from './scripts/social/Youtube';\r\nif (window.location.hostname === 'discord.com' && window.location.hash === '#auth') { // todo: 登录\r\n    GM_setValue('discordAuth', { auth: (_a = window.localStorage.getItem('token')) === null || _a === void 0 ? void 0 : _a.replace(/^\"|\"$/g, '') }); // eslint-disable-line new-cap\r\n    window.close();\r\n}\r\nwindow.onload = function () {\r\n    var _a;\r\n    if (window.location.hostname === 'www.twitch.tv' && window.location.hash === '#auth') { // todo: 登录\r\n        var authToken = Cookies.get('auth-token');\r\n        var isLogin = !!Cookies.get('login');\r\n        if (isLogin) {\r\n            GM_setValue('twitchAuth', { authToken: authToken, clientId: (_a = commonOptions === null || commonOptions === void 0 ? void 0 : commonOptions.headers) === null || _a === void 0 ? void 0 : _a['Client-ID'] }); // eslint-disable-line new-cap\r\n            window.close();\r\n        }\r\n        else {\r\n            // 需要登录\r\n        }\r\n    }\r\n    if (window.location.hostname === 'twitter.com' && window.location.hash === '#auth') { // todo: 登录\r\n        var ct0 = Cookies.get('ct0');\r\n        if (ct0) {\r\n            GM_setValue('twitterAuth', { ct0: ct0 }); // eslint-disable-line new-cap\r\n            window.close();\r\n        }\r\n        else {\r\n            // 需要登录\r\n        }\r\n    }\r\n    unsafeWindow.Discord = Discord;\r\n    unsafeWindow.Instagram = Instagram;\r\n    unsafeWindow.Reddit = Reddit;\r\n    unsafeWindow.Twitch = Twitch;\r\n    unsafeWindow.Twitter = Twitter;\r\n    unsafeWindow.Vk = Vk;\r\n    unsafeWindow.Youtube = Youtube;\r\n    $('body').append('<div id=\"fuck-task-info\" style=\"position:fixed;bottom:10px;right:10px;width:300px;max-width:60%;\"></div>');\r\n};\r\n"],"sourceRoot":""}